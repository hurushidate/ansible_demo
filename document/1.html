<html lang="ja">
<head>
  <style type="text/css">
    @charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}
  </style>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scale=0">
  <title>Ansible x FortiGate</title>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.9.0/css/all.css" integrity="sha384-i1LQnF23gykqWXg6jxC2ZbCbUMxyw5gLZY6UiUS98LYV5unm8GWmfkIS6jqJfb4E" crossorigin="anonymous">
  <link rel="stylesheet" href="/ansible_demo/themes/v2/css/vendor.min.css">
  <link rel="stylesheet" href="/ansible_demo/themes/v2/css/docs.v2.min.css">
  <link href="https://fonts.googleapis.com/css?family=M+PLUS+1p&amp;subset=japanese" rel="stylesheet"> </head>
<body ng-app="docs" class="ng-scope">
  <div class="ftnt-header v3 d-flex p-3 flex-row bg-red align-items-center border-bottom box-shadow justify-content-between">
    <div class="site-banner" onclick="window.location='#'"> <img class="docs-logo" src="/ansible_demo/img/logo.svg">
      <h5 class="my-0 mr-md-auto font-weight-normal">Ansible チュートリアル</h5>
    </div>
    <div class="mobile-menu p-2 d-md-none"> <button id="mobile_menu_btn" class="navbar-toggler navbar-toggler-right navbar-icon" type="button">
                <i class="fas fa-bars"></i>
            </button> </div>
    <nav class="d-none d-md-block d-lg-block d-xl-block "> </nav>
  </div>
  <div id="mobile_menu" class="offcanvas-collapse d-md-none">
    <div class="version-row">
      <h3>FortiGate x Ansible</h3>
    </div>
    <hr>
    <h3>Table of Contents</h3>
    <ul class="toc" style="padding-left: 15px">
      <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/0.html">
                        はじめに
                    </a> </li>
      <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/1.html">
                        ラボ環境のセットアップ
                    </a> </li>
      <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/2.html">
                        Collectionのダウンロード
                    </a> </li>
      <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/3.html">
                        サンプルPlaybookの実行
                    </a> </li>
      <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/4.html">
                        Playbookの作成 (factsの利用)
                    </a> </li>
      <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/5.html">
                        インターフェース設定のPlaybook
                    </a> </li>
      <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/6.html">
                        ファイアウォールポリシーの設定
                </a> </li>
      <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/7.html">
                        fortiosapiを使ってみる
            </a> </li>
      <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/change-log.html">
                        Change Log
                    </a> </li>
    </ul>
  </div>
  <div class="breadcrumbs  mt-md-2 mb-md-3"> <span class="item  md-hide"><a href="#">Home</a></span> <span class="item "><a href="#">FortiGate x Ansible</a></span> </div>
  <div class="ftnt-triple-col ftnt-multi-col d-md-flex flex-md-equal w-100 my-md-3 pl-md-3 docs-document" style="height: 197px;">
    <div class="mr-md-3 px-3 px-md-3 w-25 d-inline-block overflow-scroll column_left column-side">
      <div class="contents py-md-2">
        <h3> Table of contents </h3>
        <ul class="toc" style="padding-left: 15px">
          <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/0.html">
                          はじめに
                      </a> </li>
          <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/1.html">
                          ラボ環境のセットアップ
                      </a> </li>
          <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/2.html">
                          Collectionのダウンロード
                      </a> </li>
          <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/3.html">
                          サンプルPlaybookの実行
                      </a> </li>
          <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/4.html">
                          Playbookの作成 (factsの利用)
                      </a> </li>
          <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/5.html">
                          インターフェースの設定
                      </a> </li>
          <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/6.html">
                          ファイアウォールポリシーの設定
                  </a> </li>
          <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/7.html">
                          fortiosapiを使ってみる
              </a> </li>
          <li class="toc toc-item leaf  not-root-node "> <a class="toc" href="/ansible_demo/document/change-log.html">
                          Change Log
                    </a> </li>
        </ul>
      </div>
    </div>
    <div class="mr-md-3 px-3 px-md-3 w-70 d-inline-block overflow-scroll column_center">
      <div class="document-content src-mc mt-4">
        <div id="content">
          <div role="main" id="mc-main-content">
          <h1>ラボ環境のセットアップ</h1>
            <p>演習に入る前に、ラボ環境を確認しましょう。</p>
            <p>この演習では、UbuntuにKVMを導入し、KVM上に2台のFortiGate-VM(fgt1, fgt2)をデプロイします。</p>
            <p>FortiGate-VMに対して、Ansible playbookを実行していきます。</p>
            <h4>環境・構成</h4>
            <ol>
              <li value="1">準備するもの
                <p>Ubuntu Server 18.04 LTS *2vCPU, 8GBメモリ以上</p>
                <p>FortiGate-VM KVM qcow v6.2</li>
              <li value="2">システム環境
                <p>KVM</p>
                <p>Python3系 (pip3)</p>
                <p>Ansible 2.9</p>
              </li>
              <li value="3">ネットワークトポロジ
                <p> <img src="/ansible_demo/img/02.png"> </p>
              </li>
            </ol>
            <h4>セットアップ</h4>
            <ol>
              <li value="1">ubuntuにSSHアクセス</li>
              <pre>
git clone https://github.com/hurushidate.github.io/xxxxxx</pre></li>
              <li value="2">各種パッケージのインストール
              <pre>
cd setup/
installation.sh</pre>
              <p>このシェルスクリプトで、kvm、curl、openssh-clientなどインストールされます。</p>
              <p>ssh鍵生成時にダイアログが表示されます。すべてEnterで構いません。</p>
              <p>最後に<code>sudo reboot</code>でリブートします。</p>
              </li>
              <li value="3">pip3、Ansibleのインストール
              <pre>
sudo apt install -y python3-pip
pip3 install ansible --user</pre>
<!--
<button type="button" class="copyButton_2Cs1XD" id="copyButton_2Cs1XD" aria-live="polite" onclick="(function() {
            var textarea = document.createElement('textarea');
            var button = document.querySelector('#copyButton_2Cs1XD');

            textarea.innerHTML = 'sudo apt install -y python3-pip\npip3 install ansible --user';
            document.body.appendChild(textarea);
            textarea.select();

            button.innerHTML = 'Copied!';
            setTimeout(function() { button.innerHTML = 'Click to copy'; }, 1500);

            document.execCommand('copy');
            document.body.removeChild(textarea);
        })();">Click to copy</button>
-->
        </li>
              <li value="4">PATHを通す
              <pre>
echo "export PATH=$PATH:/home/${USER}/.local/bin" >>.bashrc
source ~/.bashrc</pre>
              </li>
              <li value="5">KVM fortios_623.qcow2をUbuntuの<code>~/setup</code>にアップロード</li>
              <li value="6">FortiGate VMの起動
              <pre>
cd ~/setup
sudo ./start_fgt.sh fortios_623.qcow2</pre>
              </li>
              <li value="7">FortiGate VMの起動確認
              <pre>
virsh list</pre>
              </li>
              <li value="8">FortiGate VMにコンソールログイン
              <pre>
virsh console fgt1</pre>
              <p>username: admin, password: m</p>
              <p> Ctrl+] でコンソールから抜けます</p>
              <pre>
virsh console fgt2</pre>
              <li value="9">FortiGate VMにSSHログイン
              <pre>
ssh fgt1</pre>
              <p>username: admin, password: m</p>
              <pre>
ssh fgt2</pre>
              </li>
            </ol>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="mobile-content">
    <div class="document-content src-mc d-md-none">
      <div id="content">
        <div role="main" id="mc-main-content">
        <h1>ラボ環境のセットアップ</h1>
          <p>演習に入る前に、ラボ環境を確認しましょう。</p>
          <p>この演習では、UbuntuにKVMを導入し、KVM上に2台のFortiGate-VM(fgt1, fgt2)をデプロイします。</p>
          <p>FortiGate-VMに対して、Ansible playbookを実行していきます。</p>
          <h4>環境・構成</h4>
          <ol>
            <li value="1">準備するもの
              <p>Ubuntu Server 18.04 LTS *2vCPU, 8GBメモリ以上</p>
              <p>FortiGate-VM KVM qcow v6.2</li>
            <li value="2">システム環境
              <p>KVM</p>
              <p>Python3系 (pip3)</p>
              <p>Ansible 2.9</p>
            </li>
            <li value="3">ネットワークトポロジ
              <p> <img src="/ansible_demo/img/02.png"> </p>
            </li>
          </ol>
          <h4>セットアップ</h4>
          <ol>
            <li value="1">ubuntuにSSHアクセス</li>
            <pre>
git clone https://github.com/hurushidate.github.io/xxxxxx</pre></li>
            <li value="2">各種パッケージのインストール
            <pre>
cd setup/
installation.sh</pre>
            <p>このシェルスクリプトで、kvm、curl、openssh-clientなどインストールされます。</p>
            <p>ssh鍵生成時にダイアログが表示されます。すべてEnterで構いません。</p>
            <p>最後に<code>sudo reboot</code>でリブートします。</p>
            </li>
            <li value="3">pip3、Ansibleのインストール
            <pre>
sudo apt install -y python3-pip
pip3 install ansible --user</pre>
<!--
<button type="button" class="copyButton_2Cs1XD" id="copyButton_2Cs1XD" aria-live="polite" onclick="(function() {
          var textarea = document.createElement('textarea');
          var button = document.querySelector('#copyButton_2Cs1XD');

          textarea.innerHTML = 'sudo apt install -y python3-pip\npip3 install ansible --user';
          document.body.appendChild(textarea);
          textarea.select();

          button.innerHTML = 'Copied!';
          setTimeout(function() { button.innerHTML = 'Click to copy'; }, 1500);

          document.execCommand('copy');
          document.body.removeChild(textarea);
      })();">Click to copy</button>
-->
      </li>
            <li value="4">PATHを通す
            <pre>
echo "export PATH=$PATH:/home/${USER}/.local/bin" >>.bashrc
source ~/.bashrc</pre>
            </li>
            <li value="5">KVM fortios_623.qcow2をUbuntuの<code>~/setup</code>にアップロード</li>
            <li value="6">FortiGate VMの起動
            <pre>
cd ~/setup
sudo ./start_fgt.sh fortios_623.qcow2</pre>
            </li>
            <li value="7">FortiGate VMの起動確認
            <pre>
virsh list</pre>
            </li>
            <li value="8">FortiGate VMにコンソールログイン
            <pre>
virsh console fgt1</pre>
            <p>username: admin, password: m</p>
            <p> Ctrl+] でコンソールから抜けます</p>
            <pre>
virsh console fgt2</pre>
            <li value="9">FortiGate VMにSSHログイン
            <pre>
ssh fgt1</pre>
            <p>username: admin, password: m</p>
            <pre>
ssh fgt2</pre>
            </li>
          </ol>
        </div>
      </div>
    </div>
  </div>
  <div class="side-menu d-md-none"> </div>
  </div>
  <footer>
    <div class="container">
      <div class="row justify-content-between">
        <div class="col-md-auto col-12 order-md-1">
          <ul class="socials"> </ul>
        </div>
        <div class="col-md-auto col-12 order-md-3"> <a href="https://www.fortinet.com/" target="_blank">
                        <img src="/ansible_demo/img/Fortinet-logo white.png" width="150px">
                    </a> </div>
      </div>
    </div>
  </footer>
  <script>
  </script>
  <script src="/ansible_demo/themes/v2/js/vendor.min.js"></script>
  <script src="/ansible_demo/themes/v2/js/docs.v2.min.js"></script>
  <div class="autocomplete-suggestions " style="top: 185px; left: 32px; width: 225.062px;"></div>
</body>
</html>
