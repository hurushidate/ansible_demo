(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{11:function(module,exports,__webpack_require__){__webpack_require__(641),module.exports="ngRoute"},114:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8),__webpack_require__(49),__webpack_require__(26),__webpack_require__(48)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(ftnt_shared,fPersist,inject){const VIEW_TYPE_STORAGE_KEY="application_signature_view_type";const component={controller:class extends inject.Collectable{constructor(applicationSignatureView,applicationGroupView){super(),this.views={"application.name":applicationSignatureView,"application.signature":applicationSignatureView,"application.group":applicationGroupView},this._setViewTypes(),this.muTable={},this.status={loading:!0}}$onInit($INJECTABLE$,$location,csfTopology,$scope,$routeParams){return async()=>{const routeParams=this.routeParams||$routeParams,fortigateSerial=routeParams.fortigate,hideFortiGateChooser=!!this.singleView;this._parseRouteParams(routeParams),await csfTopology.buildIfNecessary(),hideFortiGateChooser?(this.fortigate||(this.fortigate=csfTopology.fortigateMapping[fortigateSerial]||csfTopology.thisFortigate),this.load()):$scope.$watch(()=>csfTopology.selectedFortigate,fortigate=>{this.fortigate=fortigate,this.load()})}}get currentView(){return this._currentView}set currentView(view){this._currentView!==view&&(this._currentView=view,this.load())}load(){this.status.loading=!0,this.muTable.instance&&this.muTable.instance.clearSelection(),this.view.setParams({fortigate:this.fortigate,view:this.singleView,hideChart:this.hideChart,filters:this.filters}),this.chartColumns=this.view.chartColumns,Object.assign(this.muTable,{source:this.view.getSource(),settings:this.view.getSettings()}),this.muTable.source.then(()=>{this.status.loading=!1})}getChartColor($INJECTABLE$,state,lang){const theme=state.theme,colors=ftnt_shared.colors&&ftnt_shared.colors[theme],getSevColor=sev=>colors["severity-labels"][sev].background,severityColorMapping={[lang("severity_info")]:getSevColor("none"),[lang("severity_low")]:getSevColor("low"),[lang("severity_medium")]:getSevColor("medium"),[lang("severity_high")]:getSevColor("high"),[lang("severity_critical")]:getSevColor("critical")};return(value,column)=>{if(["risk"].includes(column.id))return severityColorMapping[value]}}get view(){return this.singleView?this.views[this.singleView]:this.views[this.currentView]}set _currentView(view){fPersist.put(VIEW_TYPE_STORAGE_KEY,view)}get _currentView(){const viewType=fPersist.get(VIEW_TYPE_STORAGE_KEY);return viewType||this.defaultViewType}_parseRouteParams($INJECTABLE$,$location){return routeParams=>{const view=routeParams.view;view&&(this._currentView=view),$location.search("view",null)}}_setViewTypes(){this.viewTypes=[{name:"application.signature",viewTypeLang:"Signature"},{name:"application.group",viewTypeLang:"field_group"}],this.defaultViewType="application.signature"}},bindings:{routeParams:"<?",fortigate:"=?",singleView:"<?",hideChart:"<?",filters:"<?",readOnly:"<?"},require:{fSlideContainer:"?^"},templateUrl:__webpack_require__(972)};return(providers,loader)=>(providers.$compile.component("fApplicationSignatures",component),loader.initModules([__webpack_require__(973),__webpack_require__(975),__webpack_require__(976),__webpack_require__(248)]))}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},12:function(module,exports,__webpack_require__){__webpack_require__(642),module.exports="ngResource"},13:function(module,exports,__webpack_require__){__webpack_require__(643),module.exports="ngSanitize"},135:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26),__webpack_require__(8),__webpack_require__(36),__webpack_require__(0)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=((inject,ftnt_shared,fSelect,BUILD)=>{const CFG_ER_NO_PRIVILEGE=BUILD.SYMBOLS.CFG_ER_NO_PRIVILEGE,AP_REFRESH_TIME=1e4,AP_VIEWS={RADIOS:{lang:"Radios",value:"radios"},CLIENTS:{lang:"client",value:"clients"},LOGS:{lang:"logs",value:"logs",enabled:function(ap,fortigate,state){return this.enabledCheckMap={permission:state.adminHasReadPermission(state.ACCESS_GROUP.LOG),fortigate:!fortigate||fortigate.isCurrent},Object.keys(this.enabledCheckMap).every(key=>this.enabledCheckMap[key])},disabledReasons:{permission:CFG_ER_NO_PRIVILEGE,fortigate:"This option is only available when on current FortiGate."}},AP_CLI:{lang:"CLI Access",value:"cliConnect",enabled:function(ap,fortigate,state){return this.enabledCheckMap={permission:!state.readOnlyForPage&&state.adminHasReadPermission(state.ACCESS_GROUP.FABRIC),fortigate:!fortigate||fortigate.isCurrent,property:ap.cliEnabled&&ap.hasValidIpv4Address},Object.keys(this.enabledCheckMap).every(key=>this.enabledCheckMap[key])},disabledReasons:{permission:CFG_ER_NO_PRIVILEGE,property:"FortiAP must be connected and have SSH administrative access enabled in the FortiAP profile in order to connect to the CLI.",fortigate:"This option is only available when on current FortiGate."}},SPECTRAL:{lang:"Spectrum Analysis",value:"spectral",enabled:function(ap,fortigate,state){return this.enabledCheckMap={permission:state.adminHasWritePermission(state.ACCESS_GROUP.WIFI),online:ap.isConnectedAuthorized&&ap.radios.some(r=>r.isMonitor),supported:ap.spectrumAnalysisSupported,fortigate:!fortigate||fortigate.isCurrent},Object.keys(this.enabledCheckMap).every(key=>this.enabledCheckMap[key])},disabledReasons:{permission:CFG_ER_NO_PRIVILEGE,online:"FortiAP must be connected and have a radio in Dedicated Monitor mode.",supported:"This FortiAP does not support spectrum analysis.",fortigate:"This option is only available when on current FortiGate."}},PROBE_VLAN:{lang:"VLAN Probe",value:"VLAN Probe",enabled:function(ap,fortigate,state){return this.enabledCheckMap={permission:state.adminHasWritePermission(state.ACCESS_GROUP.WIFI),vlanProbeSupported:ap.vlanProbeSupported},Object.keys(this.enabledCheckMap).every(key=>this.enabledCheckMap[key])},disabledReasons:{permission:CFG_ER_NO_PRIVILEGE,vlanProbeSupported:"VLAN Probe is not supported by this FortiAP model."}}},AP_EDIT_URL="/wifi/managed-ap/edit",{Omniselect:Omniselect}=ftnt_shared;class APDetails extends inject.Collectable{constructor(state,lang){super(),this.setupAPWatch(),this.formatters={channels:channels=>(channels||[]).join(", "),percentage:value=>Number.isInteger(value)?`${value}%`:lang("n/a"),band:(band,isAP)=>{return lang(isAP&&band&&"unknown"!==band?`wifi::${band}`:"n/a")}},this.state=state,this.readOnly=this.state.readOnlyForPage,this.ledBlinkOptions=[{value:30,label:`30 ${lang("secs")}`},{value:60,label:lang("{0} minute",[1])},{value:120,label:lang("{0} minutes",[2])},{value:300,label:lang("{0} minutes",[5])},{value:0,label:lang("Indefinite")}],this.radioFrequency=["24ghz","5ghz"]}$onInit(){this.init()}changeView(view){this.selectedView!==view&&(this.selectedView=view)}getOmniselectDatasource(datasource){return this.fortigate&&this.fortigate.getOmniselectProxySourceID(datasource)||datasource}setupAPWatch($INJECTABLE$,$scope,$timeout){return()=>{$scope.$watch("$ctrl.ap",(newAp,oldAp)=>{oldAp&&newAp.wtpID!==oldAp.wtpID&&this.init(!0)}),$scope.$on("$destroy",()=>{$timeout.cancel(this.refreshPromise)})}}setupRefresh($INJECTABLE$,$timeout){return()=>{const refresh=()=>this.ap.refresh().then(()=>{this.refreshPromise=$timeout(()=>refresh(),AP_REFRESH_TIME)});$timeout.cancel(this.refreshPromise),refresh()}}init($INJECTABLE$,lang,apManager,$timeout,csfTopology,state,$q){return async delay=>{this.loading=!0,this.fortigate=this.fortigate||csfTopology.selectedFortigate,[this.vapMap,this.vapGroupMap]=await $q.all([Omniselect.getSourceData(fSelect.makeAllVdomsSourceID(this.getOmniselectDatasource("wireless-controller.vap"))).then(res=>res.mapping),Omniselect.getSourceData(this.getOmniselectDatasource("wireless-controller.vap-group")).then(res=>res.mapping)]),apManager.buildIfNecessary(this.fortigate).then(()=>{!this.ap&&this.serial&&(this.ap=apManager.get(this.serial)),this.ap.refresh().then(()=>{if(this.logFilters={sn:{selectors:{history:"sn"}}},this.logFilterModel={sn:[this.ap.serial]},this.firmwareLoading=!0,this.ap.updateLatestFirmwareInfo().then(()=>{this.newFirmwareAvailable=this.ap.newFirmwareAvailable}).finally(()=>{this.firmwareLoading=!1}),this.hasCountryConflict=this.ap.configuredCountry.conflict>1&&this.ap.isConnectedAuthorized,this.hasCountryConflict){const radioCountry=this.ap.radios.find(radio=>radio.country&&radio.country.name).country.name;this.countryMismatch=[{langKey:"Regulatory Domain Code",value:this.ap.configuredRegionCode},{langKey:"Configured Country/Region",value:this.ap.configuredCountry.name},{langKey:"Operating Country/Region",value:radioCountry}]}this.slideController.slide.update({title:`${lang("Summary of").toString()} ${this.ap.name}`}),this.ssidContents=this.ap.radios.map(radio=>this.generateSsidContent(radio)),this.setupRefresh()}).finally(()=>{delay?$timeout(()=>{this.loading=!1},100):this.loading=!1})}),this.VIEWS=AP_VIEWS,this.view in this.VIEWS?this.VIEWS[this.view].enabled&&!this.VIEWS[this.view].enabled(this.ap,this.fortigate,state)||(this.selectedView=this.VIEWS[this.view]):this.selectedView=this.VIEWS.RADIOS,this.clientColumns=["ssid","device","channel","bandwidth_trx","signal"]}}locateAP($INJECTABLE$,apManager,$location,wifiRegionService){return()=>{this.ap.region&&this.ap.region.name&&(wifiRegionService.locateAP([this.ap]),wifiRegionService.setRegionMkey(this.ap.region.name),$location.url().includes("wifi/region")||$location.url("/wifi/region"),this.slideController.slide.close())}}editAP($INJECTABLE$,$location){return()=>{const mkey=this.ap.isLocal?"local":this.ap.wtpID,fgtSerial=this.fortigate&&!this.fortigate.isCurrent&&this.fortigate.serial||null;$location.path(`/wifi/managed-ap/edit/${mkey}`).search({fortigate:fgtSerial})}}showEdit($INJECTABLE$,$location){return()=>{if(this.ap){const url=$location.url();return!(url.includes(`${AP_EDIT_URL}/${this.ap.wtpID}`)||url.includes(`${AP_EDIT_URL}/local`)&&this.ap.isLocal)}}}authorize(){this.ap.authorize().then(()=>{this.ap.refresh()})}canAuthorize($INJECTABLE$,apManager){return()=>{const stat=apManager.getAPStat(this.ap.parentFortigate);return!this.ap.isAuthorized&&stat&&stat.canStillAuthorize(this.ap)}}deauthorize(){this.ap.deauthorize().then(()=>{this.ap.refresh()})}getSsidDatasource(mkey){const ssid=this.vapMap[mkey]||this.vapGroupMap[mkey];if(ssid)return ssid.q_name&&"vap"===ssid.q_name?fSelect.makeAllVdomsSourceID(this.getOmniselectDatasource(`${ssid.q_path}.${ssid.q_name}`)):this.getOmniselectDatasource(`${ssid.q_path}.${ssid.q_name}`)}generateSsidContent(radio){return radio.isDisabled||radio.isMonitor||radio.isSniffer?{isString:!0,content:"n/a"}:radio.ssid&&radio.ssid.all?{isString:!0,content:`All ${radio.ssid.mode} Mode SSIDs`}:radio.ssid&&radio.ssid.value&&0===radio.ssid.count?{isString:!0,content:"none"}:radio.ssid&&radio.ssid.value&&radio.ssid.count>0?{isString:!1,content:Object.keys(radio.ssid.value).map(ssid=>({q_origin_key:ssid,datasource:this.getSsidDatasource(ssid)})).filter(ssid=>ssid.datasource)}:{isString:!0,content:"n/a"}}expand($INJECTABLE$,$timeout){return()=>{$timeout(()=>{this.expanded=!this.expanded,window.dispatchEvent(new Event("resize"))})}}}return function(providers,providerLoader){return providers.$compile.component("fApDetails",{controller:APDetails,templateUrl:__webpack_require__(861),require:{slideController:"?^fSlideContainer"},bindings:{ap:"<",serial:"<",view:"<?",fortigate:"<"}}),providerLoader.initModules([__webpack_require__(184),__webpack_require__(456),__webpack_require__(72),__webpack_require__(925),__webpack_require__(76),__webpack_require__(943),__webpack_require__(189)])}}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},137:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26),__webpack_require__(8)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=((inject,ftnt_shared)=>{const{Omniselect:Omniselect}=ftnt_shared,SUPPORTS_TAGS=["fortinac"];const fCollectorAgentAdgrpList={controller:class extends inject.Collectable{constructor(){super(),this.muTable={}}$onInit(){this.type||(this.type=SUPPORTS_TAGS.includes(this.connector.type)?"tag":"adgrp"),this.muTable={source:this._getMuTableSource(),settings:this._getMuTableSettings()}}canDelete(entries){return entries.length&&("enable"!==this.connector["ldap-poll"]||!SUPPORTS_TAGS.include(this.connector.type))&&entries.every(entry=>void 0!==entry.q_ref)}_getMuTableSource($INJECTABLE$,ssoUtils){return async()=>{const promises=[Omniselect.getSourceData("user.group"),this.connector.adgrp?this.connector:ssoUtils.enhance(this.connector)],[userGroups,connector]=await Promise.all(promises),userGroupMap=this._createMemberToGroupMap(userGroups);return(this.entries||connector.userGroups||[]).reduce((res,entry)=>{if(!entry.fakeNode){const name=entry.dn,extendedEntry={usergrps:userGroupMap.get(name)&&[...userGroupMap.get(name)]};Object.isFrozen(entry)?res.push(Object.assign({},entry,extendedEntry)):res.push(Object.assign(entry,extendedEntry))}return res},[])}}_getMuTableSettings(){return{userDefinedSections:!1,parentChildRows:"tag"!==this.type,rowHierarchyIDFunction:entry=>entry.dn,parentRowHierarchyIDFunction:entry=>entry.parentDn,defaultColumns:["dn","usergrps","cmdbReferences"],columns:[{id:"dn",langKey:"tag"===this.type?"Tag":"AD Group",type:"omniselect",omniselectAllowFallback:!0,cellValueFunction:(entry,column)=>({q_origin_key:entry[column.id]||entry.q_origin_key,datasource:"user.adgrp"}),collectionEntryValueFunction:entry=>entry.q_origin_key},{id:"usergrps",langKey:"User Groups",type:"omniselect",omniselectAllowFallback:!0,collectionEntryValueFunction:entry=>entry},"cmdbReferences"]}}_createMemberToGroupMap(groups){return groups.reduce((res,entry)=>{for(const member of entry.member||[]){const name=this._pluckName(member);res.has(name)||res.set(name,new Set),res.get(name).add(entry)}return res},new Map)}_pluckName(entry){return"string"==typeof entry?entry:entry&&(entry.name||entry.q_origin_key)}},templateUrl:__webpack_require__(971),bindings:{connector:"<",type:"<",entries:"<"}};return(provider,loaderProvider)=>(provider.$compile.component("fCollectorAgentAdgrpList",fCollectorAgentAdgrpList),loaderProvider.initModules([__webpack_require__(138)]))}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},138:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26),__webpack_require__(0),__webpack_require__(30),__webpack_require__(32),__webpack_require__(38),__webpack_require__(27)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=((inject,BUILD,fLog,fFormatters,fIcon,notify)=>{const{LOCAL_FSSO_CLIENT:LOCAL_FSSO_CLIENT}=BUILD.SYMBOLS,flatNodeRootKey=[...Array(7)].reduce(x=>x+Math.random().toString(36).slice(2),""),FSAE_REFRESH_API="/api/v2/monitor/user/fsso/refresh-server",FSAE_REFRESH_API_ERROR="Error refreshing the group list for this FSSO Agent.",MAX_POLL_RETRIES=3,POLL_DELAY=2e3;class LdapNode{constructor(cn,dn,parentDn,adgrp={}){this.cn=cn,this.dn=dn,this.parentDn=parentDn,this.numChildren=0,this.q_type=adgrp.q_type,this.q_ref=adgrp.q_ref}getIconClass(){return fFormatters.ldap_icon_class(this.dn)}}class FlatNode{constructor(name,isRoot,adgrp={}){this.cn=name,this.dn=isRoot?flatNodeRootKey:name,this.parentDn=isRoot?null:flatNodeRootKey,this.numChildren=0,this.q_type=adgrp.q_type,this.q_ref=adgrp.q_ref,this.fakeNode=isRoot}getIconClass(){const{LDAP_ATTRIBUTE_TYPE:LDAP_ATTRIBUTE_TYPE}=fIcon.ICON_TYPE;return fIcon.iconClass(LDAP_ATTRIBUTE_TYPE,this.parentDn?"cn":"dc")}}class SsoUtils extends inject.Collectable{constructor(){super(),this.SSO_TYPE_HANDLER={fsso:this._handleFssoGroups,"fsso-polling":this._handleFssoPollingGroups}}async enhance(entries){const isArray=Array.isArray(entries);try{const userGroups=await this._loadUserGroups(isArray?null:entries);this._addUserGroupsMap(userGroups);const params={userGroups:userGroups},enhanced=this._makeArray(entries).map(entry=>{params.entry=entry;const handlerFn=this.SSO_TYPE_HANDLER[entry.q_name];return handlerFn?handlerFn.call(this,params):entry});return isArray?Promise.all(enhanced):enhanced[0]}catch(e){return fLog.error(e),e}}pollCollectorAgentGroupFilters($INJECTABLE$,$http,$q,$timeout,CMDB,lang){return(existingCAGroups,agentName)=>{const deferred=$q.defer();let pollCount=0;const adgrpsCmdb=new CMDB("user","adgrp"),existingCAGroupMap=existingCAGroups.reduce((map,existingCAGroup)=>map.set(existingCAGroup.name,existingCAGroup),new Map);return $timeout(function poll(){pollCount>=MAX_POLL_RETRIES?deferred.resolve():$http.post(FSAE_REFRESH_API).then(function(){return adgrpsCmdb.fetch({key:"server-name",pattern:agentName}).$promise},()=>(notify.post(lang(FSAE_REFRESH_API_ERROR),"error"),$q.reject())).then(caGroups=>{let updated;return(updated=caGroups.length!==existingCAGroups.length||caGroups.some(function(caGroup){return!existingCAGroupMap.has(caGroup.name)}))?$q.resolve():$q.reject()}).then(()=>{deferred.resolve()}).catch(()=>{pollCount++,$timeout(poll,POLL_DELAY)})},POLL_DELAY),deferred.promise}}_handleFssoGroups(params){const{entry:entry,userGroups:userGroups}=params,adgrp=userGroups.mapping.get(this._pluckName(entry)),newEntry=Object.assign({},entry,{adgrp:adgrp});return this._getUserGroupsNodes(newEntry,adgrp).then(this._getAgentIpName)}_handleFssoPollingGroups(params){const{entry:entry,userGroups:userGroups}=params,adgrp=userGroups.mapping.get(this._pluckName(entry)),newEntry=Object.assign({},entry,{adgrp:adgrp,name:entry.server});return this._getUserGroupsNodes(newEntry,adgrp).then(this.getAgentIpName)}_getUserGroupsNodes(entry,adgrps){const isTagModeNode=["fortinac"].includes(entry.type);if("fsso"===entry.q_name&&isTagModeNode)return entry.userGroups=this._getTagModeNodes(entry.name,adgrps),this._markDeletableNodes(entry),Promise.resolve(entry);if(!entry["ldap-server"]){const agentName="fsso-polling"===entry.q_name?entry.server:entry.name;return entry.userGroups=this._getStandardModeNodes(agentName,adgrps),this._markDeletableNodes(entry),Promise.resolve(entry)}const name=this._pluckName(entry["ldap-server"]);return this._getOfflineLdapTreeNodes(name,adgrps).then(nodes=>(entry.userGroups=nodes,this._markDeletableNodes(entry),entry))}_markDeletableNodes($INJECTABLE$,state){return entry=>{if(!state.adminHasWritePermissionForTable(entry.q_path,entry.q_name))return;const nodes=entry.userGroups;("fsso-polling"===entry.q_name||"fsso"===entry.q_name&&entry["ldap-server"]&&"disable"===entry["ldap-poll"])&&nodes.forEach(node=>node.can_delete=0===node.numChildren)}}_getStandardModeNodes(fssoAgentName,adgrps){if(!(fssoAgentName&&Array.isArray(adgrps)&&adgrps.length>0))return[];const nodes=[],rootNode=new LdapNode(fssoAgentName,fssoAgentName,null);return nodes.push(rootNode),adgrps.forEach(grp=>nodes.push(new LdapNode(grp.name,grp.name,fssoAgentName))),nodes}_getTagModeNodes(fssoAgentName,adgrps){const nodes=[];if(Array.isArray(adgrps)&&adgrps.length>0){const rootNode=new FlatNode(fssoAgentName,!0);nodes.push(rootNode),adgrps.forEach(function(grp){nodes.push(new FlatNode(grp.name,!1,grp))})}return nodes}_getOfflineLdapTreeNodes($INJECTABLE$,CMDB){return(ldapServerName,adgrps)=>{if(!(ldapServerName&&Array.isArray(adgrps)&&adgrps.length>0))return Promise.resolve([]);const ldapCmdb=new CMDB("user","ldap",{format:"name|dn"}).fetch({key:"name",pattern:ldapServerName});return ldapCmdb.$promise.then(()=>{const ldapServer=ldapCmdb[0];let baseDn=ldapServer&&ldapServer.dn;if(!baseDn&&adgrps.length>0){const firstGrp=this._pluckName(adgrps[0]),isEdir=-1!==firstGrp.toLowerCase().indexOf("o="),csv=firstGrp.split(","),rootStartAt=isEdir?1:2;csv.length>=rootStartAt&&(baseDn=csv.slice(-rootStartAt).join(","))}return ldapServer.name===ldapServerName&&baseDn&&adgrps.length?this.getHierarchyMapping(baseDn,adgrps):[]})}}getHierarchyMapping(root,adgrps){const dnRegex=new RegExp(`(.*),(${root})`,"i"),nodeMap={};return nodeMap[root]=new LdapNode(root,root,null),adgrps.forEach(grp=>{const matches=this._pluckName(grp).match(dnRegex);if(!matches||3!==matches.length)return;const prefix=matches[1],exactRoot=matches[2],csv=prefix.split(",");csv.forEach((cn,i)=>{const dn=csvDn(i);if(!nodeMap[dn]){const parentDn=csvDn(i+1),node=new LdapNode(cn,dn,parentDn,grp);nodeMap[dn]=node}function csvDn(j){return j>=csv.length?root:`${csv.slice(j).join(",")},${exactRoot}`}})}),Object.keys(nodeMap).forEach(function(dn){var parentDn=nodeMap[dn].parentDn,parentNode=nodeMap[parentDn];parentNode&&parentNode.numChildren++}),Object.values(nodeMap)}_getAgentIpName(entry){if("fsso"===entry.q_name){const keys=["server","server2","server3","server4","server5"];entry.agent_ip_name=keys.filter(key=>entry[key]).map(key=>entry[key])}return"fsso-polling"===entry.q_name&&(entry.agent_ip_name=LOCAL_FSSO_CLIENT),entry}_loadUserGroups($INJECTABLE$,CMDB){return entry=>{let params={};if(entry){params={key:"server-name",pattern:"fsso-polling"===entry.q_name?LOCAL_FSSO_CLIENT:this._pluckName(entry),with_meta:!0}}return new CMDB("user","adgrp").fetch(params).$promise}}_addUserGroupsMap(userGroups){const userGroupMap=userGroups.reduce((res,entry)=>{const name=entry["server-name"];if(name){const existing=res.get(name);existing?res.set(name,[...existing,entry]):res.set(name,[entry])}return res},new Map);userGroups.mapping=userGroupMap}_pluckName(entry){return"string"==typeof entry?entry:entry&&(entry.name||entry.q_origin_key)}_makeArray(entries){return Array.isArray(entries)?entries:[entries]}}return providers=>providers.$provide.service("ssoUtils",SsoUtils)}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},14:function(module,exports,__webpack_require__){__webpack_require__(644),module.exports="ngCookies"},15:function(module,exports,__webpack_require__){"use strict";
/**
 * angular-route-segment 1.5.1
 * https://angular-route-segment.com
 * @author Artem Chivchalov
 * @license MIT License http://opensource.org/licenses/MIT
 */
/**
 * angular-route-segment 1.5.1
 * https://angular-route-segment.com
 * @author Artem Chivchalov
 * @license MIT License http://opensource.org/licenses/MIT
 */
!function(angular){var mod=angular.module("route-segment",[]);mod.provider("$routeSegment",["$routeProvider",function($routeProvider){var options=this.options={autoLoadTemplates:!0,strictMode:!1},segments=this.segments={},rootPointer=function pointer(segment,parent){if(!segment)throw new Error("Invalid pointer segment");var lastAddedName;return{segment:function(name,params){return segment[camelCase(name)]={name:name,params:params},lastAddedName=name,this},within:function(childName){var child;if(child=segment[camelCase(childName=childName||lastAddedName)])null==child.children&&(child.children={});else{if(options.strictMode)throw new Error("Cannot get into unknown `"+childName+"` segment");child=segment[camelCase(childName)]={params:{},children:{}}}return pointer(child.children,this)},up:function(){return parent},root:function(){return rootPointer}}}(segments,null),segmentRoutes={};function camelCase(name){return name.replace(/([\:\-\_]+(.))/g,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter})}this.when=function(path,name,route){return null==route&&(route={}),route.segment=name,$routeProvider.when(path,route),segmentRoutes[name]=path,this},angular.extend(this,rootPointer),this.$get=["$rootScope","$q","$http","$templateCache","$route","$routeParams","$injector",function($rootScope,$q,$http,$templateCache,$route,$routeParams,$injector){var $routeSegment={name:"",$routeParams:angular.copy($routeParams),chain:[],startsWith:function(val){return new RegExp("^"+val).test($routeSegment.name)},contains:function(val){for(var i=0;i<this.chain.length;i++)if(this.chain[i]&&this.chain[i].name==val)return!0;return!1},getSegmentUrl:function(segmentName,routeParams){var url,i,m;if(!segmentRoutes[segmentName])throw new Error("Can not get URL for segment with name `"+segmentName+"`");for(i in routeParams=angular.extend({},$routeParams,routeParams||{}),url=segmentRoutes[segmentName],routeParams){var regexp=new RegExp(":"+i+"[*?]?","g");url=url.replace(regexp,routeParams[i])}if(m=(url=url.replace(/\/\:.*?\?/g,"")).match(/\/\:([^\/]*)/))throw new Error("Route param `"+m[1]+"` is not specified for route `"+segmentRoutes[segmentName]+"`");return url}},resolvingSemaphoreChain={};function isDependenciesChanged(segment){var result=!1;return segment.params.dependencies&&angular.forEach(segment.params.dependencies,function(name){angular.equals($routeSegment.$routeParams[name],$routeParams[name])||(result=!0)}),result}function updateSegment(index,segment){return $routeSegment.chain[index]&&$routeSegment.chain[index].clearWatcher&&$routeSegment.chain[index].clearWatcher(),segment?(resolvingSemaphoreChain[index]=segment.name,segment.params.untilResolved?resolve(index,segment.name,segment.params.untilResolved).then(function(result){return null!=result.success&&broadcast(index),resolve(index,segment.name,segment.params)}):resolve(index,segment.name,segment.params)):(resolvingSemaphoreChain[index]=null,void broadcast(index))}function resolve(index,name,params){var locals=angular.extend({},params.resolve);return angular.forEach(locals,function(value,key){locals[key]=angular.isString(value)?$injector.get(value):$injector.invoke(value)}),params.template&&(locals.$template=params.template,angular.isFunction(locals.$template)&&(locals.$template=$injector.invoke(locals.$template))),options.autoLoadTemplates&&params.templateUrl&&(locals.$template=params.templateUrl,angular.isFunction(locals.$template)&&(locals.$template=$injector.invoke(locals.$template)),locals.$template=$http.get(locals.$template,{cache:$templateCache}).then(function(response){return response.data})),$q.all(locals).then(function(resolvedLocals){if(resolvingSemaphoreChain[index]!=name)return $q.reject();if($routeSegment.chain[index]={name:name,params:params,locals:resolvedLocals,reload:function(){var originalSegment=getSegmentInChain(index,$routeSegment.name.split("."));updateSegment(index,originalSegment).then(function(result){null!=result.success&&broadcast(index)})}},params.watcher){var getWatcherValue=function(){if(!angular.isFunction(params.watcher)&&!angular.isArray(params.watcher))throw new Error("Watcher is not a function in segment `"+name+"`");return $injector.invoke(params.watcher,{},{segment:$routeSegment.chain[index]})},lastWatcherValue=getWatcherValue();$routeSegment.chain[index].clearWatcher=$rootScope.$watch(getWatcherValue,function(value){value!=lastWatcherValue&&(lastWatcherValue=value,$routeSegment.chain[index].reload())})}return{success:index}},function(error){if(params.resolveFailed){var newResolve={error:function(){return $q.when(error)}};return resolve(index,name,angular.extend({resolve:newResolve},params.resolveFailed))}throw new Error("Resolving failed with a reason `"+error+"`, but no `resolveFailed` provided for segment `"+name+"`")})}function broadcast(index){$routeSegment.$routeParams=angular.copy($routeParams),$routeSegment.name="";for(var i=0;i<$routeSegment.chain.length;i++)$routeSegment.chain[i]&&($routeSegment.name+=$routeSegment.chain[i].name+".");$routeSegment.name=$routeSegment.name.substr(0,$routeSegment.name.length-1),$rootScope.$broadcast("routeSegmentChange",{index:index,segment:$routeSegment.chain[index]||null})}function getSegmentInChain(segmentIdx,segmentNameChain){if(!segmentNameChain)return null;if(segmentIdx>=segmentNameChain.length)return null;for(var nextName,curSegment=segments,i=0;i<=segmentIdx;i++)null!=curSegment[camelCase(nextName=segmentNameChain[i])]&&(curSegment=curSegment[camelCase(nextName)]),i<segmentIdx&&(curSegment=curSegment.children);return{name:nextName,params:curSegment.params,children:curSegment.children}}return $rootScope.$on("$routeChangeSuccess",function(event,args){var route=args.$route||args.$$route;if(route&&route.segment){for(var segmentNameChain=route.segment.split("."),updates=[],lastUpdateIndex=-1,i=0;i<segmentNameChain.length;i++){var newSegment=getSegmentInChain(i,segmentNameChain);(resolvingSemaphoreChain[i]!=newSegment.name||updates.length>0||isDependenciesChanged(newSegment))&&($routeSegment.chain[i]&&$routeSegment.chain[i].name==newSegment.name&&0==updates.length&&!isDependenciesChanged(newSegment)?resolvingSemaphoreChain[i]=newSegment.name:(updates.push({index:i,newSegment:newSegment}),lastUpdateIndex=i))}var curSegmentPromise=$q.when();if(updates.length>0)for(i=0;i<updates.length;i++)!function(i){curSegmentPromise=curSegmentPromise.then(function(){return updateSegment(updates[i].index,updates[i].newSegment)}).then(function(result){if(null!=result.success){broadcast(result.success);for(var j=updates[i].index+1;j<$routeSegment.chain.length;j++)$routeSegment.chain[j]&&($routeSegment.chain[j].clearWatcher&&$routeSegment.chain[j].clearWatcher(),$routeSegment.chain[j]=null,updateSegment(j,null))}})}(i);curSegmentPromise.then(function(){if($routeSegment.chain.length>segmentNameChain.length){var oldLength=$routeSegment.chain.length,shortenBy=$routeSegment.chain.length-segmentNameChain.length;$routeSegment.chain.splice(-shortenBy,shortenBy);for(var i=segmentNameChain.length;i<oldLength;i++)updateSegment(i,null),lastUpdateIndex=$routeSegment.chain.length-1}}).then(function(){var defaultChildUpdatePromise=$q.when();if(lastUpdateIndex==$routeSegment.chain.length-1)for(var curSegment=getSegmentInChain(lastUpdateIndex,$routeSegment.name.split("."));curSegment;){var children=curSegment.children,index=lastUpdateIndex+1;for(var i in curSegment=null,children)!function(i,children,index){children[i].params.default&&(defaultChildUpdatePromise=defaultChildUpdatePromise.then(function(){return updateSegment(index,{name:children[i].name,params:children[i].params}).then(function(result){result.success&&broadcast(result.success)})}),curSegment=children[i],lastUpdateIndex=index)}(i,children,index)}return defaultChildUpdatePromise})}}),$routeSegment}]}]),mod.filter("routeSegmentUrl",["$routeSegment",function($routeSegment){var filter=function(segmentName,params){return $routeSegment.getSegmentUrl(segmentName,params)};return filter.$stateful=!0,filter}]),mod.filter("routeSegmentEqualsTo",["$routeSegment",function($routeSegment){var filter=function(value){return $routeSegment.name==value};return filter.$stateful=!0,filter}]),mod.filter("routeSegmentStartsWith",["$routeSegment",function($routeSegment){var filter=function(value){return $routeSegment.startsWith(value)};return filter.$stateful=!0,filter}]),mod.filter("routeSegmentContains",["$routeSegment",function($routeSegment){var filter=function(value){return $routeSegment.contains(value)};return filter.$stateful=!0,filter}]),mod.filter("routeSegmentParam",["$routeSegment",function($routeSegment){var filter=function(value){return $routeSegment.$routeParams[value]};return filter.$stateful=!0,filter}])}(angular),function(angular){angular.module("view-segment",["route-segment"]).directive("appViewSegment",["$route","$compile","$controller","$routeParams","$routeSegment","$q","$injector","$timeout","$animate",function($route,$compile,$controller,$routeParams,$routeSegment,$q,$injector,$timeout,$animate){return{restrict:"ECA",priority:400,transclude:"element",compile:function(tElement,tAttrs){return function($scope,element,attrs,ctrl,$transclude){var currentScope,currentElement,updatePromise,previousLeaveAnimation,currentSegment={},onloadExp=tAttrs.onload||"",viewSegmentIndex=parseInt(tAttrs.appViewSegment);function update(segment){currentSegment=segment;var newScope=$scope.$new(),clone=$transclude(newScope,function(clone){segment&&clone.data("viewSegment",segment),$animate.enter(clone,null,currentElement||element),previousLeaveAnimation&&($animate.cancel(previousLeaveAnimation),previousLeaveAnimation=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&((previousLeaveAnimation=$animate.leave(currentElement))&&previousLeaveAnimation.then(function(){previousLeaveAnimation=null}),currentElement=null)});currentElement=clone,(currentScope=newScope).$emit("$viewContentLoaded"),currentScope.$eval(onloadExp)}$routeSegment.chain[viewSegmentIndex]?updatePromise=$timeout(function(){update($routeSegment.chain[viewSegmentIndex])},0):update(),$scope.$on("routeSegmentChange",function(event,args){updatePromise&&$timeout.cancel(updatePromise),args.index==viewSegmentIndex&&currentSegment!=args.segment&&update(args.segment)})}}}}]),angular.module("view-segment").directive("appViewSegment",["$route","$compile","$controller",function($route,$compile,$controller){return{restrict:"ECA",priority:-400,link:function($scope,element){var segment=element.data("viewSegment")||{},locals=angular.extend({},segment.locals),template=locals&&locals.$template;template&&element.html(template);var link=$compile(element.contents());if(segment.params&&segment.params.controller){locals.$scope=$scope;var controller=$controller(segment.params.controller,locals);segment.params.controllerAs&&($scope[segment.params.controllerAs]=controller),element.data("$ngControllerController",controller),element.children().data("$ngControllerController",controller)}link($scope)}}}])}(angular)},16:function(module,exports,__webpack_require__){"use strict";angular.module("ui.jq",[]).value("uiJqConfig",{}).directive("uiJq",["uiJqConfig","$timeout",function(uiJqConfig,$timeout){return{restrict:"A",compile:function(tElm,tAttrs){if(!angular.isFunction(tElm[tAttrs.uiJq]))throw new Error('ui-jq: The "'+tAttrs.uiJq+'" function does not exist');var options=uiJqConfig&&uiJqConfig[tAttrs.uiJq];return function(scope,elm,attrs){var linkOptions=[];function callPlugin(){$timeout(function(){elm[attrs.uiJq].apply(elm,linkOptions)},0,!1)}attrs.uiOptions?(linkOptions=scope.$eval("["+attrs.uiOptions+"]"),angular.isObject(options)&&angular.isObject(linkOptions[0])&&(linkOptions[0]=angular.extend({},options,linkOptions[0]))):options&&(linkOptions=[options]),attrs.ngModel&&elm.is("select,input,textarea")&&elm.bind("change",function(){elm.trigger("input")}),attrs.uiRefresh&&scope.$watch(attrs.uiRefresh,function(){callPlugin()}),callPlugin()}}}}])},17:function(module,exports,__webpack_require__){"use strict";angular.module("ui.event",[]).directive("uiEvent",["$parse",function($parse){return function($scope,elm,attrs){var events=$scope.$eval(attrs.uiEvent);angular.forEach(events,function(uiEvent,eventName){var fn=$parse(uiEvent);elm.bind(eventName,function(evt){var params=Array.prototype.slice.call(arguments);params=params.splice(1),fn($scope,{$event:evt,$params:params}),$scope.$$phase||$scope.$apply()})})}}])},18:function(module,exports,__webpack_require__){"use strict";angular.module("ui.validate",[]).directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(scope,elm,attrs,ctrl){var validateFn,watch,validators={},validateExpr=scope.$eval(attrs.uiValidate);validateExpr&&(angular.isString(validateExpr)&&(validateExpr={validator:validateExpr}),angular.forEach(validateExpr,function(exprssn,key){validateFn=function(valueToValidate){var expression=scope.$eval(exprssn,{$value:valueToValidate});return angular.isObject(expression)&&angular.isFunction(expression.then)?(expression.then(function(){ctrl.$setValidity(key,!0)},function(){ctrl.$setValidity(key,!1)}),valueToValidate):expression?(ctrl.$setValidity(key,!0),valueToValidate):(ctrl.$setValidity(key,!1),valueToValidate)},validators[key]=validateFn,ctrl.$formatters.push(validateFn),ctrl.$parsers.push(validateFn)}),attrs.uiValidateWatch&&(watch=scope.$eval(attrs.uiValidateWatch),angular.isString(watch)?scope.$watch(watch,function(){angular.forEach(validators,function(validatorFn){validatorFn(ctrl.$modelValue)})}):angular.isArray(watch)?angular.forEach(watch,function(expression){scope.$watch(expression,function(){angular.forEach(validators,function(validatorFn){validatorFn(ctrl.$modelValue)})})}):angular.isObject(watch)&&angular.forEach(watch,function(expression,validatorKey){angular.isString(expression)&&scope.$watch(expression,function(){validators[validatorKey](ctrl.$modelValue)}),angular.isArray(expression)&&angular.forEach(expression,function(intExpression){scope.$watch(intExpression,function(){validators[validatorKey](ctrl.$modelValue)})})})))}}})},182:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(29)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=(ngModule=>{function DeviceViewTypes(){}DeviceViewTypes.prototype={_viewOptions:{fortiClientMonitor:[{value:"fortigate",label:"By FortiGate",allFortigate:!0,fortigate:!1},{value:"interface",label:"By Interface",allFortigate:!1,fortigate:!0},{value:"status",label:"By Online Status",allFortigate:!0,fortigate:!0}],deviceInventory:[{value:"hardware_vendor",label:"Hardware Vendor",allFortigate:!0,fortigate:!0},{value:"os_name",label:"Software OS",allFortigate:!0,fortigate:!0}]},validOptionForConfig:function(listType,viewType,fortigate){const options=this._viewOptions[listType],key="all"===fortigate.q_origin_key?"allFortigate":"fortigate";return options&&options.some(option=>option.value===viewType&&option[key])},getValidViewOption:function(listType,fortigate){const options=this._viewOptions[listType],key="all"===fortigate.q_origin_key?"allFortigate":"fortigate";return options&&options.find(option=>option[key])},getOptions:function(listType,fortigate){const key="all"===fortigate.q_origin_key?"allFortigate":"fortigate";return this._viewOptions[listType].filter(option=>option[key])}},ngModule.service("deviceViewTypes",DeviceViewTypes)}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},187:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(9)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(angular){var PLATFORM_URL="/api/v2/monitor/wifi/ap_platforms",CHANNELS_URL="/api/v2/monitor/wifi/ap_channels",AP_STATUS_URL="/api/v2/monitor/wifi/managed_ap",AP_RESTART_URL="/api/v2/monitor/wifi/managed_ap/restart",WIFI_META_URL="/api/v2/monitor/wifi/meta",AP_LED_BLINK_URL="/api/v2/monitor/wifi/managed_ap/led-blink";function WifiResources($resource){var _objectParams={get:{method:"GET",cache:!0,transformResponse:transformResourceData.bind(this)}},_arrayParamsNoCache=angular.merge({},_objectParams,{get:{isArray:!0,cache:!1}}),_postParams={post:{method:"POST",transformResponse:transformResourceData.bind(this)}};function transformResourceData(data){var result;try{result=angular.fromJson(data).results}catch(e){result={}}return result}this._platformInfoResource=$resource(PLATFORM_URL,{},_objectParams),this._platformListResource=this._platformInfoResource.get(),this._channelListResource=$resource(CHANNELS_URL,{},_objectParams),this._apStatusResource=$resource(AP_STATUS_URL,{},_arrayParamsNoCache),this._apStatusListResource=this._apStatusResource.get(),this._apRestartResource=$resource(AP_RESTART_URL,{},_postParams),this._metaResource=$resource(WIFI_META_URL,{},_objectParams).get(),this._apLedBlinkResource=$resource(AP_LED_BLINK_URL,{},_postParams)}return WifiResources.prototype={getPlatformInfo:function(platformType){var params={platform_type:platformType};return this._platformInfoResource.get(params)},getPlatformList:function(){return this._platformListResource},getChannelList:function(platformType,country){var params={platform_type:platformType,country:country};return this._channelListResource.get(params)},getApStatus:function(wtpID,includeLocal){var params={wtp_id:wtpID,incl_local:includeLocal};return this._apStatusResource.get(params)},getApStatusList:function(){return this._apStatusListResource},postApRestart:function(wtpName){var params={wtpname:wtpName};return this._apRestartResource.post(params)},wifiMeta:function(){return this._metaResource},postApLedBlink:function(serials,blink,duration){var params={serials:serials,blink:blink,duration:0};return blink&&duration&&(params.duration=duration),this._apLedBlinkResource.post(params)}},function(providers){providers.$provide.service("wifiResources",WifiResources)}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},19:function(module,exports,__webpack_require__){"use strict";angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/}}).directive("uiMask",["uiMaskConfig","$parse",function(maskConfig,$parse){return{priority:100,require:"ngModel",restrict:"A",compile:function(){var options=maskConfig;return function(scope,iElement,iAttrs,controller){var maskCaretMap,maskPatterns,maskPlaceholder,maskComponents,minRequiredLength,value,valueMasked,isValid,oldValue,oldValueUnmasked,oldCaretPosition,oldSelectionLength,maskProcessed=!1,eventsBound=!1,originalPlaceholder=iAttrs.placeholder,originalMaxlength=iAttrs.maxlength;var linkOptions={};iAttrs.uiOptions?(linkOptions=scope.$eval("["+iAttrs.uiOptions+"]"),angular.isObject(linkOptions[0])&&(linkOptions=function(original,current){for(var i in original)Object.prototype.hasOwnProperty.call(original,i)&&(current[i]?angular.extend(current[i],original[i]):current[i]=angular.copy(original[i]));return current}(options,linkOptions[0]))):linkOptions=options,iAttrs.$observe("uiMask",function(maskAttr){return angular.isDefined(maskAttr)?(function(mask){var characterCount=0;if(maskCaretMap=[],maskPatterns=[],maskPlaceholder="","string"==typeof mask){minRequiredLength=0;var isOptional=!1,splitMask=mask.split("");angular.forEach(splitMask,function(chr,i){linkOptions.maskDefinitions[chr]?(maskCaretMap.push(characterCount),maskPlaceholder+=function(i){var placeholder=iAttrs.placeholder;return void 0!==placeholder&&placeholder[i]?placeholder[i]:"_"}(i),maskPatterns.push(linkOptions.maskDefinitions[chr]),characterCount++,isOptional||minRequiredLength++):"?"===chr?isOptional=!0:(maskPlaceholder+=chr,characterCount++)})}maskCaretMap.push(maskCaretMap.slice().pop()+1),maskComponents=maskPlaceholder.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_"),maskProcessed=maskCaretMap.length>1}(maskAttr),maskProcessed?(function(){value=oldValueUnmasked=unmaskValue(controller.$modelValue||""),valueMasked=oldValue=maskValue(value);var viewValue=(isValid=validateValue(value))&&value.length?valueMasked:"";iAttrs.maxlength&&iElement.attr("maxlength",2*maskCaretMap[maskCaretMap.length-1]),iElement.attr("placeholder",maskPlaceholder),iElement.val(viewValue),controller.$viewValue=viewValue}(),eventsBound||(iElement.bind("blur",blurHandler),iElement.bind("mousedown mouseup",mouseDownUpHandler),iElement.bind("input keyup click focus",eventHandler),eventsBound=!0),!0):uninitialize()):uninitialize()}),iAttrs.$observe("placeholder",function(placeholderAttr){angular.isDefined(placeholderAttr)&&(maskPlaceholder=placeholderAttr,maskProcessed&&eventHandler())});var modelViewValue=!1;function uninitialize(){return maskProcessed=!1,function(){if(!eventsBound)return;iElement.unbind("blur",blurHandler),iElement.unbind("mousedown",mouseDownUpHandler),iElement.unbind("mouseup",mouseDownUpHandler),iElement.unbind("input",eventHandler),iElement.unbind("keyup",eventHandler),iElement.unbind("click",eventHandler),iElement.unbind("focus",eventHandler),eventsBound=!1}(),angular.isDefined(originalPlaceholder)?iElement.attr("placeholder",originalPlaceholder):iElement.removeAttr("placeholder"),angular.isDefined(originalMaxlength)?iElement.attr("maxlength",originalMaxlength):iElement.removeAttr("maxlength"),iElement.val(controller.$modelValue),controller.$viewValue=controller.$modelValue,!1}function validateValue(value){return!value.length||value.length>=minRequiredLength}function unmaskValue(value){var valueUnmasked="",maskPatternsCopy=maskPatterns.slice();return value=value.toString(),angular.forEach(maskComponents,function(component){value=value.replace(component,"")}),angular.forEach(value.split(""),function(chr){maskPatternsCopy.length&&maskPatternsCopy[0].test(chr)&&(valueUnmasked+=chr,maskPatternsCopy.shift())}),valueUnmasked}function maskValue(unmaskedValue){var valueMasked="",maskCaretMapCopy=maskCaretMap.slice();return angular.forEach(maskPlaceholder.split(""),function(chr,i){unmaskedValue.length&&i===maskCaretMapCopy[0]?(valueMasked+=unmaskedValue.charAt(0)||"_",unmaskedValue=unmaskedValue.substr(1),maskCaretMapCopy.shift()):valueMasked+=chr}),valueMasked}function blurHandler(){oldCaretPosition=0,oldSelectionLength=0,isValid&&0!==value.length||(valueMasked="",iElement.val(""),scope.$apply(function(){controller.$setViewValue("")}))}function mouseDownUpHandler(e){"mousedown"===e.type?iElement.bind("mouseout",mouseoutHandler):iElement.unbind("mouseout",mouseoutHandler)}function mouseoutHandler(){oldSelectionLength=getSelectionLength(this),iElement.unbind("mouseout",mouseoutHandler)}function eventHandler(e){var eventWhich=(e=e||{}).which,eventType=e.type;if(16!==eventWhich&&91!==eventWhich){var valMasked,val=iElement.val(),valOld=oldValue,valUnmasked=unmaskValue(val),valUnmaskedOld=oldValueUnmasked,valAltered=!1,caretPos=function(input){if(!input)return 0;if(void 0!==input.selectionStart)return input.selectionStart;if(document.selection){input.focus();var selection=document.selection.createRange();return selection.moveStart("character",input.value?-input.value.length:0),selection.text.length}return 0}(this)||0,caretPosOld=oldCaretPosition||0,caretPosDelta=caretPos-caretPosOld,caretPosMin=maskCaretMap[0],caretPosMax=maskCaretMap[valUnmasked.length]||maskCaretMap.slice().shift(),selectionLenOld=oldSelectionLength||0,isSelected=getSelectionLength(this)>0,wasSelected=selectionLenOld>0,isAddition=val.length>valOld.length||selectionLenOld&&val.length>valOld.length-selectionLenOld,isDeletion=val.length<valOld.length||selectionLenOld&&val.length===valOld.length-selectionLenOld,isSelection=eventWhich>=37&&eventWhich<=40&&e.shiftKey,isKeyBackspace=8===eventWhich||"keyup"!==eventType&&isDeletion&&-1===caretPosDelta,isKeyDelete=46===eventWhich||"keyup"!==eventType&&isDeletion&&0===caretPosDelta&&!wasSelected,caretBumpBack=(37===eventWhich||isKeyBackspace||"click"===eventType)&&caretPos>caretPosMin;if(oldSelectionLength=getSelectionLength(this),!isSelection&&(!isSelected||"click"!==eventType&&"keyup"!==eventType)){if("input"===eventType&&isDeletion&&!wasSelected&&valUnmasked===valUnmaskedOld){for(;isKeyBackspace&&caretPos>caretPosMin&&!isValidCaretPosition(caretPos);)caretPos--;for(;isKeyDelete&&caretPos<caretPosMax&&-1===maskCaretMap.indexOf(caretPos);)caretPos++;var charIndex=maskCaretMap.indexOf(caretPos);valUnmasked=valUnmasked.substring(0,charIndex)+valUnmasked.substring(charIndex+1),valAltered=!0}for(valMasked=maskValue(valUnmasked),oldValue=valMasked,oldValueUnmasked=valUnmasked,iElement.val(valMasked),valAltered&&scope.$apply(function(){controller.$setViewValue(valUnmasked)}),isAddition&&caretPos<=caretPosMin&&(caretPos=caretPosMin+1),caretBumpBack&&caretPos--,caretPos=caretPos>caretPosMax?caretPosMax:caretPos<caretPosMin?caretPosMin:caretPos;!isValidCaretPosition(caretPos)&&caretPos>caretPosMin&&caretPos<caretPosMax;)caretPos+=caretBumpBack?-1:1;(caretBumpBack&&caretPos<caretPosMax||isAddition&&!isValidCaretPosition(caretPosOld))&&caretPos++,oldCaretPosition=caretPos,function(input,pos){if(!input)return 0;if(0===input.offsetWidth||0===input.offsetHeight)return;if(input.setSelectionRange)input.focus(),input.setSelectionRange(pos,pos);else if(input.createTextRange){var range=input.createTextRange();range.collapse(!0),range.moveEnd("character",pos),range.moveStart("character",pos),range.select()}}(this,caretPos)}}}function isValidCaretPosition(pos){return maskCaretMap.indexOf(pos)>-1}function getSelectionLength(input){return input?void 0!==input.selectionStart?input.selectionEnd-input.selectionStart:document.selection?document.selection.createRange().text.length:0:0}iAttrs.$observe("modelViewValue",function(val){"true"===val&&(modelViewValue=!0)}),scope.$watch(iAttrs.ngModel,function(val){modelViewValue&&val&&$parse(iAttrs.ngModel).assign(scope,controller.$viewValue)}),controller.$formatters.push(function(fromModelValue){return maskProcessed?(value=unmaskValue(fromModelValue||""),isValid=validateValue(value),controller.$setValidity("mask",isValid),isValid&&value.length?maskValue(value):void 0):fromModelValue}),controller.$parsers.push(function(fromViewValue){return maskProcessed?(value=unmaskValue(fromViewValue||""),isValid=validateValue(value),controller.$viewValue=value.length?maskValue(value):"",controller.$setValidity("mask",isValid),""===value&&iAttrs.required&&controller.$setValidity("required",!1),isValid?value:void 0):fromViewValue}),iElement.bind("mousedown mouseup",mouseDownUpHandler),Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement){if(null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if(0===len)return-1;var n=0;if(arguments.length>1&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=len)return-1;for(var k=n>=0?n:Math.max(len-Math.abs(n),0);k<len;k++)if(k in t&&t[k]===searchElement)return k;return-1})}}}}])},20:function(module,exports){angular.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(uiSortableConfig,$timeout,$log){return{require:"?ngModel",scope:{ngModel:"=",uiSortable:"="},link:function(scope,element,attrs,ngModel){var savedNodes;function combineCallbacks(first,second){return second&&"function"==typeof second?function(){first.apply(this,arguments),second.apply(this,arguments)}:first}function getSortableWidgetInstance(element){var data=element.data("ui-sortable");return data&&"object"==typeof data&&"ui-sortable"===data.widgetFullName?data:null}function hasSortingHelper(element,ui){var helperOption=element.sortable("option","helper");return"clone"===helperOption||"function"==typeof helperOption&&ui.item.sortable.isCustomHelperUsed()}function afterStop(e,ui){ui.item.sortable._destroy()}var opts={},directiveOpts={"ui-floating":void 0},callbacks={receive:null,remove:null,start:null,stop:null,update:null},wrappers={helper:null};angular.extend(opts,directiveOpts,uiSortableConfig,scope.uiSortable),angular.element.fn&&angular.element.fn.jquery?(ngModel?(scope.$watch("ngModel.length",function(){$timeout(function(){getSortableWidgetInstance(element)&&element.sortable("refresh")},0,!1)}),callbacks.start=function(e,ui){if("auto"===opts["ui-floating"]){var siblings=ui.item.siblings();getSortableWidgetInstance(angular.element(e.target)).floating=/left|right/.test((item=siblings).css("float"))||/inline|table-cell/.test(item.css("display"))}var item;ui.item.sortable={model:ngModel.$modelValue[ui.item.index()],index:ui.item.index(),source:ui.item.parent(),sourceModel:ngModel.$modelValue,cancel:function(){ui.item.sortable._isCanceled=!0},isCanceled:function(){return ui.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!ui.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:ui.item.sortable._isCustomHelperUsed,_destroy:function(){angular.forEach(ui.item.sortable,function(value,key){ui.item.sortable[key]=void 0})}}},callbacks.activate=function(e,ui){savedNodes=element.contents();var placeholder=element.sortable("option","placeholder");if(placeholder&&placeholder.element&&"function"==typeof placeholder.element){var phElement=placeholder.element();phElement=angular.element(phElement);var excludes=element.find('[class="'+phElement.attr("class")+'"]:not([ng-repeat], [data-ng-repeat])');savedNodes=savedNodes.not(excludes)}var connectedSortables=ui.item.sortable._connectedSortables||[];connectedSortables.push({element:element,scope:scope}),ui.item.sortable._connectedSortables=connectedSortables},callbacks.update=function(e,ui){if(!ui.item.sortable.received){ui.item.sortable.dropindex=ui.item.index();var droptarget=ui.item.parent();ui.item.sortable.droptarget=droptarget;var droptargetScope=function(elementScopes,element){for(var result=null,i=0;i<elementScopes.length;i++){var x=elementScopes[i];if(x.element[0]===element[0]){result=x.scope;break}}return result}(ui.item.sortable._connectedSortables,droptarget);ui.item.sortable.droptargetModel=droptargetScope.ngModel,element.sortable("cancel")}hasSortingHelper(element,ui)&&!ui.item.sortable.received&&"parent"===element.sortable("option","appendTo")&&(savedNodes=savedNodes.not(savedNodes.last())),savedNodes.appendTo(element),ui.item.sortable.received&&(savedNodes=null),ui.item.sortable.received&&!ui.item.sortable.isCanceled()&&scope.$apply(function(){ngModel.$modelValue.splice(ui.item.sortable.dropindex,0,ui.item.sortable.moved)})},callbacks.stop=function(e,ui){!ui.item.sortable.received&&"dropindex"in ui.item.sortable&&!ui.item.sortable.isCanceled()?scope.$apply(function(){ngModel.$modelValue.splice(ui.item.sortable.dropindex,0,ngModel.$modelValue.splice(ui.item.sortable.index,1)[0])}):"dropindex"in ui.item.sortable&&!ui.item.sortable.isCanceled()||hasSortingHelper(element,ui)||savedNodes.appendTo(element),savedNodes=null},callbacks.receive=function(e,ui){ui.item.sortable.received=!0},callbacks.remove=function(e,ui){"dropindex"in ui.item.sortable||(element.sortable("cancel"),ui.item.sortable.cancel()),ui.item.sortable.isCanceled()||scope.$apply(function(){ui.item.sortable.moved=ngModel.$modelValue.splice(ui.item.sortable.index,1)[0]})},wrappers.helper=function(inner){return inner&&"function"==typeof inner?function(e,item){var innerResult=inner.apply(this,arguments);return item.sortable._isCustomHelperUsed=item!==innerResult,innerResult}:inner},scope.$watch("uiSortable",function(newVal){var sortableWidgetInstance=getSortableWidgetInstance(element);sortableWidgetInstance&&angular.forEach(newVal,function(value,key){if(key in directiveOpts)return"ui-floating"!==key||!1!==value&&!0!==value||(sortableWidgetInstance.floating=value),void(opts[key]=value);callbacks[key]?("stop"===key&&(value=combineCallbacks(value,function(){scope.$apply()}),value=combineCallbacks(value,afterStop)),value=combineCallbacks(callbacks[key],value)):wrappers[key]&&(value=wrappers[key](value)),opts[key]=value,element.sortable("option",key,value)})},!0),angular.forEach(callbacks,function(value,key){opts[key]=combineCallbacks(value,opts[key]),"stop"===key&&(opts[key]=combineCallbacks(opts[key],afterStop))})):$log.info("ui.sortable: ngModel not provided!",element),element.sortable(opts)):$log.error("ui.sortable: jQuery should be included before AngularJS!")}}}])},22:function(module,exports){
/**
 * @license Kasper Lewau
 * (c) 2015 Kasper Lewau https://github.com/kasperlewau
 * License: MIT
 */
!function(){"use strict";function setupNotifier(scope,notifierMap){Object.keys(notifierMap).forEach(function(k){scope.$watch(notifierMap[k],function(notifierKey,newValue,oldValue){newValue!==oldValue&&scope.$broadcast("$$rebind::"+notifierKey)}.bind(null,k),"object"==typeof scope[notifierMap[k]])})}function dynamicWatcher(expr,notifierKeys){if(expr.$$watchDelegate.wrapped)return expr.$$watchDelegate;var delegate=function(watchDelegate,scope,listener,objectEquality,parsedExpression){var delegateCall=watchDelegate.bind(this,scope,listener,objectEquality,parsedExpression);return function(scope,cb){notifierKeys.forEach(function(nk){scope.$on("$$rebind::"+nk,cb)})}(scope,delegateCall),delegateCall()}.bind(this,expr.$$watchDelegate);return delegate.wrapped=!0,delegate}function ParseDecorator($provide){function $parseDecorator($delegate,bindNotifierRegex,bindNotifierKeyRegex){return function(parse,exp,interceptor){var parts,part,expression,rawExpression,notifiers;if("string"!=typeof exp||!bindNotifierRegex.test(exp))return parse.call(this,exp,interceptor);for(parts=exp.split(":"),notifiers=[];parts.length;)if((part=parts.shift())&&part.trim()){if(!bindNotifierKeyRegex.test(part)){rawExpression=[part].concat(parts).join(":");break}notifiers.push(part)}return rawExpression||(rawExpression=notifiers.splice(-1,1)[0]),(expression=parse.call(this,"::"+rawExpression,interceptor)).$$watchDelegate=dynamicWatcher(expression,notifiers),expression}.bind(null,$delegate)}$parseDecorator.$inject=["$delegate","bindNotifierRegex","bindNotifierKeyRegex"],$provide.decorator("$parse",$parseDecorator)}ParseDecorator.$inject=["$provide"],angular.module("angular.bind.notifier",[]).constant("bindNotifierKeyRegex",/^[a-zA-Z0-9][\w-]*$/).constant("bindNotifierRegex",/^[\s]*:([a-zA-Z0-9][\w-]*):(.+\n?)+$/).factory("$Notifier",function(){return function(scope,notifierMap){if(!scope)throw new Error("No $scope given");if(!notifierMap)throw new Error("No notifier object given");setupNotifier(scope,notifierMap)}}).directive("bindNotifier",function(){return{restrict:"A",scope:!0,compile:function(element,attrs){var notifierMap={};return attrs.bindNotifier.replace(/[\{\}\s]/g,"").split(",").forEach(function(kv){var split=kv.split(":");notifierMap[split[0]]=split[1]}),function(scope){setupNotifier(scope,notifierMap)}}}}).config(ParseDecorator)}()},248:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26),__webpack_require__(8),__webpack_require__(32)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(inject,ftnt_shared,fFormatters){const RISK_LEVELS=["info","low","medium","high","critical"];class AppSignatureUtils extends inject.Collectable{constructor(){super()}getMuTableSettings($INJECTABLE$,lang){return({fortigate:fortigate,categoryNoTooltip:categoryNoTooltip,showParentChildRows:showParentChildRows}={})=>{const splitList=(entry,column)=>{const item=entry&&entry[column.id];return item&&item.split(/,\s*/)},getProxySourceID=datasource=>(fortigate&&fortigate.getOmniselectProxySourceID(datasource),datasource);return{defaultColumns:["name","category","technology","popularity","risk"],defaultSectionColumn:"type",userDefinedSections:!1,columns:[{id:"parentApp",fixed:!0,hidden:!showParentChildRows},{id:"name",type:"omniselect",cellValueFunction:entry=>({q_origin_key:entry.id,datasource:"custom"===entry.q_name?getProxySourceID("application.custom"):getProxySourceID("application.name"),name:entry.name}),omniselectAllowFallback:!0,collectionEntryValueFunction:entry=>entry.name},categoryNoTooltip?{id:"category",cellValueFunction:entry=>entry.categoryName||entry.category_name||"Other"}:{id:"category",type:"omniselect",cellValueFunction:entry=>({q_origin_key:entry.category,datasource:getProxySourceID("application.category")}),omniselectAllowFallback:!0,collectionEntryValueFunction:()=>lang("unknown")},{id:"technology",type:"collection",cellValueFunction:splitList},{id:"popularity",cellValueFunction:entry=>entry.popularity,cellFormatter:(entry,column,value)=>fFormatters.popularity_rating_elem(value)},{id:"risk",cellValueFunction:entry=>{const riskLevel=RISK_LEVELS[entry.risk-1];if(riskLevel)return lang(`severity_${riskLevel}`)},cellFormatter:entry=>{const riskLevel=RISK_LEVELS[entry.risk-1];if(void 0!==riskLevel)return fFormatters.severity_bar_elem(riskLevel)},sortComparator:(valueA,valueB,entryA,entryB)=>entryA.risk-entryB.risk},{id:"behavior",type:"collection",cellValueFunction:splitList},{id:"language",langKey:"Language"},{id:"protocol",type:"collection",cellValueFunction:splitList},{id:"vendor"},{id:"weight",type:"number"},{id:"type",langKey:"Type",cellValueFunction:entry=>"custom"===entry.q_name?lang("Custom Application Signature"):lang("Application Signature"),sortComparator:(valueA,valueB,entryA,entryB)=>entryA.q_name===entryB.q_name?0:"custom"===entryA.q_name?-1:1},{id:"id"},"comment","csfAwareCmdbReferences"],parentChildRows:showParentChildRows,rowHierarchyIDFunction:entry=>entry.name,parentRowHierarchyIDFunction:entry=>{if(entry.parentApp)return entry.parentApp}}}}}return providers=>{providers.$provide.service("appSignatureUtils",AppSignatureUtils)}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},249:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(9),__webpack_require__(66),__webpack_require__(88)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(angular,ips_common){function ApplicationData(lang,CMDB,$q){var _addMaps=function(lang,result){var unknown={id:0,name:lang("unknown")};return result.$map={id:{0:unknown},name:{}},result.$map.name[unknown.name]=unknown,result.reduce(mapAttrs,result.$map),result}.bind(null,lang),_enhanceApplications=function(ips_common,results){var apps=results[0],categories=results[1].$map.id,metadataResource=results[2],customResource=results[3];customResource&&customResource.forEach(function(app){apps.push(app)});var app,i=0,metadata_map=metadataResource?metadataResource.$map:void 0,len=apps.length;for(i=len-1;i>=0;i--){app=apps[i],metadata_map&&ips_common.add_metadata_attrs(app,metadata_map);var attrMapID=ips_common.ips_get_attr_map_id(ips_common.IPS_ATTR_APP_CAT,app.category),cat=categories[attrMapID];cat&&(app.category_name=cat.name)}return apps}.bind(null,ips_common);this.getApplications=function(loadMetaColumn,loadCustomApp){loadMetaColumn=!!loadMetaColumn,loadCustomApp=!!loadCustomApp;var _applications=new CMDB("application","name").fetch();_applications.categories=new CMDB("ips","attr-map").fetch();var overallPromise=[_applications.$promise.then(_addMaps),_applications.categories.$promise.then(_addMaps)];if(loadMetaColumn){_applications.metadata=new CMDB("ips","metadata-map").fetch();var metadataDone=_applications.metadata.$promise.then(addMetadataMaps);overallPromise.push(metadataDone)}if(loadCustomApp){_applications.custom=new CMDB("application","custom").fetch();var customDone=_applications.custom.$promise.then(enhanceCustomApp);overallPromise.push(customDone)}return _applications.$promise=$q.all(overallPromise).then(_enhanceApplications),_applications}}function mapAttrs(result,obj){for(var attr in result)result[attr][obj[attr]]=obj;return result}function addMetadataMaps(result){return result.$map=ips_common.build_metadata_map(result),result}function enhanceCustomApp(result){return result.map(function(resource){resource.app_type="custom",resource.orig_name=resource.name,resource.name=resource.tag}),result}return function(providers){providers.$provide.service("applicationData",ApplicationData)}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},418:function(module,exports){var path="/migadmin/ng/templates/base_dialog.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<f-dialog dialog-title="$root.page_title | lang"\n        loading="loading"\n        hide-footer="$root.hide_footer_button"\n        footer-type="$root.dialogFooterType"\n        read-only="$root.ADMIN_RO"\n        submit="submit()" form="form">\n    <div ng-include="LEGACY_DIALOG_TEMPLATE"></div>\n</f-dialog>\n')}]),module.exports=path},419:function(module,exports){var path="/migadmin/ng/templates/base_dialog_with_gutter.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<f-dialog dialog-title="$root.page_title | lang"\n        loading="loading"\n        hide-footer="$root.hide_footer_button"\n        footer-type="$root.dialogFooterType"\n        read-only="$root.ADMIN_RO"\n        submit="submit()" form="form">\n    <dialog-content ng-include="LEGACY_DIALOG_CONTENT_TEMPLATE"></dialog-content>\n    <dialog-gutter ng-include="LEGACY_DIALOG_GUTTER_TEMPLATE"></dialog-gutter>\n</f-dialog>\n')}]),module.exports=path},420:function(module,exports){var path="/migadmin/ng/templates/base.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<div ng-cloak f-scrolling id="ng-base">\n    <div class="content" ng-include="dialog_template"></div>\n</div>\n')}]),module.exports=path},448:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(9),__webpack_require__(26),__webpack_require__(27),__webpack_require__(42)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(angular,inject,Notify,location){class DeviceUtils extends inject.Collectable{constructor(){super()}createAddress($INJECTABLE$,$httpParamSerializer,lang,structure){return info=>{let params={name:info.name};"ipv4"===info.type?(params.addr_cat="addr",params.addr=`${info.addr}/32`,params.intf=info.intf):"ipv6"===info.type?(params.addr_cat="addr_ipv6",params.addr=`${info.addr}/128`):"mac"===info.type&&(params.addr_cat="addr",params.mac=info.addr,params.intf=info.intf);const uri=`/ng/firewall/address/edit?${$httpParamSerializer(params)}`;return structure.openRouteAsSlide(uri).then(()=>{Notify.post(lang("Address created."),Notify.LEVEL.SUCCESS)})}}showMatchingLogs($INJECTABLE$,$location,ApiFilter,state){return(ip,interfaceVdom)=>{let filter=new ApiFilter("srcip",ip);const vdom=interfaceVdom||state.current_vdom;$location.url("/log/view/traffic/forward"),$location.search({filter:filter.toString(),vdom:vdom})}}showInFortiView($INJECTABLE$,$location,state){return(addr,interfaceRole,selectedFortigate,interfaceVdom)=>{const vdom=interfaceVdom||state.current_vdom;location.drilldownFortiviewSource({sourceAddress:addr,sourceInterfaceRole:interfaceRole,fortigate:selectedFortigate,returnPath:$location.url(),vdom:vdom})}}}return function(providers){providers.$provide.service("deviceUtils",DeviceUtils)}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},456:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26),__webpack_require__(8),__webpack_require__(36)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(inject,ftnt_shared,fwebSelect){function WifiClientMonitor($scope,$routeParams,injector,csfTopology){injector.injectMarked(this,{$scope:$scope});const filters=$routeParams.filter?JSON.parse($routeParams.filter):[];this.filters=[].concat.apply([],[filters]).reduce((accumulator,current)=>(current.id&&(accumulator[current.id]=[].concat.apply([],[current.value])),accumulator),{}),this.muTable={},$scope.$on(ftnt_shared.Omniselect.NOTIFY_SOURCE_CHANGED_MESSAGE,(event,sourceID)=>{if(sourceID.includes("firewall.address")){const{path:path}=this.fortigate||csfTopology.selectedFortigate,deviceDatasource=fwebSelect.getCSFProxySourceID("devices",path);ftnt_shared.Omniselect.invalidateCacheForSource(deviceDatasource),this.reloadSource()}}),$scope.$on("QUARANTINE_EVENTS",()=>{this.reloadSource()})}WifiClientMonitor.prototype.$onInit=inject.mark(function($scope,csfTopology){return async function(){await csfTopology.buildIfNecessary(),this.fortigate=csfTopology.selectedFortigate,this.initChartSettings(),$scope.$watch(()=>csfTopology.selectedFortigate,fortigate=>{this.fortigate=fortigate,this.reloadSource()})}}),WifiClientMonitor.prototype.loadExtraData=inject.mark(function($q,wifiClientViewService){return async function(){const[wifiData,langMap]=await $q.all([wifiClientViewService.getExtraData(this.fortigate),wifiClientViewService.getWifiMetaLangs(this.fortigate)]);this.managedAPs=wifiData.managedAPs,this.ssids=wifiData.ssids,this.SECURITY_LANG=langMap.SECURITY_LANG,this.SECURITY_TYPES=langMap.SECURITY_TYPES,this.ENCRYPT_LANG=langMap.ENCRYPT_LANG}}),WifiClientMonitor.prototype.showDetails=inject.mark(function(slide,$rootScope){return entry=>{if(entry){const slideScope=Object.assign($rootScope.$new(!0),{entry:entry});slide.open({template:'<f-wifi-client-details client="entry"></f-wifi-client-details>',parentScope:slideScope,options:{fullHeight:!0,width:1100}}).finally(()=>{slideScope.$destroy()})}}}),WifiClientMonitor.prototype.reloadSource=inject.mark(function(wifiClientViewService){return async function(){const options={ap:this.ap,sourceFilterFn:this.sourceFilterFn,fortigate:this.fortigate};await this.loadExtraData(),Object.assign(this.muTable,{settings:this.getMutableSettings(),source:wifiClientViewService.getSource(options)})}}),WifiClientMonitor.prototype.getMutableSettings=inject.mark(function(wifiClientViewService){return function(){const params={fortigate:this.fortigate,managedAPs:this.managedAPs,ssids:this.ssids,filters:this.filters,SECURITY_LANG:this.SECURITY_LANG,SECURITY_TYPES:this.SECURITY_TYPES,ENCRYPT_LANG:this.ENCRYPT_LANG};return wifiClientViewService.getSettings(params)}}),WifiClientMonitor.prototype.initChartSettings=function(){this.chartSettings={columns:this.hideCharts?[]:["signal_strength","band","technology"]}},WifiClientMonitor.prototype.getChartColor=inject.mark(function(wifiClientViewService){return function(value,column){return wifiClientViewService.getChartColor(value,column)}});var fWifiClientMonitor={bindings:{slide:"<?",sourceFilterFn:"<?",ap:"<?",defaultColumns:"<?",hideCsfChooser:"<?",hideCharts:"<"},controller:WifiClientMonitor,templateUrl:__webpack_require__(893)};return function(providers,loader){return providers.$compile.component("fWifiClientMonitor",fWifiClientMonitor),loader.initModules([__webpack_require__(457),__webpack_require__(458),__webpack_require__(896)])}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},457:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26),__webpack_require__(8),__webpack_require__(31),__webpack_require__(63),__webpack_require__(30),__webpack_require__(0)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(inject,ftnt_shared,fwebDom,fWifi,fLog,BUILD){const WIFI_LANGKEY="wifi::",WIFI_META_URL="/api/v2/monitor/wifi/meta",HAVE_MESH=BUILD.PLATFORM.HAVE_CAPWAP_NO_MESH,{Omniselect:Omniselect,Tooltip:Tooltip,muTableUtil:muTableUtil,colors:colors}=ftnt_shared,SIGNAL_QUALITY={GOOD:"Good",FAIR:"Fair",POOR:"Poor"},CHART_COLOR_MAPPING=new Map,generateSeverityColorMappingForTheme=function(theme){const themeColors=colors[theme];["none","low","medium","high","critical"].forEach(function(severity){var sev;CHART_COLOR_MAPPING.set(severity,(sev=severity,themeColors["severity-labels"][sev].background))})},SIGNAL_QUALITY_MAP_RANGE={[SIGNAL_QUALITY.GOOD]:[-55,Number.MAX_SAFE_INTEGER],[SIGNAL_QUALITY.FAIR]:[-75,-56],[SIGNAL_QUALITY.POOR]:[Number.MIN_SAFE_INTEGER,-76]},SIGNAL_QUALITY_TO_SEV={[SIGNAL_QUALITY.GOOD]:"none",[SIGNAL_QUALITY.FAIR]:"medium",[SIGNAL_QUALITY.POOR]:"critical"},RANGE_LABEL={SIGNAL_STRENGTH:{[SIGNAL_QUALITY.GOOD]:`( >${SIGNAL_QUALITY_MAP_RANGE[SIGNAL_QUALITY.GOOD][0]} dBm )`,[SIGNAL_QUALITY.FAIR]:`( ${SIGNAL_QUALITY_MAP_RANGE[SIGNAL_QUALITY.FAIR][0]} dBm -`+` ${SIGNAL_QUALITY_MAP_RANGE[SIGNAL_QUALITY.FAIR][1]} dBm )`,[SIGNAL_QUALITY.POOR]:`( <${SIGNAL_QUALITY_MAP_RANGE[SIGNAL_QUALITY.POOR][1]} dBm )`}};class WifiClientView extends inject.Collectable{constructor(state){super(),this.SIGNAL_QUALITY=SIGNAL_QUALITY,generateSeverityColorMappingForTheme(state.theme),this._setupChartColorMap()}getSource($INJECTABLE$,WifiClientMonitorSource){return options=>new WifiClientMonitorSource(options)}getSettings($INJECTABLE$,state,lang,$filter){const SIGNAL_QUALITIES=Object.values(SIGNAL_QUALITY);return({fortigate:fortigate,managedAPs:managedAPs,ssids:ssids,filters:filters,SECURITY_LANG:SECURITY_LANG,SECURITY_TYPES:SECURITY_TYPES,ENCRYPT_LANG:ENCRYPT_LANG})=>{var elapsedTimeFilter=$filter("elapsedTime");const isUniqueLocalAddress=address=>address.startsWith("fe80"),deviceDatasource=fortigate.getOmniselectProxySourceID("devices"),userDatasource=fortigate.getOmniselectProxySourceID("user.local"),apDatasource=fortigate.getOmniselectProxySourceID("wireless-controller.wtp");return{defaultColumns:["ip","mac","wtp_id","ssid","user","device","channel","bandwidth_trx","snr","signal","association_time"],columns:[{id:"ip",lang_key:"IP"},{id:"ipv6-gua",langKey:"IPv6 Global Unicast Address",hidden:!state.featureEnabled("gui-ipv6"),type:"collection",cellValueFunction:entry=>{let result=entry.sta_ip6.filter(ip6=>!isUniqueLocalAddress(ip6));const hasMain=result.length>1;return result=result.map((address,index)=>({value:address,hasMain:hasMain,isMain:0===index}))},collectionEntryFormatter:entry=>{const childDoms=[fwebDom.elem("span",{textContent:entry.value})];return entry.hasMain&&entry.isMain&&childDoms.push(fwebDom.elem("f-icon",{className:"fa-help-info"})),fwebDom.elem("div",null,{children:childDoms})},collectionEntryOnRender:element=>{const tooltipElem=element.querySelector(".fa-help-info");if(tooltipElem){const tooltipContent=fwebDom.elem("span",{textContent:lang("Main Global Unicast Address")});return Tooltip.addToElement(tooltipElem,tooltipContent,{showDelay:!0})}}},{id:"ipv6-ula",langKey:"IPv6 Unique Local Address",hidden:!state.featureEnabled("gui-ipv6"),type:"collection",cellValueFunction:entry=>entry.sta_ip6.filter(ip6=>isUniqueLocalAddress(ip6))},{id:"wtp_id",langKey:"FortiAP",type:"omniselect",forcedFilter:filters&&filters.wtp_id&&muTableUtil.createContainsStringFilter(filters.wtp_id),cellValueFunction:entry=>{return{q_origin_key:fortigate.serial===entry.wtp_id?fWifi.convertSerialToLocal(fortigate.serial):entry.wtp_id,datasource:apDatasource}},cellIsValidCollectionFunction:function(entry){return entry.wtp_id},collectionFallbackFormatter:function(entry){var displayName=entry.wtp_id||"";return entry.wtp_name?displayName=entry.wtp_name:entry.hasOwnProperty("wtp_id")&&managedAPs&&managedAPs[entry.wtp_id]&&"local"===managedAPs[entry.wtp_id].meshUplink&&(displayName=lang("local_radio").toString()),displayName}},{id:"radio",langKey:"FortiAP Radio",cellValueFunction:function(entry){return entry.lan_authenticated?lang("Virtual LAN AP"):entry.wtp_radio}},{id:"wtp_ip",langKey:"FortiAP IP",cellFormatter:function(entry){return entry.hasOwnProperty("wtp_id")&&managedAPs&&managedAPs[entry.wtp_id]?managedAPs[entry.wtp_id].connectingFrom:entry.wtp_ip}},{id:"ssid",cellFormatter:function(entry){var icon="ftnt-vap-",title="";return ssids&&entry.hasOwnProperty("vap_name")&&ssids[entry.vap_name]?ssids[entry.vap_name].isMesh?(icon+="mesh-backhaul",title=lang("mesh_ssid")):ssids[entry.vap_name].isLocalBridging?(icon+="local-bridging",title=lang("Local Bridge")):(icon+="traffic-normal",title=lang("tr_tunnel")):(icon+="traffic-normal",title=lang("tr_tunnel")),fwebDom.elem("span",null,{children:[fwebDom.elem("f-icon",{className:icon,title:title}),fwebDom.elem("span",{textContent:entry.ssid})]})}},{id:"user",type:"omniselect",omniselectAllowFallback:!0,cellValueFunction:function(entry){if(entry.user)return{q_origin_key:entry.user,datasource:userDatasource}},collectionEntryValueFunction:function(entry){return entry.q_origin_key||""}},{id:"group"},{id:"association_time",langKey:"field_sta_assoc_time",type:"date",dateType:"dateTime",cellValueFunction:function(entry){return 1e3*entry.association_time}},{id:"mac",langKey:"mac_address",cellFormatter:function(entry){return entry.mac.toUpperCase()}},{id:"device",type:"omniselect",omniselectAllowFallback:!0,cellValueFunction:function(entry){if(entry.mac)return{q_origin_key:entry.mac,hostname:entry.hostname,datasource:deviceDatasource}},collectionEntryValueFunction:function(entry){return entry.hostname||entry.q_origin_key||""}},{id:"device_os",langKey:"field_device_os",cellValueFunction:function(entry){return entry.os}},{id:"host_info",type:"collection",cellValueFunction:function(entry){var res=[];return entry.host&&res.push(entry.host),entry.vci&&res.push(entry.vci),res}},{id:"security",cellFormatter:function(entry){var langKey=SECURITY_LANG&&SECURITY_LANG[entry.security]||"Invalid";return lang(langKey).toString()}},{id:"encrypt",langKey:"encryption",cellFormatter:function(entry){var langKey=SECURITY_TYPES&&SECURITY_TYPES[entry.security]&&SECURITY_TYPES[entry.security].uses_encryption&&ENCRYPT_LANG&&ENCRYPT_LANG[entry.encrypt]||"None";return lang(langKey).toString()}},{id:"authentication",cellFormatter:function(entry){return"pass"!==entry.authentication||SECURITY_TYPES&&SECURITY_TYPES[entry.security]&&SECURITY_TYPES[entry.security].uses_captive_portal&&!entry.captive_portal_authenticated?lang("Authenticating").toString():lang("pass").toString()}},{id:"manufacturer"},{id:"idle_time",langKey:"field_sta_idle_time",cellFormatter:function(entry){return elapsedTimeFilter(1e3*entry.idle_time,"short")}},{id:"data_rate_bps",langKey:"field_sta_rate",type:"number",numberType:"metricBitsPerSecond"},{id:"snr",langKey:"field_sta_snr",type:"number",numberUnit:"dB"},{id:"signal",langKey:"field_sta_signal",type:"number",numberType:"custom",cellFormatter:function(entry){var title=`${entry.signal} ${lang("dBm")}`;return fwebDom.elem("span",null,{children:[fwebDom.elem("span",{textContent:title}),ftnt_shared.formatters.signalStrengthBarElement(entry.signal,null,title)]})}},{id:"noise",langKey:"field_sta_noise",type:"number",numberUnit:"dB"},{id:"bandwidth_tx",langKey:"field_wtp_bandwidth_Tx",type:"number",numberType:"metricBitsPerSecond"},{id:"bandwidth_rx",langKey:"field_wtp_bandwidth_Rx",type:"number",numberType:"metricBitsPerSecond"},{id:"bandwidth_trx",langKey:"field_wtp_bandwidth_TRx",type:"number",numberType:"metricBitsPerSecond",numberCompareBar:"dualGood",cellValueFunction:function(entry){return[entry.bandwidth_tx,entry.bandwidth_rx]}},{id:"channel",langKey:"field_radio_chan",type:"number"},{id:"radio_type",langKey:"field_radio_type",cellFormatter:function(entry){const freq=entry.frequency,type=entry.radio_type;return`${lang(lang.getPrefixedKey(WIFI_LANGKEY,freq))}: `+`${lang(lang.getPrefixedKey(WIFI_LANGKEY,type))}`}},{id:"mimo",cellValueFunction:(entry,column)=>entry[column.id]||lang("n/a")},{id:"vlan_id",langKey:"vlanid",type:"number"},{id:"band",langKey:"band",hidden:!0,cellValueFunction:function(entry){if(entry.radio_type&&"unknown"!==entry.radio_type)return lang(`${WIFI_LANGKEY}${entry.frequency}`)}},{id:"technology",langKey:"technology",hidden:!0,cellValueFunction:function(entry){return fWifi.technologyFromBand(entry.radio_type)||lang("unknown")}},{id:"signal_strength",langKey:"field_sta_signal",cellValueFunction:function(entry){const signalQuality=(signal=entry.signal,SIGNAL_QUALITIES.find(quality=>{const[low,high]=SIGNAL_QUALITY_MAP_RANGE[quality];return signal>=low&&signal<=high}));var signal;const qualityRange=RANGE_LABEL.SIGNAL_STRENGTH[signalQuality];return`${lang(signalQuality)} ${qualityRange}`}}]}}}getExtraData($INJECTABLE$,$q){const addManagedAPInfo=managedAPs=>managedAPs.reduce((acc,current)=>(acc[current.wtp_id]={meshUplink:current.mesh_uplink,connectingFrom:current.connecting_from},acc),{}),addSsidInfo=ssids=>ssids.reduce((acc,current)=>(acc[current.name]={isMesh:HAVE_MESH&&"enable"===current["mesh-backhaul"],isLocalBridging:"enable"===current["local-bridging"]},acc),{});return async fortigate=>{const promises=[Omniselect.getSourceMetaData(fortigate.getOmniselectProxySourceID("wireless-controller.wtp")).then(response=>response.managedAP).then(addManagedAPInfo),Omniselect.getSourceData(fortigate.getOmniselectProxySourceID("wireless-controller.vap")).then(addSsidInfo)];try{const[managedAPs,ssids]=await $q.all(promises);return{managedAPs:managedAPs,ssids:ssids}}catch(e){throw fLog.error(e),e}}}getWifiMetaLangs($INJECTABLE$,$http){const storeSecurity=(securityLevels,rawSecurityEntry)=>(securityLevels[rawSecurityEntry.type_code]={lang:rawSecurityEntry.lang,uses_encryption:rawSecurityEntry.uses_encryption,uses_captive_portal:rawSecurityEntry.uses_captive_portal},securityLevels),getSecurityLang=securityEntry=>securityEntry.lang;return async fortigate=>{const wifiMeta=await $http.get(fortigate.createCSFURI(`${WIFI_META_URL}`)).then(r=>r.data.results),SECURITY_TYPES=wifiMeta.security_types.reduce(storeSecurity,[]),SECURITY_LANG=SECURITY_TYPES.map(getSecurityLang);return{SECURITY_TYPES:SECURITY_TYPES,SECURITY_LANG:SECURITY_LANG,ENCRYPT_LANG:wifiMeta.encryption_types}}}getChartColor(value,column){return this._chartColorMap[column.id]&&this._chartColorMap[column.id][value]}_setupChartColorMap($INJECTABLE$,lang){return()=>{this._chartColorMap={signal_strength:Object.entries(RANGE_LABEL.SIGNAL_STRENGTH).reduce((map,[key,value])=>{const sev=SIGNAL_QUALITY_TO_SEV[key];return map[`${lang(key)} ${value}`]=CHART_COLOR_MAPPING.get(sev),map},{}),band:{[lang(`${WIFI_LANGKEY}24ghz`)]:CHART_COLOR_MAPPING.get("low"),[lang(`${WIFI_LANGKEY}5ghz`)]:CHART_COLOR_MAPPING.get("medium")}}}}}return(providers,loaderProviders)=>{providers.$provide.service("wifiClientViewService",WifiClientView),loaderProviders.initModules([__webpack_require__(894)])}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},458:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_RESULT__;void 0===(__WEBPACK_AMD_DEFINE_RESULT__=(()=>{const fWifiClientMonitorMenu={controller:class{refresh(){this.onRefresh()}get selected(){return this.menu.entries}get singleSelected(){return 1===this.selected.length}},templateUrl:__webpack_require__(895),bindings:{menu:"<",onRefresh:"&",hideCsfChooser:"<",showDetails:"&",inWidget:"<"}};return(providers,loader)=>(providers.$compile.component("fWifiClientMonitorMenu",fWifiClientMonitorMenu),loader.initModules([__webpack_require__(33)]))}).apply(exports,[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},460:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26),__webpack_require__(48)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(inject,d3){class WifiHeatMap extends inject.Collectable{constructor($element){super(),this.chartID=Math.round(1e3*Math.random()),this.element=$element[0],this.cache=[],this.loading=!0}$onInit($INJECTABLE$,$scope){return()=>{this.refresh=(()=>{this.draw(!0)}),this.draw(),$scope.$watch("$ctrl.data",newVal=>{newVal&&Array.isArray(newVal)&&(this.cache=newVal,this.loading&&this.draw(),this.redraw())})}}draw(cacheCanvas){const target=`#chart-${this.chartID}`;if(!this.element.querySelector(target))return;this.loading=!1;const margin={top:50,right:80,bottom:40,left:40};this.x.label&&(margin.bottom+=10),this.y.label&&(margin.left+=10);const rect=this.element.getBoundingClientRect();if(rect.width<=0||rect.height<=0)return;const width=this.width=rect.width-margin.left-margin.right,height=this.height=rect.height-margin.top-margin.bottom;d3.select(target).selectAll("svg").remove();const svg=this.svg=d3.select(target).append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform",`translate(${margin.left}, ${margin.top})`);if(!cacheCanvas){d3.select(target).selectAll("canvas").remove();const canvas=this.canvas=d3.select(target).node().appendChild(document.createElement("canvas"));this.context=canvas.getContext("2d"),canvas.style.position="absolute",canvas.style.top=`${margin.top}px`,canvas.style.left=`${margin.left}px`,canvas.width=width,canvas.height=height}this.label&&svg.append("text").attr("transform",`translate(${width/2}, -20)`).style("font-size","1em").style("text-anchor","middle").text(this.label);const x=this.xScale=d3.scaleBand().range([0,width]).domain(this.x.domain()),xAxis=d3.axisBottom(x).tickSize(-height).tickValues(x.domain().filter((d,i,n)=>{let included=!0;return this.x.tickFilter&&(included=this.x.tickFilter(d,i,n)),0===i&&(included=!1),included})).tickFormat(this.x.tickFormat||(d=>d));svg.append("g").attr("class","x").attr("transform",`translate(0,${height})`).call(xAxis),this.x.label&&svg.append("text").attr("transform",`translate(${width/2}, ${height+margin.top})`).style("font-size","0.9em").style("text-anchor","middle").text(this.x.label);const y=this.yScale=d3.scaleBand().range([height,0]).domain(this.y.domain()),yAxis=d3.axisLeft(y).tickSize(-width).tickValues(y.domain().filter((d,i)=>{let included=!0;return this.y.tickFilter&&(included=this.y.tickFilter(d,i)),included})).tickFormat(this.y.tickFormat||(d=>d));svg.append("g").attr("class","y").call(yAxis),this.y.label&&svg.append("text").attr("transform","rotate(-90)").attr("y",0-margin.left+5).attr("x",0-height/2).attr("dy","1em").style("font-size","0.9em").style("text-anchor","middle").text(this.y.label);const zDomain=this.z.domain(),z=this.zScale=d3.scaleLinear().domain([0,25,50,75,100]).range(["black","blue","green","yellow","red"]);svg.append("defs").append("linearGradient").attr("id",`linear-gradient-${this.chartID}`).attr("gradientTransform","rotate(90)").selectAll("stop").data(z.ticks().reverse().map((t,i,n)=>({offset:`${100*i/n.length}%`,color:z(t)}))).enter().append("stop").attr("offset",d=>d.offset).attr("stop-color",d=>d.color),svg.append("rect").attr("transform",`translate(${width+25}, 15)`).attr("width",20).attr("height",height-30).style("fill",`url(#linear-gradient-${this.chartID})`),svg.append("text").attr("transform",`translate(${width+35}, ${height})`).style("font-size","0.9em").style("text-anchor","middle").text(`${zDomain[0]} ${this.z.label}`),svg.append("text").attr("transform",`translate(${width+35}, 10)`).style("font-size","0.9em").style("text-anchor","middle").text(`${zDomain[zDomain.length-1]} ${this.z.label}`),svg.selectAll("g.tick line").attr("stroke-width","1px").attr("stroke","#D9D9D9"),svg.selectAll(".domain").attr("stroke","#545454").attr("stroke-width","2px"),svg.selectAll("g.x g.tick text").attr("dy","1.25em")}redraw(){if(this.cache&&this.canvas&&this.svg){const tmpCanvas=document.createElement("canvas");tmpCanvas.width=this.width,tmpCanvas.height=Math.round(this.yScale.bandwidth());const context=tmpCanvas.getContext("2d"),colorScale=d3.scaleLinear().domain(this.z.domain()).range(["black","blue","green","yellow","red"]);for(const d of this.cache){const x=Math.round(this.xScale(d.x)),w=Math.round(this.xScale.bandwidth())+1,h=Math.round(this.yScale.bandwidth());context.beginPath(),context.fillStyle=colorScale(d.z),context.fillRect(x,0,w,h)}const height=Math.round(this.yScale.bandwidth());this.context.drawImage(this.context.canvas,0,-height),this.context.drawImage(tmpCanvas,0,this.height-height)}}}return function(providers){providers.$compile.component("fWifiHeatMap",{controller:WifiHeatMap,templateUrl:__webpack_require__(937),bindings:{x:"<",y:"<",z:"<",data:"<",label:"<",refresh:"="}})}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},640:function(module,exports){
/**
 * @license AngularJS v1.5.9
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(window){"use strict";function minErr(module,ErrorConstructor){return ErrorConstructor=ErrorConstructor||Error,function(){var paramPrefix,i,templateArgs=arguments,code=templateArgs[0],message="["+(module?module+":":"")+code+"] ";for(message+=templateArgs[1].replace(/\{\d+\}/g,function(match){var shiftedIndex=+match.slice(1,-1)+2;return shiftedIndex<templateArgs.length?toDebugString(templateArgs[shiftedIndex]):match}),message+="\nhttp://errors.angularjs.org/1.5.9/"+(module?module+"/":"")+code,i=2,paramPrefix="?";i<templateArgs.length;i++,paramPrefix="&")message+=paramPrefix+"p"+(i-2)+"="+encodeURIComponent(toDebugString(templateArgs[i]));return new ErrorConstructor(message)}}var REGEX_STRING_REGEXP=/^\/(.+)\/([a-z]*)$/,VALIDITY_STATE_PROPERTY="validity",hasOwnProperty=Object.prototype.hasOwnProperty,lowercase=function(string){return isString(string)?string.toLowerCase():string},uppercase=function(string){return isString(string)?string.toUpperCase():string};"i"!=="I".toLowerCase()&&(lowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(32|ch.charCodeAt(0))}):s},uppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(-33&ch.charCodeAt(0))}):s});var msie,jqLite,jQuery,angularModule,slice=[].slice,splice=[].splice,push=[].push,toString=Object.prototype.toString,getPrototypeOf=Object.getPrototypeOf,ngMinErr=minErr("ng"),angular=window.angular||(window.angular={}),uid=0;function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;if(isArray(obj)||isString(obj)||jqLite&&obj instanceof jqLite)return!0;var length="length"in Object(obj)&&obj.length;return isNumber(length)&&(length>=0&&(length-1 in obj||obj instanceof Array)||"function"==typeof obj.item)}function forEach(obj,iterator,context){var key,length;if(obj)if(isFunction(obj))for(key in obj)"prototype"===key||"length"===key||"name"===key||obj.hasOwnProperty&&!obj.hasOwnProperty(key)||iterator.call(context,obj[key],key,obj);else if(isArray(obj)||isArrayLike(obj)){var isPrimitive="object"!=typeof obj;for(key=0,length=obj.length;key<length;key++)(isPrimitive||key in obj)&&iterator.call(context,obj[key],key,obj)}else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context,obj);else if(isBlankObject(obj))for(key in obj)iterator.call(context,obj[key],key,obj);else if("function"==typeof obj.hasOwnProperty)for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj);else for(key in obj)hasOwnProperty.call(obj,key)&&iterator.call(context,obj[key],key,obj);return obj}function forEachSorted(obj,iterator,context){for(var keys=Object.keys(obj).sort(),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){return++uid}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function baseExtend(dst,objs,deep){for(var h=dst.$$hashKey,i=0,ii=objs.length;i<ii;++i){var obj=objs[i];if(isObject(obj)||isFunction(obj))for(var keys=Object.keys(obj),j=0,jj=keys.length;j<jj;j++){var key=keys[j],src=obj[key];deep&&isObject(src)?isDate(src)?dst[key]=new Date(src.valueOf()):isRegExp(src)?dst[key]=new RegExp(src):src.nodeName?dst[key]=src.cloneNode(!0):isElement(src)?dst[key]=src.clone():(isObject(dst[key])||(dst[key]=isArray(src)?[]:{}),baseExtend(dst[key],[src],!0)):dst[key]=src}}return setHashKey(dst,h),dst}function extend(dst){return baseExtend(dst,slice.call(arguments,1),!1)}function merge(dst){return baseExtend(dst,slice.call(arguments,1),!0)}function toInt(str){return parseInt(str,10)}msie=window.document.documentMode;var isNumberNaN=Number.isNaN||function(num){return num!=num};function inherit(parent,extra){return extend(Object.create(parent),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function hasCustomToString(obj){return isFunction(obj.toString)&&obj.toString!==toString}function isUndefined(value){return void 0===value}function isDefined(value){return void 0!==value}function isObject(value){return null!==value&&"object"==typeof value}function isBlankObject(value){return null!==value&&"object"==typeof value&&!getPrototypeOf(value)}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"===toString.call(value)}noop.$inject=[],identity.$inject=[];var isArray=Array.isArray;function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"===toString.call(value)}function isWindow(obj){return obj&&obj.window===obj}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isBoolean(value){return"boolean"==typeof value}function isPromiseLike(obj){return obj&&isFunction(obj.then)}var TYPED_ARRAY_REGEXP=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/;var trim=function(value){return isString(value)?value.trim():value},escapeForRegexp=function(s){return s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function isElement(node){return!(!node||!(node.nodeName||node.prop&&node.attr&&node.find))}function nodeName_(element){return lowercase(element.nodeName||element[0]&&element[0].nodeName)}function arrayRemove(array,value){var index=array.indexOf(value);return index>=0&&array.splice(index,1),index}function copy(source,destination){var obj,value,stackSource=[],stackDest=[];if(destination){if((value=destination)&&isNumber(value.length)&&TYPED_ARRAY_REGEXP.test(toString.call(value))||(obj=destination,"[object ArrayBuffer]"===toString.call(obj)))throw ngMinErr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");return isArray(destination)?destination.length=0:forEach(destination,function(value,key){"$$hashKey"!==key&&delete destination[key]}),stackSource.push(source),stackDest.push(destination),copyRecurse(source,destination)}return copyElement(source);function copyRecurse(source,destination){var key,h=destination.$$hashKey;if(isArray(source))for(var i=0,ii=source.length;i<ii;i++)destination.push(copyElement(source[i]));else if(isBlankObject(source))for(key in source)destination[key]=copyElement(source[key]);else if(source&&"function"==typeof source.hasOwnProperty)for(key in source)source.hasOwnProperty(key)&&(destination[key]=copyElement(source[key]));else for(key in source)hasOwnProperty.call(source,key)&&(destination[key]=copyElement(source[key]));return setHashKey(destination,h),destination}function copyElement(source){if(!isObject(source))return source;var index=stackSource.indexOf(source);if(-1!==index)return stackDest[index];if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var needsRecurse=!1,destination=function(source){switch(toString.call(source)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new source.constructor(copyElement(source.buffer),source.byteOffset,source.length);case"[object ArrayBuffer]":if(!source.slice){var copied=new ArrayBuffer(source.byteLength);return new Uint8Array(copied).set(new Uint8Array(source)),copied}return source.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new source.constructor(source.valueOf());case"[object RegExp]":var re=new RegExp(source.source,source.toString().match(/[^\/]*$/)[0]);return re.lastIndex=source.lastIndex,re;case"[object Blob]":return new source.constructor([source],{type:source.type})}if(isFunction(source.cloneNode))return source.cloneNode(!0)}(source);return void 0===destination&&(destination=isArray(source)?[]:Object.create(getPrototypeOf(source)),needsRecurse=!0),stackSource.push(source),stackDest.push(destination),needsRecurse?copyRecurse(source,destination):destination}}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!=o1&&o2!=o2)return!0;var length,key,keySet,t1=typeof o1;if(t1===typeof o2&&"object"===t1){if(!isArray(o1)){if(isDate(o1))return!!isDate(o2)&&equals(o1.getTime(),o2.getTime());if(isRegExp(o1))return!!isRegExp(o2)&&o1.toString()===o2.toString();if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2)||isDate(o2)||isRegExp(o2))return!1;for(key in keySet=createMap(),o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!(key in keySet)&&"$"!==key.charAt(0)&&isDefined(o2[key])&&!isFunction(o2[key]))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)===o2.length){for(key=0;key<length;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}var csp=function(){if(!isDefined(csp.rules)){var ngCspElement=window.document.querySelector("[ng-csp]")||window.document.querySelector("[data-ng-csp]");if(ngCspElement){var ngCspAttribute=ngCspElement.getAttribute("ng-csp")||ngCspElement.getAttribute("data-ng-csp");csp.rules={noUnsafeEval:!ngCspAttribute||-1!==ngCspAttribute.indexOf("no-unsafe-eval"),noInlineStyle:!ngCspAttribute||-1!==ngCspAttribute.indexOf("no-inline-style")}}else csp.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(e){return!0}}(),noInlineStyle:!1}}return csp.rules},jq=function(){if(isDefined(jq.name_))return jq.name_;var el,i,prefix,name,ii=ngAttrPrefixes.length;for(i=0;i<ii;++i)if(prefix=ngAttrPrefixes[i],el=window.document.querySelector("["+prefix.replace(":","\\:")+"jq]")){name=el.getAttribute(prefix+"jq");break}return jq.name_=name};function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,concat(curryArgs,arguments,0)):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)&&"$"===key.charAt(1)?val=void 0:isWindow(value)?val="$WINDOW":value&&window.document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){if(!isUndefined(obj))return isNumber(pretty)||(pretty=pretty?2:null),JSON.stringify(obj,toJsonReplacer,pretty)}function fromJson(json){return isString(json)?JSON.parse(json):json}var ALL_COLONS=/:/g;function timezoneToOffset(timezone,fallback){timezone=timezone.replace(ALL_COLONS,"");var requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNumberNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var dateTimezoneOffset=date.getTimezoneOffset();return function(date,minutes){return(date=new Date(date.getTime())).setMinutes(date.getMinutes()+minutes),date}(date,reverse*(timezoneToOffset(timezone,dateTimezoneOffset)-dateTimezoneOffset))}function startingTag(element){element=jqLite(element).clone();try{element.empty()}catch(e){}var elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===NODE_TYPE_TEXT?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var obj={};return forEach((keyValue||"").split("&"),function(keyValue){var splitPoint,key,val;keyValue&&(key=keyValue=keyValue.replace(/\+/g,"%20"),-1!==(splitPoint=keyValue.indexOf("="))&&(key=keyValue.substring(0,splitPoint),val=keyValue.substring(splitPoint+1)),isDefined(key=tryDecodeURIComponent(key))&&(val=!isDefined(val)||tryDecodeURIComponent(val),hasOwnProperty.call(obj,key)?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val))}),obj}function toKeyValue(obj){var parts=[];return forEach(obj,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(!0===arrayValue?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(!0===value?"":"="+encodeUriQuery(value,!0)))}),parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,pctEncodeSpaces?"%20":"+")}var ngAttrPrefixes=["ng-","data-ng-","ng:","x-ng-"];var isAutoBootstrapAllowed=function(document){if(!document.currentScript)return!0;var src=document.currentScript.getAttribute("src"),link=document.createElement("a");link.href=src;var scriptProtocol=link.protocol;if(document.location.protocol===scriptProtocol)return!0;switch(scriptProtocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}(window.document);function angularInit(element,bootstrap){var appElement,module,config={};if(forEach(ngAttrPrefixes,function(prefix){var name=prefix+"app";!appElement&&element.hasAttribute&&element.hasAttribute(name)&&(appElement=element,module=element.getAttribute(name))}),forEach(ngAttrPrefixes,function(prefix){var candidate,name=prefix+"app";!appElement&&(candidate=element.querySelector("["+name.replace(":","\\:")+"]"))&&(appElement=candidate,module=candidate.getAttribute(name))}),appElement){if(!isAutoBootstrapAllowed)return void window.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");config.strictDi=null!==function(element,ngAttr){var attr,i,ii=ngAttrPrefixes.length;for(i=0;i<ii;++i)if(attr=ngAttrPrefixes[i]+ngAttr,isString(attr=element.getAttribute(attr)))return attr;return null}(appElement,"strict-di"),bootstrap(appElement,module?[module]:[],config)}}function bootstrap(element,modules,config){isObject(config)||(config={});config=extend({strictDi:!1},config);var doBootstrap=function(){if((element=jqLite(element)).injector()){var tag=element[0]===window.document?"document":startingTag(element);throw ngMinErr("btstrpd","App already bootstrapped with this element '{0}'",tag.replace(/</,"&lt;").replace(/>/,"&gt;"))}(modules=modules||[]).unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),config.debugInfoEnabled&&modules.push(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!0)}]),modules.unshift("ng");var injector=createInjector(modules,config.strictDi);return injector.invoke(["$rootScope","$rootElement","$compile","$injector",function(scope,element,compile,injector){scope.$apply(function(){element.data("$injector",injector),compile(element)(scope)})}]),injector},NG_ENABLE_DEBUG_INFO=/^NG_ENABLE_DEBUG_INFO!/,NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;if(window&&NG_ENABLE_DEBUG_INFO.test(window.name)&&(config.debugInfoEnabled=!0,window.name=window.name.replace(NG_ENABLE_DEBUG_INFO,"")),window&&!NG_DEFER_BOOTSTRAP.test(window.name))return doBootstrap();window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),angular.resumeBootstrap=function(extraModules){return forEach(extraModules,function(module){modules.push(module)}),doBootstrap()},isFunction(angular.resumeDeferredBootstrap)&&angular.resumeDeferredBootstrap()}function reloadWithDebugInfo(){window.name="NG_ENABLE_DEBUG_INFO!"+window.name,window.location.reload()}function getTestability(rootElement){var injector=angular.element(rootElement).injector();if(!injector)throw ngMinErr("test","no injector found for element argument to getTestability");return injector.get("$$testability")}var SNAKE_CASE_REGEXP=/[A-Z]/g;function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}var bindJQueryFired=!1;function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;i<len;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function getBlockNodes(nodes){for(var blockNodes,node=nodes[0],endNode=nodes[nodes.length-1],i=1;node!==endNode&&(node=node.nextSibling);i++)(blockNodes||nodes[i]!==node)&&(blockNodes||(blockNodes=jqLite(slice.call(nodes,0,i))),blockNodes.push(node));return blockNodes||nodes}function createMap(){return Object.create(null)}var NODE_TYPE_ELEMENT=1,NODE_TYPE_TEXT=3,NODE_TYPE_COMMENT=8,NODE_TYPE_DOCUMENT=9,NODE_TYPE_DOCUMENT_FRAGMENT=11;function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;i<ii;i++)dst[i]=src[i]}else if(isObject(src))for(var key in dst=dst||{},src)"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key]);return dst||src}function toDebugString(obj){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):isUndefined(obj)?"undefined":"string"!=typeof obj?function(obj){var seen=[];return JSON.stringify(obj,function(key,val){if(isObject(val=toJsonReplacer(key,val))){if(seen.indexOf(val)>=0)return"...";seen.push(val)}return val})}(obj):obj}var version={full:"1.5.9",major:1,minor:5,dot:9,codeName:"timeturning-lockdown"};JQLite.expando="ng339";var jqCache=JQLite.cache={},jqId=1,addEventListenerFn=function(element,type,fn){element.addEventListener(type,fn,!1)},removeEventListenerFn=function(element,type,fn){element.removeEventListener(type,fn,!1)};JQLite._data=function(node){return this.cache[node[this.expando]]||{}};var SPECIAL_CHARS_REGEXP=/([:\-_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/,MOUSE_EVENT_MAP={mouseleave:"mouseout",mouseenter:"mouseover"},jqLiteMinErr=minErr("jqLite");function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}).replace(MOZ_HACK_REGEXP,"Moz$1")}var SINGLE_TAG_REGEXP=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,HTML_REGEXP=/<|&#?\w+;/,TAG_NAME_REGEXP=/<([\w:-]+)/,XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}function jqLiteAcceptsData(node){var nodeType=node.nodeType;return nodeType===NODE_TYPE_ELEMENT||!nodeType||nodeType===NODE_TYPE_DOCUMENT}function jqLiteBuildFragment(html,context){var tmp,tag,wrap,i,fragment=context.createDocumentFragment(),nodes=[];if(jqLiteIsTextNode(html))nodes.push(context.createTextNode(html));else{for(tmp=fragment.appendChild(context.createElement("div")),tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2],i=wrap[0];i--;)tmp=tmp.lastChild;nodes=concat(nodes,tmp.childNodes),(tmp=fragment.firstChild).textContent=""}return fragment.textContent="",fragment.innerHTML="",forEach(nodes,function(node){fragment.appendChild(node)}),fragment}function jqLiteWrapNode(node,wrapper){var parent=node.parentNode;parent&&parent.replaceChild(wrapper,node),wrapper.appendChild(node)}wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var jqLiteContains=window.Node.prototype.contains||function(arg){return!!(16&this.compareDocumentPosition(arg))};function JQLite(element){if(element instanceof JQLite)return element;var argIsString,html,context,parsed;if(isString(element)&&(element=trim(element),argIsString=!0),!(this instanceof JQLite)){if(argIsString&&"<"!==element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}jqLiteAddNodes(this,argIsString?(html=element,context=context||window.document,(parsed=SINGLE_TAG_REGEXP.exec(html))?[context.createElement(parsed[1])]:(parsed=jqLiteBuildFragment(html,context))?parsed.childNodes:[]):element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element,onlyDescendants){if(onlyDescendants||jqLiteRemoveData(element),element.querySelectorAll)for(var descendants=element.querySelectorAll("*"),i=0,l=descendants.length;i<l;i++)jqLiteRemoveData(descendants[i])}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,handle=expandoStore&&expandoStore.handle;if(handle)if(type){var removeHandler=function(type){var listenerFns=events[type];isDefined(fn)&&arrayRemove(listenerFns||[],fn),isDefined(fn)&&listenerFns&&listenerFns.length>0||(removeEventListenerFn(element,type,handle),delete events[type])};forEach(type.split(" "),function(type){removeHandler(type),MOUSE_EVENT_MAP[type]&&removeHandler(MOUSE_EVENT_MAP[type])})}else for(type in events)"$destroy"!==type&&removeEventListenerFn(element,type,handle),delete events[type]}function jqLiteRemoveData(element,name){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];if(expandoStore){if(name)return void delete expandoStore.data[name];expandoStore.handle&&(expandoStore.events.$destroy&&expandoStore.handle({},"$destroy"),jqLiteOff(element)),delete jqCache[expandoId],element.ng339=void 0}}function jqLiteExpandoStore(element,createIfNecessary){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];return createIfNecessary&&!expandoStore&&(element.ng339=expandoId=++jqId,expandoStore=jqCache[expandoId]={events:{},data:{},handle:void 0}),expandoStore}function jqLiteData(element,key,value){if(jqLiteAcceptsData(element)){var isSimpleSetter=isDefined(value),isSimpleGetter=!isSimpleSetter&&key&&!isObject(key),massGetter=!key,expandoStore=jqLiteExpandoStore(element,!isSimpleGetter),data=expandoStore&&expandoStore.data;if(isSimpleSetter)data[key]=value;else{if(massGetter)return data;if(isSimpleGetter)return data&&data[key];extend(data,key)}}}function jqLiteHasClass(element,selector){return!!element.getAttribute&&(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1}function jqLiteRemoveClass(element,cssClasses){cssClasses&&element.setAttribute&&forEach(cssClasses.split(" "),function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))})}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ")}),element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements)if(elements.nodeType)root[root.length++]=elements;else{var length=elements.length;if("number"==typeof length&&elements.window!==elements){if(length)for(var i=0;i<length;i++)root[root.length++]=elements[i]}else root[root.length++]=elements}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){element.nodeType===NODE_TYPE_DOCUMENT&&(element=element.documentElement);for(var names=isArray(name)?name:[name];element;){for(var i=0,ii=names.length;i<ii;i++)if(isDefined(value=jqLite.data(element,names[i])))return value;element=element.parentNode||element.nodeType===NODE_TYPE_DOCUMENT_FRAGMENT&&element.host}}function jqLiteEmpty(element){for(jqLiteDealoc(element,!0);element.firstChild;)element.removeChild(element.firstChild)}function jqLiteRemove(element,keepData){keepData||jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)}var JQLitePrototype=JQLite.prototype={ready:function(fn){var fired=!1;function trigger(){fired||(fired=!0,fn())}"complete"===window.document.readyState?window.setTimeout(trigger):(this.on("DOMContentLoaded",trigger),JQLite(window).on("load",trigger))},toString:function(){var value=[];return forEach(this,function(e){value.push(""+e)}),"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[value]=!0});var ALIASED_ATTR={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[nodeName_(element)]&&booleanAttr}function defaultHandlerWrapper(element,event,handler){handler.call(element,event)}function specialMouseHandlerWrapper(target,event,handler){var related=event.relatedTarget;related&&(related===target||jqLiteContains.call(target,related))||handler.call(target,event)}function $$jqLiteProvider(){this.$get=function(){return extend(JQLite,{hasClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteHasClass(node,classes)},addClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteAddClass(node,classes)},removeClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteRemoveClass(node,classes)}})}}function hashKey(obj,nextUidFn){var key=obj&&obj.$$hashKey;if(key)return"function"==typeof key&&(key=obj.$$hashKey()),key;var objType=typeof obj;return key="function"===objType||"object"===objType&&null!==obj?obj.$$hashKey=objType+":"+(nextUidFn||nextUid)():objType+":"+obj}function HashMap(array,isolatedUid){if(isolatedUid){var uid=0;this.nextUid=function(){return++uid}}forEach(array,this.put,this)}forEach({data:jqLiteData,removeData:jqLiteRemoveData,hasData:function(node){for(var key in jqCache[node.ng339])return!0;return!1},cleanData:function(nodes){for(var i=0,ii=nodes.length;i<ii;i++)jqLiteRemoveData(nodes[i])}},function(fn,name){JQLite[name]=fn}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,"$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite.data(element,"$isolateScope")||jqLite.data(element,"$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){if(name=camelCase(name),!isDefined(value))return element.style[name];element.style[name]=value},attr:function(element,name,value){var nodeType=element.nodeType;if(nodeType!==NODE_TYPE_TEXT&&2!==nodeType&&nodeType!==NODE_TYPE_COMMENT){var lowercasedName=lowercase(name);if(BOOLEAN_ATTR[lowercasedName]){if(!isDefined(value))return element[name]||(element.attributes.getNamedItem(name)||noop).specified?lowercasedName:void 0;value?(element[name]=!0,element.setAttribute(name,lowercasedName)):(element[name]=!1,element.removeAttribute(lowercasedName))}else if(isDefined(value))element.setAttribute(name,value);else if(element.getAttribute){var ret=element.getAttribute(name,2);return null===ret?void 0:ret}}},prop:function(element,name,value){if(!isDefined(value))return element[name];element[name]=value},text:function(){return getText.$dv="",getText;function getText(element,value){if(isUndefined(value)){var nodeType=element.nodeType;return nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_TEXT?element.textContent:""}element.textContent=value}}(),val:function(element,value){if(isUndefined(value)){if(element.multiple&&"select"===nodeName_(element)){var result=[];return forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)}),0===result.length?null:result}return element.value}element.value=value},html:function(element,value){if(isUndefined(value))return element.innerHTML;jqLiteDealoc(element,!0),element.innerHTML=value},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key,nodeCount=this.length;if(fn!==jqLiteEmpty&&isUndefined(2===fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)){if(isObject(arg1)){for(i=0;i<nodeCount;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=isUndefined(value)?Math.min(nodeCount,1):nodeCount,j=0;j<jj;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;i<nodeCount;i++)fn(this[i],arg1,arg2);return this}}),forEach({removeData:jqLiteRemoveData,on:function(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(jqLiteAcceptsData(element)){var expandoStore=jqLiteExpandoStore(element,!0),events=expandoStore.events,handle=expandoStore.handle;handle||(handle=expandoStore.handle=function(element,events){var eventHandler=function(event,type){event.isDefaultPrevented=function(){return event.defaultPrevented};var eventFns=events[type||event.type],eventFnsLength=eventFns?eventFns.length:0;if(eventFnsLength){if(isUndefined(event.immediatePropagationStopped)){var originalStopImmediatePropagation=event.stopImmediatePropagation;event.stopImmediatePropagation=function(){event.immediatePropagationStopped=!0,event.stopPropagation&&event.stopPropagation(),originalStopImmediatePropagation&&originalStopImmediatePropagation.call(event)}}event.isImmediatePropagationStopped=function(){return!0===event.immediatePropagationStopped};var handlerWrapper=eventFns.specialHandlerWrapper||defaultHandlerWrapper;eventFnsLength>1&&(eventFns=shallowCopy(eventFns));for(var i=0;i<eventFnsLength;i++)event.isImmediatePropagationStopped()||handlerWrapper(element,event,eventFns[i])}};return eventHandler.elem=element,eventHandler}(element,events));for(var types=type.indexOf(" ")>=0?type.split(" "):[type],i=types.length,addHandler=function(type,specialHandlerWrapper,noEventListener){var eventFns=events[type];eventFns||((eventFns=events[type]=[]).specialHandlerWrapper=specialHandlerWrapper,"$destroy"===type||noEventListener||addEventListenerFn(element,type,handle)),eventFns.push(fn)};i--;)type=types[i],MOUSE_EVENT_MAP[type]?(addHandler(MOUSE_EVENT_MAP[type],specialMouseHandlerWrapper),addHandler(type,void 0,!0)):addHandler(type)}},off:jqLiteOff,one:function(element,type,fn){(element=jqLite(element)).on(type,function onFn(){element.off(type,fn),element.off(type,onFn)}),element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node})},children:function(element){var children=[];return forEach(element.childNodes,function(element){element.nodeType===NODE_TYPE_ELEMENT&&children.push(element)}),children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){var nodeType=element.nodeType;if(nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_DOCUMENT_FRAGMENT)for(var i=0,ii=(node=new JQLite(node)).length;i<ii;i++){var child=node[i];element.appendChild(child)}},prepend:function(element,node){if(element.nodeType===NODE_TYPE_ELEMENT){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){jqLiteWrapNode(element,jqLite(wrapNode).eq(0).clone()[0])},remove:jqLiteRemove,detach:function(element){jqLiteRemove(element,!0)},after:function(element,newElement){for(var index=element,parent=element.parentNode,i=0,ii=(newElement=new JQLite(newElement)).length;i<ii;i++){var node=newElement[i];parent.insertBefore(node,index.nextSibling),index=node}},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){selector&&forEach(selector.split(" "),function(className){var classCondition=condition;isUndefined(classCondition)&&(classCondition=!jqLiteHasClass(element,className)),(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)})},parent:function(element){var parent=element.parentNode;return parent&&parent.nodeType!==NODE_TYPE_DOCUMENT_FRAGMENT?parent:null},next:function(element){return element.nextElementSibling},find:function(element,selector){return element.getElementsByTagName?element.getElementsByTagName(selector):[]},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs,eventName=event.type||event,expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,eventFns=events&&events[eventName];eventFns&&(dummyEvent={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:noop,type:eventName,target:element},event.type&&(dummyEvent=extend(dummyEvent,event)),eventFnsCopy=shallowCopy(eventFns),handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent],forEach(eventFnsCopy,function(fn){dummyEvent.isImmediatePropagationStopped()||fn.apply(element,handlerArgs)}))}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0,ii=this.length;i<ii;i++)isUndefined(value)?isDefined(value=fn(this[i],arg1,arg2,arg3))&&(value=jqLite(value)):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this},JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off}),HashMap.prototype={put:function(key,value){this[hashKey(key,this.nextUid)]=value},get:function(key){return this[hashKey(key,this.nextUid)]},remove:function(key){var value=this[key=hashKey(key,this.nextUid)];return delete this[key],value}};var $$HashMapProvider=[function(){this.$get=[function(){return HashMap}]}],ARROW_ARG=/^([^\(]+?)=>/,FN_ARGS=/^[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector");function stringifyFn(fn){return Function.prototype.toString.call(fn)+" "}function extractArgs(fn){var fnText=stringifyFn(fn).replace(STRIP_COMMENTS,"");return fnText.match(ARROW_ARG)||fnText.match(FN_ARGS)}function createInjector(modulesToLoad,strictDi){strictDi=!0===strictDi;var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new HashMap([],!0),providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(function(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}),value:supportObject(function(name,val){return factory(name,valueFn(val),!1)}),constant:supportObject(function(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}),decorator:function(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(serviceName,caller){throw angular.isString(caller)&&path.push(caller),$injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},protoInstanceInjector=createInternalInjector(instanceCache,function(serviceName,caller){var provider=providerInjector.get(serviceName+providerSuffix,caller);return instanceInjector.invoke(provider.$get,provider,void 0,serviceName)}),instanceInjector=protoInstanceInjector;providerCache["$injector"+providerSuffix]={$get:valueFn(protoInstanceInjector)};var runBlocks=function loadModules(modulesToLoad){assertArg(isUndefined(modulesToLoad)||isArray(modulesToLoad),"modulesToLoad","not an array");var moduleFn,runBlocks=[];forEach(modulesToLoad,function(module){if(!loadedModules.get(module)){loadedModules.put(module,!0);try{isString(module)?(moduleFn=angularModule(module),runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),runInvokeQueue(moduleFn._invokeQueue),runInvokeQueue(moduleFn._configBlocks)):isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}function runInvokeQueue(queue){var i,ii;for(i=0,ii=queue.length;i<ii;i++){var invokeArgs=queue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}}});return runBlocks}(modulesToLoad);return(instanceInjector=protoInstanceInjector.get("$injector")).strictDi=strictDi,forEach(runBlocks,function(fn){fn&&instanceInjector.invoke(fn)}),instanceInjector;function supportObject(delegate){return function(key,value){if(!isObject(key))return delegate(key,value);forEach(key,reverseParams(delegate))}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function enforceReturnValue(name,factory){return function(){var result=instanceInjector.invoke(factory,this);if(isUndefined(result))throw $injectorMinErr("undef","Provider '{0}' must return a value from $get factory method.",name);return result}}function factory(name,factoryFn,enforce){return provider(name,{$get:!1!==enforce?enforceReturnValue(name,factoryFn):factoryFn})}function createInternalInjector(cache,factory){function getService(serviceName,caller){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",serviceName+" <- "+path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName,caller),cache[serviceName]}catch(err){throw cache[serviceName]===INSTANTIATING&&delete cache[serviceName],err}finally{path.shift()}}function injectionArgs(fn,locals,serviceName){for(var args=[],$inject=createInjector.$$annotate(fn,strictDi,serviceName),i=0,length=$inject.length;i<length;i++){var key=$inject[i];if("string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key,serviceName))}return args}return{invoke:function(fn,self,locals,serviceName){"string"==typeof locals&&(serviceName=locals,locals=null);var func,args=injectionArgs(fn,locals,serviceName);return isArray(fn)&&(fn=fn[fn.length-1]),func=fn,msie<=11||"function"!=typeof func||!/^(?:class\b|constructor\()/.test(stringifyFn(func))?fn.apply(self,args):(args.unshift(null),new(Function.prototype.bind.apply(fn,args)))},instantiate:function(Type,locals,serviceName){var ctor=isArray(Type)?Type[Type.length-1]:Type,args=injectionArgs(Type,locals,serviceName);return args.unshift(null),new(Function.prototype.bind.apply(ctor,args))},get:getService,annotate:createInjector.$$annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){var document=$window.document;function scrollTo(elem){if(elem){elem.scrollIntoView();var offset=function(){var offset=scroll.yOffset;if(isFunction(offset))offset=offset();else if(isElement(offset)){var elem=offset[0];offset="fixed"!==$window.getComputedStyle(elem).position?0:elem.getBoundingClientRect().bottom}else isNumber(offset)||(offset=0);return offset}();if(offset){var elemTop=elem.getBoundingClientRect().top;$window.scrollBy(0,elemTop-offset)}}else $window.scrollTo(0,0)}function scroll(hash){var elm,list,result;(hash=isString(hash)?hash:$location.hash())?(elm=document.getElementById(hash))?scrollTo(elm):(list=document.getElementsByName(hash),result=null,Array.prototype.some.call(list,function(element){if("a"===nodeName_(element))return result=element,!0}),(elm=result)?scrollTo(elm):"top"===hash&&scrollTo(null)):scrollTo(null)}return autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(newVal,oldVal){var action,win;newVal===oldVal&&""===newVal||(action=function(){$rootScope.$evalAsync(scroll)},"complete"===(win=win||window).document.readyState?win.setTimeout(action):jqLite(win).on("load",action))}),scroll}]}createInjector.$$annotate=function(fn,strictDi,name){var $inject,last;if("function"==typeof fn){if(!($inject=fn.$inject)){if($inject=[],fn.length){if(strictDi)throw isString(name)&&name||(name=fn.name||function(fn){var args=extractArgs(fn);return args?"function("+(args[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(fn)),$injectorMinErr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",name);forEach(extractArgs(fn)[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})}fn.$inject=$inject}}else isArray(fn)?(assertArgFn(fn[last=fn.length-1],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0);return $inject};var $animateMinErr=minErr("$animate"),ELEMENT_NODE=1;function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function prepareAnimateOptions(options){return isObject(options)?options:{}}var $$CoreAnimateJsProvider=function(){this.$get=noop},$$CoreAnimateQueueProvider=function(){var postDigestQueue=new HashMap,postDigestElements=[];this.$get=["$$AnimateRunner","$rootScope",function($$AnimateRunner,$rootScope){return{enabled:noop,on:noop,off:noop,pin:noop,push:function(element,event,options,domOperation){domOperation&&domOperation(),(options=options||{}).from&&element.css(options.from),options.to&&element.css(options.to),(options.addClass||options.removeClass)&&function(element,add,remove){var data=postDigestQueue.get(element)||{},classesAdded=updateData(data,add,!0),classesRemoved=updateData(data,remove,!1);(classesAdded||classesRemoved)&&(postDigestQueue.put(element,data),postDigestElements.push(element),1===postDigestElements.length&&$rootScope.$$postDigest(handleCSSClassChanges))}(element,options.addClass,options.removeClass);var runner=new $$AnimateRunner;return runner.complete(),runner}};function updateData(data,classes,value){var changed=!1;return classes&&forEach(classes=isString(classes)?classes.split(" "):isArray(classes)?classes:[],function(className){className&&(changed=!0,data[className]=value)}),changed}function handleCSSClassChanges(){forEach(postDigestElements,function(element){var data=postDigestQueue.get(element);if(data){var existing=function(classes){isString(classes)&&(classes=classes.split(" "));var obj=createMap();return forEach(classes,function(klass){klass.length&&(obj[klass]=!0)}),obj}(element.attr("class")),toAdd="",toRemove="";forEach(data,function(status,className){status!==!!existing[className]&&(status?toAdd+=(toAdd.length?" ":"")+className:toRemove+=(toRemove.length?" ":"")+className)}),forEach(element,function(elm){toAdd&&jqLiteAddClass(elm,toAdd),toRemove&&jqLiteRemoveClass(elm,toRemove)}),postDigestQueue.remove(element)}}),postDigestElements.length=0}}]},$AnimateProvider=["$provide",function($provide){var provider=this;this.$$registeredAnimations=Object.create(null),this.register=function(name,factory){if(name&&"."!==name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);var key=name+"-animation";provider.$$registeredAnimations[name.substr(1)]=key,$provide.factory(key,factory)},this.classNameFilter=function(expression){if(1===arguments.length&&(this.$$classNameFilter=expression instanceof RegExp?expression:null,this.$$classNameFilter&&new RegExp("(\\s+|\\/)ng-animate(\\s+|\\/)").test(this.$$classNameFilter.toString())))throw $animateMinErr("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return this.$$classNameFilter},this.$get=["$$animateQueue",function($$animateQueue){function domInsert(element,parentElement,afterElement){if(afterElement){var afterNode=function(element){for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType===ELEMENT_NODE)return elm}}(afterElement);!afterNode||afterNode.parentNode||afterNode.previousElementSibling||(afterElement=null)}afterElement?afterElement.after(element):parentElement.prepend(element)}return{on:$$animateQueue.on,off:$$animateQueue.off,pin:$$animateQueue.pin,enabled:$$animateQueue.enabled,cancel:function(runner){runner.end&&runner.end()},enter:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),domInsert(element,parent=parent||after.parent(),after),$$animateQueue.push(element,"enter",prepareAnimateOptions(options))},move:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),domInsert(element,parent=parent||after.parent(),after),$$animateQueue.push(element,"move",prepareAnimateOptions(options))},leave:function(element,options){return $$animateQueue.push(element,"leave",prepareAnimateOptions(options),function(){element.remove()})},addClass:function(element,className,options){return(options=prepareAnimateOptions(options)).addClass=mergeClasses(options.addclass,className),$$animateQueue.push(element,"addClass",options)},removeClass:function(element,className,options){return(options=prepareAnimateOptions(options)).removeClass=mergeClasses(options.removeClass,className),$$animateQueue.push(element,"removeClass",options)},setClass:function(element,add,remove,options){return(options=prepareAnimateOptions(options)).addClass=mergeClasses(options.addClass,add),options.removeClass=mergeClasses(options.removeClass,remove),$$animateQueue.push(element,"setClass",options)},animate:function(element,from,to,className,options){return(options=prepareAnimateOptions(options)).from=options.from?extend(options.from,from):from,options.to=options.to?extend(options.to,to):to,className=className||"ng-inline-animate",options.tempClasses=mergeClasses(options.tempClasses,className),$$animateQueue.push(element,"animate",options)}}}]}],$$AnimateAsyncRunFactoryProvider=function(){this.$get=["$$rAF",function($$rAF){var waitQueue=[];function waitForTick(fn){waitQueue.push(fn),waitQueue.length>1||$$rAF(function(){for(var i=0;i<waitQueue.length;i++)waitQueue[i]();waitQueue=[]})}return function(){var passed=!1;return waitForTick(function(){passed=!0}),function(callback){passed?callback():waitForTick(callback)}}}]},$$AnimateRunnerFactoryProvider=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function($q,$sniffer,$$animateAsyncRun,$document,$timeout){function AnimateRunner(host){this.setHost(host);var rafTick=$$animateAsyncRun();this._doneCallbacks=[],this._tick=function(fn){var doc=$document[0];doc&&doc.hidden?function(fn){$timeout(fn,0,!1)}(fn):rafTick(fn)},this._state=0}return AnimateRunner.chain=function(chain,callback){var index=0;!function next(){if(index===chain.length)return void callback(!0);chain[index](function(response){!1!==response?(index++,next()):callback(!1)})}()},AnimateRunner.all=function(runners,callback){var count=0,status=!0;function onProgress(response){status=status&&response,++count===runners.length&&callback(status)}forEach(runners,function(runner){runner.done(onProgress)})},AnimateRunner.prototype={setHost:function(host){this.host=host||{}},done:function(fn){2===this._state?fn():this._doneCallbacks.push(fn)},progress:noop,getPromise:function(){if(!this.promise){var self=this;this.promise=$q(function(resolve,reject){self.done(function(status){!1===status?reject():resolve()})})}return this.promise},then:function(resolveHandler,rejectHandler){return this.getPromise().then(resolveHandler,rejectHandler)},catch:function(handler){return this.getPromise().catch(handler)},finally:function(handler){return this.getPromise().finally(handler)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(response){var self=this;0===self._state&&(self._state=1,self._tick(function(){self._resolve(response)}))},_resolve:function(response){2!==this._state&&(forEach(this._doneCallbacks,function(fn){fn(response)}),this._doneCallbacks.length=0,this._state=2)}},AnimateRunner}]},$CoreAnimateCssProvider=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function($$rAF,$q,$$AnimateRunner){return function(element,initialOptions){var options=initialOptions||{};options.$$prepared||(options=copy(options)),options.cleanupStyles&&(options.from=options.to=null),options.from&&(element.css(options.from),options.from=null);var closed,runner=new $$AnimateRunner;return{start:run,end:run};function run(){return $$rAF(function(){!function(){options.addClass&&(element.addClass(options.addClass),options.addClass=null);options.removeClass&&(element.removeClass(options.removeClass),options.removeClass=null);options.to&&(element.css(options.to),options.to=null)}(),closed||runner.complete(),closed=!0}),runner}}}]};function Browser(window,document,$log,$sniffer){var self=this,location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;var outstandingRequestCount=0,outstandingRequestCallbacks=[];function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{if(0===--outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()}catch(e){$log.error(e)}}}self.$$completeOutstandingRequest=completeOutstandingRequest,self.$$incOutstandingRequestCount=function(){outstandingRequestCount++},self.notifyWhenNoOutstandingRequests=function(callback){0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var cachedState,lastHistoryState,lastBrowserUrl=location.href,baseElement=document.find("base"),pendingLocation=null,getCurrentState=$sniffer.history?function(){try{return history.state}catch(e){}}:noop;cacheState(),lastHistoryState=cachedState,self.url=function(url,replace,state){if(isUndefined(state)&&(state=null),location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),url){var sameState=lastHistoryState===state;if(lastBrowserUrl===url&&(!$sniffer.history||sameState))return self;var sameBase=lastBrowserUrl&&stripHash(lastBrowserUrl)===stripHash(url);return lastBrowserUrl=url,lastHistoryState=state,!$sniffer.history||sameBase&&sameState?(sameBase||(pendingLocation=url),replace?location.replace(url):sameBase?location.hash=function(url){var index=url.indexOf("#");return-1===index?"":url.substr(index)}(url):location.href=url,location.href!==url&&(pendingLocation=url)):(history[replace?"replaceState":"pushState"](state,"",url),cacheState(),lastHistoryState=cachedState),pendingLocation&&(pendingLocation=url),self}return pendingLocation||location.href.replace(/%27/g,"'")},self.state=function(){return cachedState};var urlChangeListeners=[],urlChangeInit=!1;function cacheStateAndFireUrlChange(){pendingLocation=null,cacheState(),fireUrlChange()}var lastCachedState=null;function cacheState(){equals(cachedState=isUndefined(cachedState=getCurrentState())?null:cachedState,lastCachedState)&&(cachedState=lastCachedState),lastCachedState=cachedState}function fireUrlChange(){lastBrowserUrl===self.url()&&lastHistoryState===cachedState||(lastBrowserUrl=self.url(),lastHistoryState=cachedState,forEach(urlChangeListeners,function(listener){listener(self.url(),cachedState)}))}self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",cacheStateAndFireUrlChange),jqLite(window).on("hashchange",cacheStateAndFireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.$$applicationDestroyed=function(){jqLite(window).off("hashchange popstate",cacheStateAndFireUrlChange)},self.$$checkUrlChange=fireUrlChange,self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?:)?\/\/[^\/]*/,""):""},self.defer=function(fn,delay){var timeoutId;return outstandingRequestCount++,timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId],completeOutstandingRequest(fn)},delay||0),pendingDeferIds[timeoutId]=!0,timeoutId},self.defer.cancel=function(deferId){return!!pendingDeferIds[deferId]&&(delete pendingDeferIds[deferId],clearTimeout(deferId),completeOutstandingRequest(noop),!0)}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){var caches={};function cacheFactory(cacheId,options){if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data=createMap(),capacity=options&&options.capacity||Number.MAX_VALUE,lruHash=createMap(),freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(!isUndefined(value)){if(capacity<Number.MAX_VALUE)refresh(lruHash[key]||(lruHash[key]={key:key}));return key in data||size++,data[key]=value,size>capacity&&this.remove(staleEnd.key),value}},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;lruEntry===freshEnd&&(freshEnd=lruEntry.p),lruEntry===staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key]}key in data&&(delete data[key],size--)},removeAll:function(){data=createMap(),size=0,lruHash=createMap(),freshEnd=staleEnd=null},destroy:function(){data=null,stats=null,lruHash=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}};function refresh(entry){entry!==freshEnd&&(staleEnd?staleEnd===entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),(freshEnd=entry).n=null)}function link(nextEntry,prevEntry){nextEntry!==prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}}return cacheFactory.info=function(){var info={};return forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()}),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}var $compileMinErr=minErr("$compile");var _UNINITIALIZED_VALUE=new function(){};function $CompileProvider($provide,$$sanitizeUriProvider){var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive:\s*([\w\-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\w\-]+)(?::([^;]+))?;?)/,ALL_OR_NOTHING_ATTRS=function(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}("ngSrc,ngSrcset,src,srcset"),REQUIRE_PREFIX_REGEXP=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/,bindingCache=createMap();function parseIsolateBindings(scope,directiveName,isController){var LOCAL_REGEXP=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,bindings=createMap();return forEach(scope,function(definition,scopeName){if(definition in bindingCache)bindings[scopeName]=bindingCache[definition];else{var match=definition.match(LOCAL_REGEXP);if(!match)throw $compileMinErr("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",directiveName,scopeName,definition,isController?"controller bindings definition":"isolate scope definition");bindings[scopeName]={mode:match[1][0],collection:"*"===match[2],optional:"?"===match[3],attrName:match[4]||scopeName},match[4]&&(bindingCache[definition]=bindings[scopeName])}}),bindings}function parseDirectiveBindings(directive,directiveName){var bindings={isolateScope:null,bindToController:null};if(isObject(directive.scope)&&(!0===directive.bindToController?(bindings.bindToController=parseIsolateBindings(directive.scope,directiveName,!0),bindings.isolateScope={}):bindings.isolateScope=parseIsolateBindings(directive.scope,directiveName,!1)),isObject(directive.bindToController)&&(bindings.bindToController=parseIsolateBindings(directive.bindToController,directiveName,!0)),isObject(bindings.bindToController)){var controller=directive.controller,controllerAs=directive.controllerAs;if(!controller)throw $compileMinErr("noctrl","Cannot bind to controller without directive '{0}'s controller.",directiveName);if(!identifierForController(controller,controllerAs))throw $compileMinErr("noident","Cannot bind to controller without identifier for directive '{0}'.",directiveName)}return bindings}this.directive=function registerDirective(name,directiveFactory){return assertNotHasOwnProperty(name,"directive"),isString(name)?(!function(name){var letter=name.charAt(0);if(!letter||letter!==lowercase(letter))throw $compileMinErr("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",name);if(name!==name.trim())throw $compileMinErr("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",name)}(name),assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=function(directive){var require=directive.require||directive.controller&&directive.name;return!isArray(require)&&isObject(require)&&forEach(require,function(value,key){var match=value.match(REQUIRE_PREFIX_REGEXP);value.substring(match[0].length)||(require[key]=match[0]+key)}),require}(directive),directive.restrict=directive.restrict||"EA",directive.$$moduleName=directiveFactory.$$moduleName,directives.push(directive)}catch(e){$exceptionHandler(e)}}),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.component=function(name,options){var controller=options.controller||function(){};function factory($injector){function makeInjectable(fn){return isFunction(fn)||isArray(fn)?function(tElement,tAttrs){return $injector.invoke(fn,this,{$element:tElement,$attrs:tAttrs})}:fn}var template=options.template||options.templateUrl?options.template:"",ddo={controller:controller,controllerAs:identifierForController(options.controller)||options.controllerAs||"$ctrl",template:makeInjectable(template),templateUrl:makeInjectable(options.templateUrl),transclude:options.transclude,scope:{},bindToController:options.bindings||{},restrict:"E",require:options.require};return forEach(options,function(val,key){"$"===key.charAt(0)&&(ddo[key]=val)}),ddo}return forEach(options,function(val,key){"$"===key.charAt(0)&&(factory[key]=val,isFunction(controller)&&(controller[key]=val))}),factory.$inject=["$injector"],this.directive(name,factory)},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()};var debugInfoEnabled=!0;this.debugInfoEnabled=function(enabled){return isDefined(enabled)?(debugInfoEnabled=enabled,this):debugInfoEnabled};var TTL=10;this.onChangesTtl=function(value){return arguments.length?(TTL=value,this):TTL};var commentDirectivesEnabledConfig=!0;this.commentDirectivesEnabled=function(value){return arguments.length?(commentDirectivesEnabledConfig=value,this):commentDirectivesEnabledConfig};var cssClassDirectivesEnabledConfig=!0;this.cssClassDirectivesEnabled=function(value){return arguments.length?(cssClassDirectivesEnabledConfig=value,this):cssClassDirectivesEnabledConfig},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$templateRequest,$parse,$controller,$rootScope,$sce,$animate,$$sanitizeUri){var onChangesQueue,SIMPLE_ATTR_NAME=/^\w/,specialAttrHolder=window.document.createElement("div"),commentDirectivesEnabled=commentDirectivesEnabledConfig,cssClassDirectivesEnabled=cssClassDirectivesEnabledConfig,onChangesTtl=TTL;function flushOnChangesQueue(){try{if(!--onChangesTtl)throw onChangesQueue=void 0,$compileMinErr("infchng","{0} $onChanges() iterations reached. Aborting!\n",TTL);$rootScope.$apply(function(){for(var errors=[],i=0,ii=onChangesQueue.length;i<ii;++i)try{onChangesQueue[i]()}catch(e){errors.push(e)}if(onChangesQueue=void 0,errors.length)throw errors})}finally{onChangesTtl++}}function Attributes(element,attributesToCopy){if(attributesToCopy){var i,l,key,keys=Object.keys(attributesToCopy);for(i=0,l=keys.length;i<l;i++)this[key=keys[i]]=attributesToCopy[key]}else this.$attr={};this.$$element=element}function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses);toAdd&&toAdd.length&&$animate.addClass(this.$$element,toAdd);var toRemove=tokenDifference(oldClasses,newClasses);toRemove&&toRemove.length&&$animate.removeClass(this.$$element,toRemove)},$set:function(key,value,writeAttr,attrName){var nodeName,booleanKey=getBooleanAttrName(this.$$element[0],key),aliasedKey=ALIASED_ATTR[key],observer=key;if(booleanKey?(this.$$element.prop(key,value),attrName=booleanKey):aliasedKey&&(this[aliasedKey]=value,observer=aliasedKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key])||(this.$attr[key]=attrName=snake_case(key,"-")),"a"===(nodeName=nodeName_(this.$$element))&&("href"===key||"xlinkHref"===key)||"img"===nodeName&&"src"===key)this[key]=value=$$sanitizeUri(value,"src"===key);else if("img"===nodeName&&"srcset"===key&&isDefined(value)){for(var result="",trimmedSrcset=trim(value),pattern=/\s/.test(trimmedSrcset)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,rawUris=trimmedSrcset.split(pattern),nbrUrisWith2parts=Math.floor(rawUris.length/2),i=0;i<nbrUrisWith2parts;i++){var innerIdx=2*i;result+=$$sanitizeUri(trim(rawUris[innerIdx]),!0),result+=" "+trim(rawUris[innerIdx+1])}var lastTuple=trim(rawUris[2*i]).split(/\s/);result+=$$sanitizeUri(trim(lastTuple[0]),!0),2===lastTuple.length&&(result+=" "+trim(lastTuple[1])),this[key]=value=result}!1!==writeAttr&&(null===value||isUndefined(value)?this.$$element.removeAttr(attrName):SIMPLE_ATTR_NAME.test(attrName)?this.$$element.attr(attrName,value):function(element,attrName,value){specialAttrHolder.innerHTML="<span "+attrName+">";var attributes=specialAttrHolder.firstChild.attributes,attribute=attributes[0];attributes.removeNamedItem(attribute.name),attribute.value=value,element.attributes.setNamedItem(attribute)}(this.$$element[0],attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[observer],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers=createMap()),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync(function(){listeners.$$inter||!attrs.hasOwnProperty(key)||isUndefined(attrs[key])||fn(attrs[key])}),function(){arrayRemove(listeners,fn)}}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"===startSymbol&&"}}"===endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/,MULTI_ELEMENT_DIR_RE=/^(.+)Start$/;return compile.$$addBindingInfo=debugInfoEnabled?function($element,binding){var bindings=$element.data("$binding")||[];isArray(binding)?bindings=bindings.concat(binding):bindings.push(binding),$element.data("$binding",bindings)}:noop,compile.$$addBindingClass=debugInfoEnabled?function($element){safeAddClass($element,"ng-binding")}:noop,compile.$$addScopeInfo=debugInfoEnabled?function($element,scope,isolated,noTemplate){var dataName=isolated?noTemplate?"$isolateScopeNoTemplate":"$isolateScope":"$scope";$element.data(dataName,scope)}:noop,compile.$$addScopeClass=debugInfoEnabled?function($element,isolated){safeAddClass($element,isolated?"ng-isolate-scope":"ng-scope")}:noop,compile.$$createComment=function(directiveName,comment){var content="";return debugInfoEnabled&&(content=" "+(directiveName||"")+": ",comment&&(content+=comment+" ")),window.document.createComment(content)},compile;function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes));for(var NOT_EMPTY=/\S+/,i=0,len=$compileNodes.length;i<len;i++){var domNode=$compileNodes[i];domNode.nodeType===NODE_TYPE_TEXT&&domNode.nodeValue.match(NOT_EMPTY)&&jqLiteWrapNode(domNode,$compileNodes[i]=window.document.createElement("span"))}var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);compile.$$addScopeClass($compileNodes);var namespace=null;return function(scope,cloneConnectFn,options){assertArg(scope,"scope"),previousCompileContext&&previousCompileContext.needsNewScope&&(scope=scope.$parent.$new());var parentElement,node,$linkNode,parentBoundTranscludeFn=(options=options||{}).parentBoundTranscludeFn,transcludeControllers=options.transcludeControllers,futureParentElement=options.futureParentElement;if(parentBoundTranscludeFn&&parentBoundTranscludeFn.$$boundTransclude&&(parentBoundTranscludeFn=parentBoundTranscludeFn.$$boundTransclude),namespace||(node=(parentElement=futureParentElement)&&parentElement[0],namespace=node&&"foreignobject"!==nodeName_(node)&&toString.call(node).match(/SVG/)?"svg":"html"),$linkNode="html"!==namespace?jqLite(wrapTemplate(namespace,jqLite("<div>").append($compileNodes).html())):cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes,transcludeControllers)for(var controllerName in transcludeControllers)$linkNode.data("$"+controllerName+"Controller",transcludeControllers[controllerName].instance);return compile.$$addScopeInfo($linkNode,scope),cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn),$linkNode}}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){for(var attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,nodeLinkFnFound,linkFns=[],i=0;i<nodeList.length;i++)attrs=new Attributes,(nodeLinkFn=(directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:void 0,ignoreDirective)).length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null)&&nodeLinkFn.scope&&compile.$$addScopeClass(attrs.$$element),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?(nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude:transcludeFn),(nodeLinkFn||childLinkFn)&&(linkFns.push(i,nodeLinkFn,childLinkFn),linkFnFound=!0,nodeLinkFnFound=nodeLinkFnFound||nodeLinkFn),previousCompileContext=null;return linkFnFound?function(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,idx,childBoundTranscludeFn,stableNodeList;if(nodeLinkFnFound){var nodeListLength=nodeList.length;for(stableNodeList=new Array(nodeListLength),i=0;i<linkFns.length;i+=3)idx=linkFns[i],stableNodeList[idx]=nodeList[idx]}else stableNodeList=nodeList;for(i=0,ii=linkFns.length;i<ii;)node=stableNodeList[linkFns[i++]],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],nodeLinkFn?(nodeLinkFn.scope?(childScope=scope.$new(),compile.$$addScopeInfo(jqLite(node),childScope)):childScope=scope,childBoundTranscludeFn=nodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn):!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn?parentBoundTranscludeFn:!parentBoundTranscludeFn&&transcludeFn?createBoundTranscludeFn(scope,transcludeFn):null,nodeLinkFn(childLinkFn,childScope,node,$rootElement,childBoundTranscludeFn)):childLinkFn&&childLinkFn(scope,node.childNodes,void 0,parentBoundTranscludeFn)}:null}function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn){function boundTranscludeFn(transcludedScope,cloneFn,controllers,futureParentElement,containingScope){return transcludedScope||((transcludedScope=scope.$new(!1,containingScope)).$$transcluded=!0),transcludeFn(transcludedScope,cloneFn,{parentBoundTranscludeFn:previousBoundTranscludeFn,transcludeControllers:controllers,futureParentElement:futureParentElement})}var boundSlots=boundTranscludeFn.$$slots=createMap();for(var slotName in transcludeFn.$$slots)transcludeFn.$$slots[slotName]?boundSlots[slotName]=createBoundTranscludeFn(scope,transcludeFn.$$slots[slotName],previousBoundTranscludeFn):boundSlots[slotName]=null;return boundTranscludeFn}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,nodeName,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case NODE_TYPE_ELEMENT:addDirective(directives,directiveNormalize(nodeName=nodeName_(node)),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,isNgAttr,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;j<jj;j++){var attrStartName=!1,attrEndName=!1;name=(attr=nAttrs[j]).name,value=trim(attr.value),ngAttrName=directiveNormalize(name),(isNgAttr=NG_ATTR_BINDING.test(ngAttrName))&&(name=name.replace(PREFIX_REGEXP,"").substr(8).replace(/_(.)/g,function(match,letter){return letter.toUpperCase()}));var multiElementMatch=ngAttrName.match(MULTI_ELEMENT_DIR_RE);multiElementMatch&&directiveIsMultiElement(multiElementMatch[1])&&(attrStartName=name,attrEndName=name.substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),attrsMap[nName=directiveNormalize(name.toLowerCase())]=name,!isNgAttr&&attrs.hasOwnProperty(nName)||(attrs[nName]=value,getBooleanAttrName(node,nName)&&(attrs[nName]=!0)),addAttrInterpolateDirective(node,directives,value,nName,isNgAttr),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}if("input"===nodeName&&"hidden"===node.getAttribute("type")&&node.setAttribute("autocomplete","off"),!cssClassDirectivesEnabled)break;if(isObject(className=node.className)&&(className=className.animVal),isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)addDirective(directives,nName=directiveNormalize(match[2]),"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case NODE_TYPE_TEXT:if(11===msie)for(;node.parentNode&&node.nextSibling&&node.nextSibling.nodeType===NODE_TYPE_TEXT;)node.nodeValue=node.nodeValue+node.nextSibling.nodeValue,node.parentNode.removeChild(node.nextSibling);!function(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:function(templateNode){var templateNodeParent=templateNode.parent(),hasCompileParent=!!templateNodeParent.length;return hasCompileParent&&compile.$$addBindingClass(templateNodeParent),function(scope,node){var parent=node.parent();hasCompileParent||compile.$$addBindingClass(parent),compile.$$addBindingInfo(parent,interpolateFn.expressions),scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})}}})}(directives,node.nodeValue);break;case NODE_TYPE_COMMENT:if(!commentDirectivesEnabled)break;!function(node,directives,attrs,maxPriority,ignoreDirective){try{var match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue);if(match){var nName=directiveNormalize(match[1]);addDirective(directives,nName,"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2]))}}catch(e){}}(node,directives,attrs,maxPriority,ignoreDirective)}return directives.sort(byPriority),directives}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart))do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);node.nodeType===NODE_TYPE_ELEMENT&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(depth>0);else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function compilationGenerator(eager,$compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){var compiled;return eager?compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext):function(){return compiled||(compiled=compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext),$compileNodes=transcludeFn=previousCompileContext=null),compiled.apply(this,arguments)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){previousCompileContext=previousCompileContext||{};for(var directive,directiveName,$template,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,newScopeDirective=previousCompileContext.newScopeDirective,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasTemplate=!1,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,didScanForMultipleTransclusion=!1,mightHaveMultipleTransclusionError=!1,i=0,ii=directives.length;i<ii;i++){var attrStart=(directive=directives[i]).$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=void 0,terminalPriority>directive.priority)break;if((directiveValue=directive.scope)&&(directive.templateUrl||(isObject(directiveValue)?(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective||newScopeDirective,directive,$compileNode),newIsolateScopeDirective=directive):assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode)),newScopeDirective=newScopeDirective||directive),directiveName=directive.name,!didScanForMultipleTransclusion&&(directive.replace&&(directive.templateUrl||directive.template)||directive.transclude&&!directive.$$tlb)){for(var candidateDirective,scanningIndex=i+1;candidateDirective=directives[scanningIndex++];)if(candidateDirective.transclude&&!candidateDirective.$$tlb||candidateDirective.replace&&(candidateDirective.templateUrl||candidateDirective.template)){mightHaveMultipleTransclusionError=!0;break}didScanForMultipleTransclusion=!0}if(!directive.templateUrl&&directive.controller&&(directiveValue=directive.controller,controllerDirectives=controllerDirectives||createMap(),assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),directiveValue=directive.transclude)if(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),"element"===directiveValue)hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=$compileNode,$compileNode=templateAttrs.$$element=jqLite(compile.$$createComment(directiveName,templateAttrs[directiveName])),compileNode=$compileNode[0],replaceWith(jqCollection,sliceArgs($template),compileNode),$template[0].$$parentNode=$template[0].parentNode,childTranscludeFn=compilationGenerator(mightHaveMultipleTransclusionError,$template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective});else{var slots=createMap();if($template=jqLite(jqLiteClone(compileNode)).contents(),isObject(directiveValue)){$template=[];var slotMap=createMap(),filledSlots=createMap();for(var slotName in forEach(directiveValue,function(elementSelector,slotName){var optional="?"===elementSelector.charAt(0);elementSelector=optional?elementSelector.substring(1):elementSelector,slotMap[elementSelector]=slotName,slots[slotName]=null,filledSlots[slotName]=optional}),forEach($compileNode.contents(),function(node){var slotName=slotMap[directiveNormalize(nodeName_(node))];slotName?(filledSlots[slotName]=!0,slots[slotName]=slots[slotName]||[],slots[slotName].push(node)):$template.push(node)}),forEach(filledSlots,function(filled,slotName){if(!filled)throw $compileMinErr("reqslot","Required transclusion slot `{0}` was not filled.",slotName)}),slots)slots[slotName]&&(slots[slotName]=compilationGenerator(mightHaveMultipleTransclusionError,slots[slotName],transcludeFn))}$compileNode.empty(),(childTranscludeFn=compilationGenerator(mightHaveMultipleTransclusionError,$template,transcludeFn,void 0,void 0,{needsNewScope:directive.$$isolateScope||directive.$$newScope})).$$slots=slots}if(directive.template)if(hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template,directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLiteIsTextNode(directiveValue)?[]:removeComments(wrapTemplate(directive.templateNamespace,trim(directiveValue))),compileNode=$template[0],1!==$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));(newIsolateScopeDirective||newScopeDirective)&&markDirectiveScope(templateDirectives,newIsolateScopeDirective,newScopeDirective),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directive.replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newScopeDirective:newScopeDirective!==directive&&newScopeDirective,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;else if(directive.compile)try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn);var context=directive.$$originalDirective||directive;isFunction(linkFn)?addLinkFns(null,bind(context,linkFn),attrStart,attrEnd):linkFn&&addLinkFns(bind(context,linkFn.pre),bind(context,linkFn.post),attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&!0===newScopeDirective.scope,nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective,nodeLinkFn.templateOnThisElement=hasTemplate,nodeLinkFn.transclude=childTranscludeFn,previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective,nodeLinkFn;function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,pre.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,post.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){var i,ii,linkFn,isolateScope,controllerScope,elementControllers,transcludeFn,$element,attrs,scopeBindingInfo;for(var name in compileNode===linkNode?(attrs=templateAttrs,$element=templateAttrs.$$element):attrs=new Attributes($element=jqLite(linkNode),templateAttrs),controllerScope=scope,newIsolateScopeDirective?isolateScope=scope.$new(!0):newScopeDirective&&(controllerScope=scope.$parent),boundTranscludeFn&&((transcludeFn=function(scope,cloneAttachFn,futureParentElement,slotName){var transcludeControllers;isScope(scope)||(slotName=futureParentElement,futureParentElement=cloneAttachFn,cloneAttachFn=scope,scope=void 0);hasElementTranscludeDirective&&(transcludeControllers=elementControllers);futureParentElement||(futureParentElement=hasElementTranscludeDirective?$element.parent():$element);if(!slotName)return boundTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild);var slotTranscludeFn=boundTranscludeFn.$$slots[slotName];if(slotTranscludeFn)return slotTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild);if(isUndefined(slotTranscludeFn))throw $compileMinErr("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',slotName,startingTag($element))}).$$boundTransclude=boundTranscludeFn,transcludeFn.isSlotFilled=function(slotName){return!!boundTranscludeFn.$$slots[slotName]}),controllerDirectives&&(elementControllers=function($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope,newIsolateScopeDirective){var elementControllers=createMap();for(var controllerKey in controllerDirectives){var directive=controllerDirectives[controllerKey],locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn},controller=directive.controller;"@"===controller&&(controller=attrs[directive.name]);var controllerInstance=$controller(controller,locals,!0,directive.controllerAs);elementControllers[directive.name]=controllerInstance,$element.data("$"+directive.name+"Controller",controllerInstance.instance)}return elementControllers}($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope,newIsolateScopeDirective)),newIsolateScopeDirective&&(compile.$$addScopeInfo($element,isolateScope,!0,!(templateDirective&&(templateDirective===newIsolateScopeDirective||templateDirective===newIsolateScopeDirective.$$originalDirective))),compile.$$addScopeClass($element,!0),isolateScope.$$isolateBindings=newIsolateScopeDirective.$$isolateBindings,(scopeBindingInfo=initializeDirectiveBindings(scope,attrs,isolateScope,isolateScope.$$isolateBindings,newIsolateScopeDirective)).removeWatches&&isolateScope.$on("$destroy",scopeBindingInfo.removeWatches)),elementControllers){var controllerDirective=controllerDirectives[name],controller=elementControllers[name],bindings=controllerDirective.$$bindings.bindToController;controller.identifier&&bindings?controller.bindingInfo=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective):controller.bindingInfo={};var controllerResult=controller();controllerResult!==controller.instance&&(controller.instance=controllerResult,$element.data("$"+controllerDirective.name+"Controller",controllerResult),controller.bindingInfo.removeWatches&&controller.bindingInfo.removeWatches(),controller.bindingInfo=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective))}for(forEach(controllerDirectives,function(controllerDirective,name){var require=controllerDirective.require;controllerDirective.bindToController&&!isArray(require)&&isObject(require)&&extend(elementControllers[name].instance,getControllers(name,require,$element,elementControllers))}),forEach(elementControllers,function(controller){var controllerInstance=controller.instance;if(isFunction(controllerInstance.$onChanges))try{controllerInstance.$onChanges(controller.bindingInfo.initialChanges)}catch(e){$exceptionHandler(e)}if(isFunction(controllerInstance.$onInit))try{controllerInstance.$onInit()}catch(e){$exceptionHandler(e)}isFunction(controllerInstance.$doCheck)&&(controllerScope.$watch(function(){controllerInstance.$doCheck()}),controllerInstance.$doCheck()),isFunction(controllerInstance.$onDestroy)&&controllerScope.$on("$destroy",function(){controllerInstance.$onDestroy()})}),i=0,ii=preLinkFns.length;i<ii;i++)invokeLinkFn(linkFn=preLinkFns[i],linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,void 0,boundTranscludeFn),i=postLinkFns.length-1;i>=0;i--)invokeLinkFn(linkFn=postLinkFns[i],linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);forEach(elementControllers,function(controller){var controllerInstance=controller.instance;isFunction(controllerInstance.$postLink)&&controllerInstance.$postLink()})}}function getControllers(directiveName,require,$element,elementControllers){var value;if(isString(require)){var match=require.match(REQUIRE_PREFIX_REGEXP),name=require.substring(match[0].length),inheritType=match[1]||match[3],optional="?"===match[2];if("^^"===inheritType?$element=$element.parent():value=(value=elementControllers&&elementControllers[name])&&value.instance,!value){var dataName="$"+name+"Controller";value=inheritType?$element.inheritedData(dataName):$element.data(dataName)}if(!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",name,directiveName)}else if(isArray(require)){value=[];for(var i=0,ii=require.length;i<ii;i++)value[i]=getControllers(directiveName,require[i],$element,elementControllers)}else isObject(require)&&(value={},forEach(require,function(controller,property){value[property]=getControllers(directiveName,controller,$element,elementControllers)}));return value||null}function markDirectiveScope(directives,isolateScope,newScope){for(var j=0,jj=directives.length;j<jj;j++)directives[j]=inherit(directives[j],{$$isolateScope:isolateScope,$$newScope:newScope})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++)try{if(directive=directives[i],(isUndefined(maxPriority)||maxPriority>directive.priority)&&-1!==directive.restrict.indexOf(location)){if(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),!directive.$$bindings){var bindings=directive.$$bindings=parseDirectiveBindings(directive,directive.name);isObject(bindings.isolateScope)&&(directive.$$isolateBindings=bindings.isolateScope)}tDirectives.push(directive),match=directive}}catch(e){$exceptionHandler(e)}return match}function directiveIsMultiElement(name){if(hasDirectives.hasOwnProperty(name))for(var directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++)if(directives[i].multiElement)return!0;return!1}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr;forEach(dst,function(value,key){"$"!==key.charAt(0)&&(src[key]&&src[key]!==value&&(value+=("style"===key?";":" ")+src[key]),dst.$set(key,value,!0,srcAttr[key]))}),forEach(src,function(value,key){dst.hasOwnProperty(key)||"$"===key.charAt(0)||(dst[key]=value,"class"!==key&&"style"!==key&&(dstAttr[key]=srcAttr[key]))})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=inherit(origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl,templateNamespace=origAsyncDirective.templateNamespace;return $compileNode.empty(),$templateRequest(templateUrl).then(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLiteIsTextNode(content)?[]:removeComments(wrapTemplate(templateNamespace,trim(content))),compileNode=$template[0],1!==$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectiveScope(templateDirectives,!0),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,function(node,i){node===compileNode&&($rootElement[i]=$compileNode[0])}),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(!scope.$$destroyed){if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace||(linkNode=jqLiteClone(compileNode)),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode),safeAddClass(jqLite(linkNode),oldClasses)}childBoundTranscludeFn=afterTemplateNodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}}linkQueue=null}),function(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;scope.$$destroyed||(linkQueue?linkQueue.push(scope,node,rootElement,childBoundTranscludeFn):(afterTemplateNodeLinkFn.transcludeOnThisElement&&(childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)),afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn)))}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){function wrapModuleNameIfDefined(moduleName){return moduleName?" (module: "+moduleName+")":""}if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",previousDirective.name,wrapModuleNameIfDefined(previousDirective.$$moduleName),directive.name,wrapModuleNameIfDefined(directive.$$moduleName),what,startingTag(element))}function wrapTemplate(type,template){switch(type=lowercase(type||"html")){case"svg":case"math":var wrapper=window.document.createElement("div");return wrapper.innerHTML="<"+type+">"+template+"</"+type+">",wrapper.childNodes[0].childNodes;default:return template}}function addAttrInterpolateDirective(node,directives,value,name,allOrNothing){var trustedContext=function(node,attrNormalizedName){if("srcdoc"===attrNormalizedName)return $sce.HTML;var tag=nodeName_(node);if("src"===attrNormalizedName||"ngSrc"===attrNormalizedName){if(-1===["img","video","audio","source","track"].indexOf(tag))return $sce.RESOURCE_URL}else if("xlinkHref"===attrNormalizedName||"form"===tag&&"action"===attrNormalizedName)return $sce.RESOURCE_URL}(node,name);allOrNothing=ALL_OR_NOTHING_ATTRS[name]||allOrNothing;var interpolateFn=$interpolate(value,!0,trustedContext,allOrNothing);if(interpolateFn){if("multiple"===name&&"select"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));directives.push({priority:100,compile:function(){return{pre:function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers=createMap());if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var newValue=attr[name];newValue!==value&&(interpolateFn=newValue&&$interpolate(newValue,!0,trustedContext,allOrNothing),value=newValue),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(newValue,oldValue){"class"===name&&newValue!==oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)}))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;i<ii;i++)if($rootElement[i]===firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;j<jj;j++,j2++)j2<jj?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1,$rootElement.context===firstElementToRemove&&($rootElement.context=newNode);break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=window.document.createDocumentFragment();for(i=0;i<removeCount;i++)fragment.appendChild(elementsToRemove[i]);for(jqLite.hasData(firstElementToRemove)&&(jqLite.data(newNode,jqLite.data(firstElementToRemove)),jqLite(firstElementToRemove).off("$destroy")),jqLite.cleanData(fragment.querySelectorAll("*")),i=1;i<removeCount;i++)delete elementsToRemove[i];elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}function invokeLinkFn(linkFn,scope,$element,attrs,controllers,transcludeFn){try{linkFn(scope,$element,attrs,controllers,transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}function initializeDirectiveBindings(scope,attrs,destination,bindings,directive){var changes,removeWatchCollection=[],initialChanges={};function recordChanges(key,currentValue,previousValue){isFunction(destination.$onChanges)&&currentValue!==previousValue&&(onChangesQueue||(scope.$$postDigest(flushOnChangesQueue),onChangesQueue=[]),changes||(changes={},onChangesQueue.push(triggerOnChangesHook)),changes[key]&&(previousValue=changes[key].previousValue),changes[key]=new SimpleChange(previousValue,currentValue))}function triggerOnChangesHook(){destination.$onChanges(changes),changes=void 0}return forEach(bindings,function(definition,scopeName){var lastValue,parentGet,parentSet,compare,removeWatch,attrName=definition.attrName,optional=definition.optional;switch(definition.mode){case"@":optional||hasOwnProperty.call(attrs,attrName)||(destination[scopeName]=attrs[attrName]=void 0),attrs.$observe(attrName,function(value){if(isString(value)||isBoolean(value)){var oldValue=destination[scopeName];recordChanges(scopeName,value,oldValue),destination[scopeName]=value}}),attrs.$$observers[attrName].$$scope=scope,isString(lastValue=attrs[attrName])?destination[scopeName]=$interpolate(lastValue)(scope):isBoolean(lastValue)&&(destination[scopeName]=lastValue),initialChanges[scopeName]=new SimpleChange(_UNINITIALIZED_VALUE,destination[scopeName]);break;case"=":if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;attrs[attrName]=void 0}if(optional&&!attrs[attrName])break;parentGet=$parse(attrs[attrName]),compare=parentGet.literal?equals:function(a,b){return a===b||a!=a&&b!=b},parentSet=parentGet.assign||function(){throw lastValue=destination[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",attrs[attrName],attrName,directive.name)},lastValue=destination[scopeName]=parentGet(scope);var parentValueWatch=function(parentValue){return compare(parentValue,destination[scopeName])||(compare(parentValue,lastValue)?parentSet(scope,parentValue=destination[scopeName]):destination[scopeName]=parentValue),lastValue=parentValue};parentValueWatch.$stateful=!0,removeWatch=definition.collection?scope.$watchCollection(attrs[attrName],parentValueWatch):scope.$watch($parse(attrs[attrName],parentValueWatch),null,parentGet.literal),removeWatchCollection.push(removeWatch);break;case"<":if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;attrs[attrName]=void 0}if(optional&&!attrs[attrName])break;parentGet=$parse(attrs[attrName]);var initialValue=destination[scopeName]=parentGet(scope);initialChanges[scopeName]=new SimpleChange(_UNINITIALIZED_VALUE,destination[scopeName]),removeWatch=scope.$watch(parentGet,function(newValue,oldValue){if(oldValue===newValue){if(oldValue===initialValue)return;oldValue=initialValue}recordChanges(scopeName,newValue,oldValue),destination[scopeName]=newValue},parentGet.literal),removeWatchCollection.push(removeWatch);break;case"&":if((parentGet=attrs.hasOwnProperty(attrName)?$parse(attrs[attrName]):noop)===noop&&optional)break;destination[scopeName]=function(locals){return parentGet(scope,locals)}}}),{initialChanges:initialChanges,removeWatches:removeWatchCollection.length&&function(){for(var i=0,ii=removeWatchCollection.length;i<ii;++i)removeWatchCollection[i]()}}}}]}function SimpleChange(previous,current){this.previousValue=previous,this.currentValue=current}$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"],SimpleChange.prototype.isFirstChange=function(){return this.previousValue===_UNINITIALIZED_VALUE};var PREFIX_REGEXP=/^((?:x|data)[:\-_])/i;function directiveNormalize(name){return camelCase(name.replace(PREFIX_REGEXP,""))}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token===tokens2[j])continue outer;values+=(values.length>0?" ":"")+token}return values}function removeComments(jqNodes){var i=(jqNodes=jqLite(jqNodes)).length;if(i<=1)return jqNodes;for(;i--;){jqNodes[i].nodeType===NODE_TYPE_COMMENT&&splice.call(jqNodes,i,1)}return jqNodes}var $controllerMinErr=minErr("$controller"),CNTRL_REG=/^(\S+)(\s+as\s+([\w$]+))?$/;function identifierForController(controller,ident){if(ident&&isString(ident))return ident;if(isString(controller)){var match=CNTRL_REG.exec(controller);if(match)return match[3]}}function $ControllerProvider(){var controllers={},globals=!1;this.has=function(name){return controllers.hasOwnProperty(name)},this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.allowGlobals=function(){globals=!0},this.$get=["$injector","$window",function($injector,$window){return function(expression,locals,later,ident){var instance,match,constructor,identifier;if(later=!0===later,ident&&isString(ident)&&(identifier=ident),isString(expression)){if(!(match=expression.match(CNTRL_REG)))throw $controllerMinErr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",expression);constructor=match[1],identifier=identifier||match[3],assertArgFn(expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||(globals?getter($window,constructor,!0):void 0),constructor,!0)}if(later){var controllerPrototype=(isArray(expression)?expression[expression.length-1]:expression).prototype;return instance=Object.create(controllerPrototype||null),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),extend(function(){var result=$injector.invoke(expression,instance,locals,constructor);return result!==instance&&(isObject(result)||isFunction(result))&&(instance=result,identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name)),instance},{instance:instance,identifier:identifier})}return instance=$injector.instantiate(expression,locals,constructor),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),instance};function addIdentifier(locals,identifier,instance,name){if(!locals||!isObject(locals.$scope))throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",name,identifier);locals.$scope[identifier]=instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(exception,cause){$log.error.apply($log,arguments)}}]}var $$ForceReflowProvider=function(){this.$get=["$document",function($document){return function(domNode){return domNode?!domNode.nodeType&&domNode instanceof jqLite&&(domNode=domNode[0]):domNode=$document[0].body,domNode.offsetWidth+1}}]},APPLICATION_JSON="application/json",CONTENT_TYPE_APPLICATION_JSON={"Content-Type":APPLICATION_JSON+";charset=utf-8"},JSON_START=/^\[|^\{(?!\{)/,JSON_ENDS={"[":/]$/,"{":/}$/},JSON_PROTECTION_PREFIX=/^\)\]\}',?\n/,$httpMinErr=minErr("$http"),$httpMinErrLegacyFn=function(method){return function(){throw $httpMinErr("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",method)}};function serializeValue(v){return isObject(v)?isDate(v)?v.toISOString():toJson(v):v}function $HttpParamSerializerProvider(){this.$get=function(){return function(params){if(!params)return"";var parts=[];return forEachSorted(params,function(value,key){null===value||isUndefined(value)||(isArray(value)?forEach(value,function(v){parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(v)))}):parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(value))))}),parts.join("&")}}}function $HttpParamSerializerJQLikeProvider(){this.$get=function(){return function(params){if(!params)return"";var parts=[];return function serialize(toSerialize,prefix,topLevel){if(null===toSerialize||isUndefined(toSerialize))return;isArray(toSerialize)?forEach(toSerialize,function(value,index){serialize(value,prefix+"["+(isObject(value)?index:"")+"]")}):isObject(toSerialize)&&!isDate(toSerialize)?forEachSorted(toSerialize,function(value,key){serialize(value,prefix+(topLevel?"":"[")+key+(topLevel?"":"]"))}):parts.push(encodeUriQuery(prefix)+"="+encodeUriQuery(serializeValue(toSerialize)))}(params,"",!0),parts.join("&")}}}function defaultHttpResponseTransform(data,headers){if(isString(data)){var tempData=data.replace(JSON_PROTECTION_PREFIX,"").trim();if(tempData){var contentType=headers("Content-Type");(contentType&&0===contentType.indexOf(APPLICATION_JSON)||(jsonStart=(str=tempData).match(JSON_START))&&JSON_ENDS[jsonStart[0]].test(str))&&(data=fromJson(tempData))}}var str,jsonStart;return data}function parseHeaders(headers){var i,parsed=createMap();function fillInParsed(key,val){key&&(parsed[key]=parsed[key]?parsed[key]+", "+val:val)}return isString(headers)?forEach(headers.split("\n"),function(line){i=line.indexOf(":"),fillInParsed(lowercase(trim(line.substr(0,i))),trim(line.substr(i+1)))}):isObject(headers)&&forEach(headers,function(headerVal,headerKey){fillInParsed(lowercase(headerKey),trim(headerVal))}),parsed}function headersGetter(headers){var headersObj;return function(name){if(headersObj||(headersObj=parseHeaders(headers)),name){var value=headersObj[lowercase(name)];return void 0===value&&(value=null),value}return headersObj}}function transformData(data,headers,status,fns){return isFunction(fns)?fns(data,headers,status):(forEach(fns,function(fn){data=fn(data,headers,status)}),data)}function isSuccess(status){return 200<=status&&status<300}function $HttpProvider(){var defaults=this.defaults={transformResponse:[defaultHttpResponseTransform],transformRequest:[function(d){return!isObject(d)||(obj=d,"[object File]"===toString.call(obj))||function(obj){return"[object Blob]"===toString.call(obj)}(d)||function(obj){return"[object FormData]"===toString.call(obj)}(d)?d:toJson(d);var obj}],headers:{common:{Accept:"application/json, text/plain, */*"},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},useApplyAsync=!1;this.useApplyAsync=function(value){return isDefined(value)?(useApplyAsync=!!value,this):useApplyAsync};var useLegacyPromise=!0;this.useLegacyPromiseExtensions=function(value){return isDefined(value)?(useLegacyPromise=!!value,this):useLegacyPromise};var interceptorFactories=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function($httpBackend,$$cookieReader,$cacheFactory,$rootScope,$q,$injector){var defaultCache=$cacheFactory("$http");defaults.paramSerializer=isString(defaults.paramSerializer)?$injector.get(defaults.paramSerializer):defaults.paramSerializer;var reversedInterceptors=[];function $http(requestConfig){if(!isObject(requestConfig))throw minErr("$http")("badreq","Http request configuration must be an object.  Received: {0}",requestConfig);if(!isString(requestConfig.url))throw minErr("$http")("badreq","Http request configuration url must be a string.  Received: {0}",requestConfig.url);var config=extend({method:"get",transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse,paramSerializer:defaults.paramSerializer},requestConfig);config.headers=function(config){var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){for(reqHeaderName in lowercaseDefHeaderName=lowercase(defHeaderName),reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return function(headers,config){var headerContent,processedHeaders={};return forEach(headers,function(headerFn,header){isFunction(headerFn)?null!=(headerContent=headerFn(config))&&(processedHeaders[header]=headerContent):processedHeaders[header]=headerFn}),processedHeaders}(reqHeaders,shallowCopy(config))}(requestConfig),config.method=uppercase(config.method),config.paramSerializer=isString(config.paramSerializer)?$injector.get(config.paramSerializer):config.paramSerializer;var requestInterceptors=[],responseInterceptors=[],promise=$q.when(config);return forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&requestInterceptors.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&responseInterceptors.push(interceptor.response,interceptor.responseError)}),promise=chainInterceptors(promise,requestInterceptors),promise=chainInterceptors(promise=promise.then(function(config){var headers=config.headers,reqData=transformData(config.data,headersGetter(headers),void 0,config.transformRequest);isUndefined(reqData)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]});isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials);return function(config,reqData){var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,reqHeaders=config.headers,url=function(url,serializedParams){serializedParams.length>0&&(url+=(-1===url.indexOf("?")?"?":"&")+serializedParams);return url}(config.url,config.paramSerializer(config.params));$http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),!config.cache&&!defaults.cache||!1===config.cache||"GET"!==config.method&&"JSONP"!==config.method||(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache);cache&&(isDefined(cachedResp=cache.get(url))?isPromiseLike(cachedResp)?cachedResp.then(resolvePromiseWithResult,resolvePromiseWithResult):isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3]):resolvePromise(cachedResp,200,{},"OK"):cache.put(url,promise));if(isUndefined(cachedResp)){var xsrfValue=urlIsSameOrigin(config.url)?$$cookieReader()[config.xsrfCookieName||defaults.xsrfCookieName]:void 0;xsrfValue&&(reqHeaders[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue),$httpBackend(config.method,url,reqData,function(status,response,headersString,statusText){cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString),statusText]):cache.remove(url));function resolveHttpPromise(){resolvePromise(response,status,headersString,statusText)}useApplyAsync?$rootScope.$applyAsync(resolveHttpPromise):(resolveHttpPromise(),$rootScope.$$phase||$rootScope.$apply())},reqHeaders,config.timeout,config.withCredentials,config.responseType,createApplyHandlers(config.eventHandlers),createApplyHandlers(config.uploadEventHandlers))}return promise;function createApplyHandlers(eventHandlers){if(eventHandlers){var applyHandlers={};return forEach(eventHandlers,function(eventHandler,key){applyHandlers[key]=function(event){function callEventHandler(){eventHandler(event)}useApplyAsync?$rootScope.$applyAsync(callEventHandler):$rootScope.$$phase?callEventHandler():$rootScope.$apply(callEventHandler)}}),applyHandlers}}function resolvePromise(response,status,headers,statusText){(isSuccess(status=status>=-1?status:0)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText})}function resolvePromiseWithResult(result){resolvePromise(result.data,result.status,shallowCopy(result.headers()),result.statusText)}function removePendingReq(){var idx=$http.pendingRequests.indexOf(config);-1!==idx&&$http.pendingRequests.splice(idx,1)}}(config,reqData).then(transformResponse,transformResponse)}),responseInterceptors),useLegacyPromise?(promise.success=function(fn){return assertArgFn(fn,"fn"),promise.then(function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.error=function(fn){return assertArgFn(fn,"fn"),promise.then(null,function(response){fn(response.data,response.status,response.headers,config)}),promise}):(promise.success=$httpMinErrLegacyFn("success"),promise.error=$httpMinErrLegacyFn("error")),promise;function chainInterceptors(promise,interceptors){for(var i=0,ii=interceptors.length;i<ii;){var thenFn=interceptors[i++],rejectFn=interceptors[i++];promise=promise.then(thenFn,rejectFn)}return interceptors.length=0,promise}function transformResponse(response){var resp=extend({},response);return resp.data=transformData(response.data,response.headers,response.status,config.transformResponse),isSuccess(response.status)?resp:$q.reject(resp)}}return forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))}),$http.pendingRequests=[],function(names){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend({},config||{},{method:name,url:url}))}})}("get","delete","head","jsonp"),function(name){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend({},config||{},{method:name,url:url,data:data}))}})}("post","put","patch"),$http.defaults=defaults,$http}]}function $xhrFactoryProvider(){this.$get=function(){return function(){return new window.XMLHttpRequest}}}function $HttpBackendProvider(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function($browser,$jsonpCallbacks,$document,$xhrFactory){return function($browser,createXhr,$browserDefer,callbacks,rawDocument){return function(method,url,post,callback,headers,timeout,withCredentials,responseType,eventHandlers,uploadEventHandlers){if($browser.$$incOutstandingRequestCount(),url=url||$browser.url(),"jsonp"===lowercase(method))var callbackPath=callbacks.createCallback(url),jsonpDone=function(url,callbackPath,done){url=url.replace("JSON_CALLBACK",callbackPath);var script=rawDocument.createElement("script"),callback=null;return script.type="text/javascript",script.src=url,script.async=!0,callback=function(event){removeEventListenerFn(script,"load",callback),removeEventListenerFn(script,"error",callback),rawDocument.body.removeChild(script),script=null;var status=-1,text="unknown";event&&("load"!==event.type||callbacks.wasCalled(callbackPath)||(event={type:"error"}),text=event.type,status="error"===event.type?404:200),done&&done(status,text)},addEventListenerFn(script,"load",callback),addEventListenerFn(script,"error",callback),rawDocument.body.appendChild(script),callback}(url,callbackPath,function(status,text){var response=200===status&&callbacks.getResponse(callbackPath);completeRequest(callback,status,response,"",text),callbacks.removeCallback(callbackPath)});else{var xhr=createXhr(method,url);xhr.open(method,url,!0),forEach(headers,function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)}),xhr.onload=function(){var statusText=xhr.statusText||"",response="response"in xhr?xhr.response:xhr.responseText,status=1223===xhr.status?204:xhr.status;0===status&&(status=response?200:"file"===urlResolve(url).protocol?404:0),completeRequest(callback,status,response,xhr.getAllResponseHeaders(),statusText)};var requestError=function(){completeRequest(callback,-1,null,null,"")};if(xhr.onerror=requestError,xhr.onabort=requestError,xhr.ontimeout=requestError,forEach(eventHandlers,function(value,key){xhr.addEventListener(key,value)}),forEach(uploadEventHandlers,function(value,key){xhr.upload.addEventListener(key,value)}),withCredentials&&(xhr.withCredentials=!0),responseType)try{xhr.responseType=responseType}catch(e){if("json"!==responseType)throw e}xhr.send(isUndefined(post)?null:post)}if(timeout>0)var timeoutId=$browserDefer(timeoutRequest,timeout);else isPromiseLike(timeout)&&timeout.then(timeoutRequest);function timeoutRequest(){jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString,statusText){isDefined(timeoutId)&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,callback(status,response,headersString,statusText),$browser.$$completeOutstandingRequest(noop)}}}($browser,$xhrFactory,$browser.defer,$jsonpCallbacks,$document[0])}]}var $interpolateMinErr=angular.$interpolateMinErr=minErr("$interpolate");function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length,escapedStartRegexp=new RegExp(startSymbol.replace(/./g,escape),"g"),escapedEndRegexp=new RegExp(endSymbol.replace(/./g,escape),"g");function escape(ch){return"\\\\\\"+ch}function unescapeText(text){return text.replace(escapedStartRegexp,startSymbol).replace(escapedEndRegexp,endSymbol)}function constantWatchDelegate(scope,listener,objectEquality,constantInterp){var unwatch=scope.$watch(function(scope){return unwatch(),constantInterp(scope)},listener,objectEquality);return unwatch}function $interpolate(text,mustHaveExpression,trustedContext,allOrNothing){if(!text.length||-1===text.indexOf(startSymbol)){var constantInterp;if(!mustHaveExpression)(constantInterp=valueFn(unescapeText(text))).exp=text,constantInterp.expressions=[],constantInterp.$$watchDelegate=constantWatchDelegate;return constantInterp}allOrNothing=!!allOrNothing;for(var startIndex,endIndex,exp,index=0,expressions=[],parseFns=[],textLength=text.length,concat=[],expressionPositions=[];index<textLength;){if(-1===(startIndex=text.indexOf(startSymbol,index))||-1===(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))){index!==textLength&&concat.push(unescapeText(text.substring(index)));break}index!==startIndex&&concat.push(unescapeText(text.substring(index,startIndex))),exp=text.substring(startIndex+startSymbolLength,endIndex),expressions.push(exp),parseFns.push($parse(exp,parseStringifyInterceptor)),index=endIndex+endSymbolLength,expressionPositions.push(concat.length),concat.push("")}if(trustedContext&&concat.length>1&&$interpolateMinErr.throwNoconcat(text),!mustHaveExpression||expressions.length){var compute=function(values){for(var i=0,ii=expressions.length;i<ii;i++){if(allOrNothing&&isUndefined(values[i]))return;concat[expressionPositions[i]]=values[i]}return concat.join("")},getValue=function(value){return trustedContext?$sce.getTrusted(trustedContext,value):$sce.valueOf(value)};return extend(function(context){var i=0,ii=expressions.length,values=new Array(ii);try{for(;i<ii;i++)values[i]=parseFns[i](context);return compute(values)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}},{exp:text,expressions:expressions,$$watchDelegate:function(scope,listener){var lastValue;return scope.$watchGroup(parseFns,function(values,oldValues){var currValue=compute(values);isFunction(listener)&&listener.call(this,currValue,values!==oldValues?lastValue:currValue,scope),lastValue=currValue})}})}function parseStringifyInterceptor(value){try{return value=getValue(value),allOrNothing&&!isDefined(value)?value:function(value){if(null==value)return"";switch(typeof value){case"string":break;case"number":value=""+value;break;default:value=toJson(value)}return value}(value)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}}}return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q","$$q","$browser",function($rootScope,$window,$q,$$q,$browser){var intervals={};function interval(fn,delay,count,invokeApply){var hasParams=arguments.length>4,args=hasParams?sliceArgs(arguments,4):[],setInterval=$window.setInterval,clearInterval=$window.clearInterval,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return count=isDefined(count)?count:0,promise.$$intervalId=setInterval(function(){skipApply?$browser.defer(callback):$rootScope.$evalAsync(callback),deferred.notify(iteration++),count>0&&iteration>=count&&(deferred.resolve(iteration),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId]),skipApply||$rootScope.$apply()},delay),intervals[promise.$$intervalId]=deferred,promise;function callback(){hasParams?fn.apply(null,args):fn(iteration)}}return interval.cancel=function(promise){return!!(promise&&promise.$$intervalId in intervals)&&(intervals[promise.$$intervalId].reject("canceled"),$window.clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId],!0)},interval}]}$interpolateMinErr.throwNoconcat=function(text){throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text)},$interpolateMinErr.interr=function(text,err){return $interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString())};var $jsonpCallbacksProvider=function(){this.$get=["$window",function($window){var callbacks=$window.angular.callbacks,callbackMap={};return{createCallback:function(url){var callbackId="_"+(callbacks.$$counter++).toString(36),callbackPath="angular.callbacks."+callbackId,callback=function(callbackId){var callback=function(data){callback.data=data,callback.called=!0};return callback.id=callbackId,callback}(callbackId);return callbackMap[callbackPath]=callbacks[callbackId]=callback,callbackPath},wasCalled:function(callbackPath){return callbackMap[callbackPath].called},getResponse:function(callbackPath){return callbackMap[callbackPath].data},removeCallback:function(callbackPath){var callback=callbackMap[callbackPath];delete callbacks[callback.id],delete callbackMap[callbackPath]}}}]},PATH_MATCH=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location");function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj){var parsedUrl=urlResolve(absoluteUrl);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=toInt(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}var DOUBLE_SLASH_REGEX=/^\s*[\\/]{2,}/;function parseAppUrl(url,locationObj){if(DOUBLE_SLASH_REGEX.test(url))throw $locationMinErr("badpath",'Invalid url "{0}".',url);var prefixed="/"!==url.charAt(0);prefixed&&(url="/"+url);var match=urlResolve(url);locationObj.$$path=decodeURIComponent(prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!==locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function startsWith(haystack,needle){return 0===haystack.lastIndexOf(needle,0)}function stripBaseUrl(base,url){if(startsWith(url,base))return url.substr(base.length)}function stripHash(url){var index=url.indexOf("#");return-1===index?url:url.substr(0,index)}function trimEmptyHash(url){return url.replace(/(#.+)|#$/,"$1")}function LocationHtml5Url(appBase,appBaseNoFile,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"",parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var pathUrl=stripBaseUrl(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBaseNoFile+this.$$url.substr(1)},this.$$parseLinkUrl=function(url,relHref){return relHref&&"#"===relHref[0]?(this.hash(relHref.slice(1)),!0):(isDefined(appUrl=stripBaseUrl(appBase,url))?(prevAppUrl=appUrl,rewrittenUrl=basePrefix&&isDefined(appUrl=stripBaseUrl(basePrefix,appUrl))?appBaseNoFile+(stripBaseUrl("/",appUrl)||appUrl):appBase+prevAppUrl):isDefined(appUrl=stripBaseUrl(appBaseNoFile,url))?rewrittenUrl=appBaseNoFile+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl);var appUrl,prevAppUrl,rewrittenUrl}}function LocationHashbangUrl(appBase,appBaseNoFile,hashPrefix){parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var withoutHashUrl,withoutBaseUrl=stripBaseUrl(appBase,url)||stripBaseUrl(appBaseNoFile,url);isUndefined(withoutBaseUrl)||"#"!==withoutBaseUrl.charAt(0)?this.$$html5?withoutHashUrl=withoutBaseUrl:(withoutHashUrl="",isUndefined(withoutBaseUrl)&&(appBase=url,this.replace())):isUndefined(withoutHashUrl=stripBaseUrl(hashPrefix,withoutBaseUrl))&&(withoutHashUrl=withoutBaseUrl),parseAppUrl(withoutHashUrl,this),this.$$path=function(path,url,base){var firstPathSegmentMatch,windowsFilePathExp=/^\/[A-Z]:(\/.*)/;startsWith(url,base)&&(url=url.replace(base,""));if(windowsFilePathExp.exec(url))return path;return(firstPathSegmentMatch=windowsFilePathExp.exec(path))?firstPathSegmentMatch[1]:path}(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:"")},this.$$parseLinkUrl=function(url,relHref){return stripHash(appBase)===stripHash(url)&&(this.$$parse(url),!0)}}function LocationHashbangInHtml5Url(appBase,appBaseNoFile,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments),this.$$parseLinkUrl=function(url,relHref){return relHref&&"#"===relHref[0]?(this.hash(relHref.slice(1)),!0):(appBase===stripHash(url)?rewrittenUrl=url:(appUrl=stripBaseUrl(appBaseNoFile,url))?rewrittenUrl=appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl);var rewrittenUrl,appUrl},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+hashPrefix+this.$$url}}var locationPrototype={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);return(match[1]||""===url)&&this.path(decodeURIComponent(match[1])),(match[2]||match[1]||""===url)&&this.search(match[3]||""),this.hash(match[5]||""),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return"/"===(path=null!==path?path.toString():"").charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search)||isNumber(search))search=search.toString(),this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");forEach(search=copy(search,{}),function(value,key){null==value&&delete search[key]}),this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",function(hash){return null!==hash?hash.toString():""}),replace:function(){return this.$$replace=!0,this}};function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){var hashPrefix="",html5Mode={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isBoolean(mode)?(html5Mode.enabled=mode,this):isObject(mode)?(isBoolean(mode.enabled)&&(html5Mode.enabled=mode.enabled),isBoolean(mode.requireBase)&&(html5Mode.requireBase=mode.requireBase),isBoolean(mode.rewriteLinks)&&(html5Mode.rewriteLinks=mode.rewriteLinks),this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function($rootScope,$browser,$sniffer,$rootElement,$window){var $location,LocationMode,appBase,url,baseHref=$browser.baseHref(),initialUrl=$browser.url();if(html5Mode.enabled){if(!baseHref&&html5Mode.requireBase)throw $locationMinErr("nobase","$location in HTML5 mode requires a <base> tag to be present!");appBase=(url=initialUrl).substring(0,url.indexOf("/",url.indexOf("//")+2))+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url}else appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl;var appBaseNoFile=function(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}(appBase);($location=new LocationMode(appBase,appBaseNoFile,"#"+hashPrefix)).$$parseLinkUrl(initialUrl,initialUrl),$location.$$state=$browser.state();var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;function setBrowserUrlWithFallback(url,replace,state){var oldUrl=$location.url(),oldState=$location.$$state;try{$browser.url(url,replace,state),$location.$$state=$browser.state()}catch(e){throw $location.url(oldUrl),$location.$$state=oldState,e}}$rootElement.on("click",function(event){if(html5Mode.rewriteLinks&&!event.ctrlKey&&!event.metaKey&&!event.shiftKey&&2!==event.which&&2!==event.button){for(var elm=jqLite(event.target);"a"!==nodeName_(elm[0]);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;var absHref=elm.prop("href"),relHref=elm.attr("href")||elm.attr("xlink:href");isObject(absHref)&&"[object SVGAnimatedString]"===absHref.toString()&&(absHref=urlResolve(absHref.animVal).href),IGNORE_URI_REGEXP.test(absHref)||!absHref||elm.attr("target")||event.isDefaultPrevented()||$location.$$parseLinkUrl(absHref,relHref)&&(event.preventDefault(),$location.absUrl()!==$browser.url()&&($rootScope.$apply(),$window.angular["ff-684208-preventDefault"]=!0))}}),trimEmptyHash($location.absUrl())!==trimEmptyHash(initialUrl)&&$browser.url($location.absUrl(),!0);var initializing=!0;return $browser.onUrlChange(function(newUrl,newState){isUndefined(stripBaseUrl(appBaseNoFile,newUrl))?$window.location.href=newUrl:($rootScope.$evalAsync(function(){var defaultPrevented,oldUrl=$location.absUrl(),oldState=$location.$$state;newUrl=trimEmptyHash(newUrl),$location.$$parse(newUrl),$location.$$state=newState,defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,newState,oldState).defaultPrevented,$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState,setBrowserUrlWithFallback(oldUrl,!1,oldState)):(initializing=!1,afterLocationChange(oldUrl,oldState)))}),$rootScope.$$phase||$rootScope.$digest())}),$rootScope.$watch(function(){var oldUrl=trimEmptyHash($browser.url()),newUrl=trimEmptyHash($location.absUrl()),oldState=$browser.state(),currentReplace=$location.$$replace,urlOrStateChanged=oldUrl!==newUrl||$location.$$html5&&$sniffer.history&&oldState!==$location.$$state;(initializing||urlOrStateChanged)&&(initializing=!1,$rootScope.$evalAsync(function(){var newUrl=$location.absUrl(),defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,$location.$$state,oldState).defaultPrevented;$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState):(urlOrStateChanged&&setBrowserUrlWithFallback(newUrl,currentReplace,oldState===$location.$$state?null:$location.$$state),afterLocationChange(oldUrl,oldState)))})),$location.$$replace=!1}),$location;function afterLocationChange(oldUrl,oldState){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl,$location.$$state,oldState)}}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:(fn=consoleLog("debug"),function(){debug&&fn.apply(self,arguments)})};var fn;function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop,hasApply=!1;try{hasApply=!!logFn.apply}catch(e){}return hasApply?function(){var args=[];return forEach(arguments,function(arg){args.push(function(arg){return arg instanceof Error&&(arg.stack?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}(arg))}),logFn.apply(console,args)}:function(arg1,arg2){logFn(arg1,null==arg2?"":arg2)}}}]}forEach([LocationHashbangInHtml5Url,LocationHashbangUrl,LocationHtml5Url],function(Location){Location.prototype=Object.create(locationPrototype),Location.prototype.state=function(state){if(!arguments.length)return this.$$state;if(Location!==LocationHtml5Url||!this.$$html5)throw $locationMinErr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=isUndefined(state)?null:state,this}});var $parseMinErr=minErr("$parse"),ARRAY_CTOR=[].constructor,BOOLEAN_CTOR=(!1).constructor,FUNCTION_CTOR=Function.constructor,NUMBER_CTOR=(0).constructor,OBJECT_CTOR={}.constructor,STRING_CTOR="".constructor,ARRAY_CTOR_PROTO=ARRAY_CTOR.prototype,BOOLEAN_CTOR_PROTO=BOOLEAN_CTOR.prototype,FUNCTION_CTOR_PROTO=FUNCTION_CTOR.prototype,NUMBER_CTOR_PROTO=NUMBER_CTOR.prototype,OBJECT_CTOR_PROTO=OBJECT_CTOR.prototype,STRING_CTOR_PROTO=STRING_CTOR.prototype,CALL=FUNCTION_CTOR_PROTO.call,APPLY=FUNCTION_CTOR_PROTO.apply,BIND=FUNCTION_CTOR_PROTO.bind,objectValueOf=OBJECT_CTOR_PROTO.valueOf;function ensureSafeMemberName(name,fullExpression){if("__defineGetter__"===name||"__defineSetter__"===name||"__lookupGetter__"===name||"__lookupSetter__"===name||"__proto__"===name)throw $parseMinErr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",fullExpression);return name}function getStringValue(name){return name+""}function ensureSafeObject(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.window===obj)throw $parseMinErr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.children&&(obj.nodeName||obj.prop&&obj.attr&&obj.find))throw $parseMinErr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===Object)throw $parseMinErr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",fullExpression)}return obj}function ensureSafeFunction(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===CALL||obj===APPLY||obj===BIND)throw $parseMinErr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",fullExpression)}}function ensureSafeAssignContext(obj,fullExpression){if(obj&&(obj===ARRAY_CTOR||obj===BOOLEAN_CTOR||obj===FUNCTION_CTOR||obj===NUMBER_CTOR||obj===OBJECT_CTOR||obj===STRING_CTOR||obj===ARRAY_CTOR_PROTO||obj===BOOLEAN_CTOR_PROTO||obj===FUNCTION_CTOR_PROTO||obj===NUMBER_CTOR_PROTO||obj===OBJECT_CTOR_PROTO||obj===STRING_CTOR_PROTO))throw $parseMinErr("isecaf","Assigning to a constructor or its prototype is disallowed! Expression: {0}",fullExpression)}var OPERATORS=createMap();forEach("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(operator){OPERATORS[operator]=!0});var ESCAPE={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Lexer=function(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){for(this.text=text,this.index=0,this.tokens=[];this.index<this.text.length;){var ch=this.text.charAt(this.index);if('"'===ch||"'"===ch)this.readString(ch);else if(this.isNumber(ch)||"."===ch&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(ch,"(){}[].,;:?"))this.tokens.push({index:this.index,text:ch}),this.index++;else if(this.isWhitespace(ch))this.index++;else{var ch2=ch+this.peek(),ch3=ch2+this.peek(2),op1=OPERATORS[ch],op2=OPERATORS[ch2],op3=OPERATORS[ch3];if(op1||op2||op3){var token=op3?ch3:op2?ch2:ch;this.tokens.push({index:this.index,text:token,operator:!0}),this.index+=token.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(ch,chars){return-1!==chars.indexOf(ch)},peek:function(i){var num=i||1;return this.index+num<this.text.length&&this.text.charAt(this.index+num)},isNumber:function(ch){return"0"<=ch&&ch<="9"&&"string"==typeof ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||"\t"===ch||"\n"===ch||"\v"===ch||""===ch},isIdentifierStart:function(ch){return this.options.isIdentifierStart?this.options.isIdentifierStart(ch,this.codePointAt(ch)):this.isValidIdentifierStart(ch)},isValidIdentifierStart:function(ch){return"a"<=ch&&ch<="z"||"A"<=ch&&ch<="Z"||"_"===ch||"$"===ch},isIdentifierContinue:function(ch){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(ch,this.codePointAt(ch)):this.isValidIdentifierContinue(ch)},isValidIdentifierContinue:function(ch,cp){return this.isValidIdentifierStart(ch,cp)||this.isNumber(ch)},codePointAt:function(ch){return 1===ch.length?ch.charCodeAt(0):(ch.charCodeAt(0)<<10)+ch.charCodeAt(1)-56613888},peekMultichar:function(){var ch=this.text.charAt(this.index),peek=this.peek();if(!peek)return ch;var cp1=ch.charCodeAt(0),cp2=peek.charCodeAt(0);return cp1>=55296&&cp1<=56319&&cp2>=56320&&cp2<=57343?ch+peek:ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."===ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"===ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"===number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!==number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:start,text:number,constant:!0,value:Number(number)})},readIdent:function(){var start=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var ch=this.peekMultichar();if(!this.isIdentifierContinue(ch))break;this.index+=ch.length}this.tokens.push({index:start,text:this.text.slice(start,this.index),identifier:!0})},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{string+=ESCAPE[ch]||ch}escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,constant:!0,value:string});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var AST=function(lexer,options){this.lexer=lexer,this.options=options};function ifDefined(v,d){return void 0!==v?v:d}function plusFn(l,r){return void 0===l?r:void 0===r?l:l+r}function findConstantAndWatchExpressions(ast,$filter){var allConstants,argsToWatch,isStatelessFilter;switch(ast.type){case AST.Program:allConstants=!0,forEach(ast.body,function(expr){findConstantAndWatchExpressions(expr.expression,$filter),allConstants=allConstants&&expr.expression.constant}),ast.constant=allConstants;break;case AST.Literal:ast.constant=!0,ast.toWatch=[];break;case AST.UnaryExpression:findConstantAndWatchExpressions(ast.argument,$filter),ast.constant=ast.argument.constant,ast.toWatch=ast.argument.toWatch;break;case AST.BinaryExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.left.toWatch.concat(ast.right.toWatch);break;case AST.LogicalExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.ConditionalExpression:findConstantAndWatchExpressions(ast.test,$filter),findConstantAndWatchExpressions(ast.alternate,$filter),findConstantAndWatchExpressions(ast.consequent,$filter),ast.constant=ast.test.constant&&ast.alternate.constant&&ast.consequent.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.Identifier:ast.constant=!1,ast.toWatch=[ast];break;case AST.MemberExpression:findConstantAndWatchExpressions(ast.object,$filter),ast.computed&&findConstantAndWatchExpressions(ast.property,$filter),ast.constant=ast.object.constant&&(!ast.computed||ast.property.constant),ast.toWatch=[ast];break;case AST.CallExpression:isStatelessFilter=!!ast.filter&&function($filter,filterName){return!$filter(filterName).$stateful}($filter,ast.callee.name),allConstants=isStatelessFilter,argsToWatch=[],forEach(ast.arguments,function(expr){findConstantAndWatchExpressions(expr,$filter),allConstants=allConstants&&expr.constant,expr.constant||argsToWatch.push.apply(argsToWatch,expr.toWatch)}),ast.constant=allConstants,ast.toWatch=isStatelessFilter?argsToWatch:[ast];break;case AST.AssignmentExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=[ast];break;case AST.ArrayExpression:allConstants=!0,argsToWatch=[],forEach(ast.elements,function(expr){findConstantAndWatchExpressions(expr,$filter),allConstants=allConstants&&expr.constant,expr.constant||argsToWatch.push.apply(argsToWatch,expr.toWatch)}),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ObjectExpression:allConstants=!0,argsToWatch=[],forEach(ast.properties,function(property){findConstantAndWatchExpressions(property.value,$filter),allConstants=allConstants&&property.value.constant&&!property.computed,property.value.constant||argsToWatch.push.apply(argsToWatch,property.value.toWatch)}),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ThisExpression:case AST.LocalsExpression:ast.constant=!1,ast.toWatch=[]}}function getInputs(body){if(1===body.length){var lastExpression=body[0].expression,candidate=lastExpression.toWatch;return 1!==candidate.length?candidate:candidate[0]!==lastExpression?candidate:void 0}}function isAssignable(ast){return ast.type===AST.Identifier||ast.type===AST.MemberExpression}function assignableAST(ast){if(1===ast.body.length&&isAssignable(ast.body[0].expression))return{type:AST.AssignmentExpression,left:ast.body[0].expression,right:{type:AST.NGValueParameter},operator:"="}}function isLiteral(ast){return 0===ast.body.length||1===ast.body.length&&(ast.body[0].expression.type===AST.Literal||ast.body[0].expression.type===AST.ArrayExpression||ast.body[0].expression.type===AST.ObjectExpression)}function isConstant(ast){return ast.constant}function ASTCompiler(astBuilder,$filter){this.astBuilder=astBuilder,this.$filter=$filter}function ASTInterpreter(astBuilder,$filter){this.astBuilder=astBuilder,this.$filter=$filter}AST.Program="Program",AST.ExpressionStatement="ExpressionStatement",AST.AssignmentExpression="AssignmentExpression",AST.ConditionalExpression="ConditionalExpression",AST.LogicalExpression="LogicalExpression",AST.BinaryExpression="BinaryExpression",AST.UnaryExpression="UnaryExpression",AST.CallExpression="CallExpression",AST.MemberExpression="MemberExpression",AST.Identifier="Identifier",AST.Literal="Literal",AST.ArrayExpression="ArrayExpression",AST.Property="Property",AST.ObjectExpression="ObjectExpression",AST.ThisExpression="ThisExpression",AST.LocalsExpression="LocalsExpression",AST.NGValueParameter="NGValueParameter",AST.prototype={ast:function(text){this.text=text,this.tokens=this.lexer.lex(text);var value=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value},program:function(){for(var body=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&body.push(this.expressionStatement()),!this.expect(";"))return{type:AST.Program,body:body}},expressionStatement:function(){return{type:AST.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var left=this.expression();this.expect("|");)left=this.filter(left);return left},expression:function(){return this.assignment()},assignment:function(){var result=this.ternary();return this.expect("=")&&(result={type:AST.AssignmentExpression,left:result,right:this.assignment(),operator:"="}),result},ternary:function(){var alternate,consequent,test=this.logicalOR();return this.expect("?")&&(alternate=this.expression(),this.consume(":"))?(consequent=this.expression(),{type:AST.ConditionalExpression,test:test,alternate:alternate,consequent:consequent}):test},logicalOR:function(){for(var left=this.logicalAND();this.expect("||");)left={type:AST.LogicalExpression,operator:"||",left:left,right:this.logicalAND()};return left},logicalAND:function(){for(var left=this.equality();this.expect("&&");)left={type:AST.LogicalExpression,operator:"&&",left:left,right:this.equality()};return left},equality:function(){for(var token,left=this.relational();token=this.expect("==","!=","===","!==");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.relational()};return left},relational:function(){for(var token,left=this.additive();token=this.expect("<",">","<=",">=");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.additive()};return left},additive:function(){for(var token,left=this.multiplicative();token=this.expect("+","-");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.multiplicative()};return left},multiplicative:function(){for(var token,left=this.unary();token=this.expect("*","/","%");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.unary()};return left},unary:function(){var token;return(token=this.expect("+","-","!"))?{type:AST.UnaryExpression,operator:token.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var primary,next;for(this.expect("(")?(primary=this.filterChain(),this.consume(")")):this.expect("[")?primary=this.arrayDeclaration():this.expect("{")?primary=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?primary=copy(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?primary={type:AST.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?primary=this.identifier():this.peek().constant?primary=this.constant():this.throwError("not a primary expression",this.peek());next=this.expect("(","[",".");)"("===next.text?(primary={type:AST.CallExpression,callee:primary,arguments:this.parseArguments()},this.consume(")")):"["===next.text?(primary={type:AST.MemberExpression,object:primary,property:this.expression(),computed:!0},this.consume("]")):"."===next.text?primary={type:AST.MemberExpression,object:primary,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return primary},filter:function(baseExpression){for(var args=[baseExpression],result={type:AST.CallExpression,callee:this.identifier(),arguments:args,filter:!0};this.expect(":");)args.push(this.expression());return result},parseArguments:function(){var args=[];if(")"!==this.peekToken().text)do{args.push(this.filterChain())}while(this.expect(","));return args},identifier:function(){var token=this.consume();return token.identifier||this.throwError("is not a valid identifier",token),{type:AST.Identifier,name:token.text}},constant:function(){return{type:AST.Literal,value:this.consume().value}},arrayDeclaration:function(){var elements=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;elements.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:AST.ArrayExpression,elements:elements}},object:function(){var property,properties=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;property={type:AST.Property,kind:"init"},this.peek().constant?(property.key=this.constant(),property.computed=!1,this.consume(":"),property.value=this.expression()):this.peek().identifier?(property.key=this.identifier(),property.computed=!1,this.peek(":")?(this.consume(":"),property.value=this.expression()):property.value=property.key):this.peek("[")?(this.consume("["),property.key=this.expression(),this.consume("]"),property.computed=!0,this.consume(":"),property.value=this.expression()):this.throwError("invalid key",this.peek()),properties.push(property)}while(this.expect(","));return this.consume("}"),{type:AST.ObjectExpression,properties:properties}},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},consume:function(e1){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);var token=this.expect(e1);return token||this.throwError("is unexpected, expecting ["+e1+"]",this.peek()),token},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){return this.peekAhead(0,e1,e2,e3,e4)},peekAhead:function(i,e1,e2,e3,e4){if(this.tokens.length>i){var token=this.tokens[i],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return!!token&&(this.tokens.shift(),token)},selfReferential:{this:{type:AST.ThisExpression},$locals:{type:AST.LocalsExpression}}},ASTCompiler.prototype={compile:function(expression,expensiveChecks){var self=this,ast=this.astBuilder.ast(expression);this.state={nextId:0,filters:{},expensiveChecks:expensiveChecks,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},findConstantAndWatchExpressions(ast,self.$filter);var assignable,extra="";if(this.stage="assign",assignable=assignableAST(ast)){this.state.computing="assign";var result=this.nextId();this.recurse(assignable,result),this.return_(result),extra="fn.assign="+this.generateFunction("assign","s,v,l")}var toWatch=getInputs(ast.body);self.stage="inputs",forEach(toWatch,function(watch,key){var fnKey="fn"+key;self.state[fnKey]={vars:[],body:[],own:{}},self.state.computing=fnKey;var intoId=self.nextId();self.recurse(watch,intoId),self.return_(intoId),self.state.inputs.push(fnKey),watch.watchId=key}),this.state.computing="fn",this.stage="main",this.recurse(ast);var fnString='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+extra+this.watchFns()+"return fn;",fn=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",fnString)(this.$filter,ensureSafeMemberName,ensureSafeObject,ensureSafeFunction,getStringValue,ensureSafeAssignContext,ifDefined,plusFn,expression);return this.state=this.stage=void 0,fn.literal=isLiteral(ast),fn.constant=isConstant(ast),fn},USE:"use",STRICT:"strict",watchFns:function(){var result=[],fns=this.state.inputs,self=this;return forEach(fns,function(name){result.push("var "+name+"="+self.generateFunction(name,"s"))}),fns.length&&result.push("fn.inputs=["+fns.join(",")+"];"),result.join("")},generateFunction:function(name,params){return"function("+params+"){"+this.varsPrefix(name)+this.body(name)+"};"},filterPrefix:function(){var parts=[],self=this;return forEach(this.state.filters,function(id,filter){parts.push(id+"=$filter("+self.escape(filter)+")")}),parts.length?"var "+parts.join(",")+";":""},varsPrefix:function(section){return this.state[section].vars.length?"var "+this.state[section].vars.join(",")+";":""},body:function(section){return this.state[section].body.join("")},recurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var left,right,args,expression,computed,self=this;if(recursionFn=recursionFn||noop,!skipWatchIdCheck&&isDefined(ast.watchId))return intoId=intoId||this.nextId(),void this.if_("i",this.lazyAssign(intoId,this.computedMember("i",ast.watchId)),this.lazyRecurse(ast,intoId,nameId,recursionFn,create,!0));switch(ast.type){case AST.Program:forEach(ast.body,function(expression,pos){self.recurse(expression.expression,void 0,void 0,function(expr){right=expr}),pos!==ast.body.length-1?self.current().body.push(right,";"):self.return_(right)});break;case AST.Literal:expression=this.escape(ast.value),this.assign(intoId,expression),recursionFn(expression);break;case AST.UnaryExpression:this.recurse(ast.argument,void 0,void 0,function(expr){right=expr}),expression=ast.operator+"("+this.ifDefined(right,0)+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.BinaryExpression:this.recurse(ast.left,void 0,void 0,function(expr){left=expr}),this.recurse(ast.right,void 0,void 0,function(expr){right=expr}),expression="+"===ast.operator?this.plus(left,right):"-"===ast.operator?this.ifDefined(left,0)+ast.operator+this.ifDefined(right,0):"("+left+")"+ast.operator+"("+right+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.LogicalExpression:intoId=intoId||this.nextId(),self.recurse(ast.left,intoId),self.if_("&&"===ast.operator?intoId:self.not(intoId),self.lazyRecurse(ast.right,intoId)),recursionFn(intoId);break;case AST.ConditionalExpression:intoId=intoId||this.nextId(),self.recurse(ast.test,intoId),self.if_(intoId,self.lazyRecurse(ast.alternate,intoId),self.lazyRecurse(ast.consequent,intoId)),recursionFn(intoId);break;case AST.Identifier:intoId=intoId||this.nextId(),nameId&&(nameId.context="inputs"===self.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",ast.name)+"?l:s"),nameId.computed=!1,nameId.name=ast.name),ensureSafeMemberName(ast.name),self.if_("inputs"===self.stage||self.not(self.getHasOwnProperty("l",ast.name)),function(){self.if_("inputs"===self.stage||"s",function(){create&&1!==create&&self.if_(self.not(self.nonComputedMember("s",ast.name)),self.lazyAssign(self.nonComputedMember("s",ast.name),"{}")),self.assign(intoId,self.nonComputedMember("s",ast.name))})},intoId&&self.lazyAssign(intoId,self.nonComputedMember("l",ast.name))),(self.state.expensiveChecks||isPossiblyDangerousMemberName(ast.name))&&self.addEnsureSafeObject(intoId),recursionFn(intoId);break;case AST.MemberExpression:left=nameId&&(nameId.context=this.nextId())||this.nextId(),intoId=intoId||this.nextId(),self.recurse(ast.object,left,void 0,function(){self.if_(self.notNull(left),function(){create&&1!==create&&self.addEnsureSafeAssignContext(left),ast.computed?(right=self.nextId(),self.recurse(ast.property,right),self.getStringValue(right),self.addEnsureSafeMemberName(right),create&&1!==create&&self.if_(self.not(self.computedMember(left,right)),self.lazyAssign(self.computedMember(left,right),"{}")),expression=self.ensureSafeObject(self.computedMember(left,right)),self.assign(intoId,expression),nameId&&(nameId.computed=!0,nameId.name=right)):(ensureSafeMemberName(ast.property.name),create&&1!==create&&self.if_(self.not(self.nonComputedMember(left,ast.property.name)),self.lazyAssign(self.nonComputedMember(left,ast.property.name),"{}")),expression=self.nonComputedMember(left,ast.property.name),(self.state.expensiveChecks||isPossiblyDangerousMemberName(ast.property.name))&&(expression=self.ensureSafeObject(expression)),self.assign(intoId,expression),nameId&&(nameId.computed=!1,nameId.name=ast.property.name))},function(){self.assign(intoId,"undefined")}),recursionFn(intoId)},!!create);break;case AST.CallExpression:intoId=intoId||this.nextId(),ast.filter?(right=self.filter(ast.callee.name),args=[],forEach(ast.arguments,function(expr){var argument=self.nextId();self.recurse(expr,argument),args.push(argument)}),expression=right+"("+args.join(",")+")",self.assign(intoId,expression),recursionFn(intoId)):(right=self.nextId(),left={},args=[],self.recurse(ast.callee,right,left,function(){self.if_(self.notNull(right),function(){self.addEnsureSafeFunction(right),forEach(ast.arguments,function(expr){self.recurse(expr,self.nextId(),void 0,function(argument){args.push(self.ensureSafeObject(argument))})}),left.name?(self.state.expensiveChecks||self.addEnsureSafeObject(left.context),expression=self.member(left.context,left.name,left.computed)+"("+args.join(",")+")"):expression=right+"("+args.join(",")+")",expression=self.ensureSafeObject(expression),self.assign(intoId,expression)},function(){self.assign(intoId,"undefined")}),recursionFn(intoId)}));break;case AST.AssignmentExpression:if(right=this.nextId(),left={},!isAssignable(ast.left))throw $parseMinErr("lval","Trying to assign a value to a non l-value");this.recurse(ast.left,void 0,left,function(){self.if_(self.notNull(left.context),function(){self.recurse(ast.right,right),self.addEnsureSafeObject(self.member(left.context,left.name,left.computed)),self.addEnsureSafeAssignContext(left.context),expression=self.member(left.context,left.name,left.computed)+ast.operator+right,self.assign(intoId,expression),recursionFn(intoId||expression)})},1);break;case AST.ArrayExpression:args=[],forEach(ast.elements,function(expr){self.recurse(expr,self.nextId(),void 0,function(argument){args.push(argument)})}),expression="["+args.join(",")+"]",this.assign(intoId,expression),recursionFn(expression);break;case AST.ObjectExpression:args=[],computed=!1,forEach(ast.properties,function(property){property.computed&&(computed=!0)}),computed?(intoId=intoId||this.nextId(),this.assign(intoId,"{}"),forEach(ast.properties,function(property){property.computed?(left=self.nextId(),self.recurse(property.key,left)):left=property.key.type===AST.Identifier?property.key.name:""+property.key.value,right=self.nextId(),self.recurse(property.value,right),self.assign(self.member(intoId,left,property.computed),right)})):(forEach(ast.properties,function(property){self.recurse(property.value,ast.constant?void 0:self.nextId(),void 0,function(expr){args.push(self.escape(property.key.type===AST.Identifier?property.key.name:""+property.key.value)+":"+expr)})}),expression="{"+args.join(",")+"}",this.assign(intoId,expression)),recursionFn(intoId||expression);break;case AST.ThisExpression:this.assign(intoId,"s"),recursionFn("s");break;case AST.LocalsExpression:this.assign(intoId,"l"),recursionFn("l");break;case AST.NGValueParameter:this.assign(intoId,"v"),recursionFn("v")}},getHasOwnProperty:function(element,property){var key=element+"."+property,own=this.current().own;return own.hasOwnProperty(key)||(own[key]=this.nextId(!1,element+"&&("+this.escape(property)+" in "+element+")")),own[key]},assign:function(id,value){if(id)return this.current().body.push(id,"=",value,";"),id},filter:function(filterName){return this.state.filters.hasOwnProperty(filterName)||(this.state.filters[filterName]=this.nextId(!0)),this.state.filters[filterName]},ifDefined:function(id,defaultValue){return"ifDefined("+id+","+this.escape(defaultValue)+")"},plus:function(left,right){return"plus("+left+","+right+")"},return_:function(id){this.current().body.push("return ",id,";")},if_:function(test,alternate,consequent){if(!0===test)alternate();else{var body=this.current().body;body.push("if(",test,"){"),alternate(),body.push("}"),consequent&&(body.push("else{"),consequent(),body.push("}"))}},not:function(expression){return"!("+expression+")"},notNull:function(expression){return expression+"!=null"},nonComputedMember:function(left,right){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(right)?left+"."+right:left+'["'+right.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(left,right){return left+"["+right+"]"},member:function(left,right,computed){return computed?this.computedMember(left,right):this.nonComputedMember(left,right)},addEnsureSafeObject:function(item){this.current().body.push(this.ensureSafeObject(item),";")},addEnsureSafeMemberName:function(item){this.current().body.push(this.ensureSafeMemberName(item),";")},addEnsureSafeFunction:function(item){this.current().body.push(this.ensureSafeFunction(item),";")},addEnsureSafeAssignContext:function(item){this.current().body.push(this.ensureSafeAssignContext(item),";")},ensureSafeObject:function(item){return"ensureSafeObject("+item+",text)"},ensureSafeMemberName:function(item){return"ensureSafeMemberName("+item+",text)"},ensureSafeFunction:function(item){return"ensureSafeFunction("+item+",text)"},getStringValue:function(item){this.assign(item,"getStringValue("+item+")")},ensureSafeAssignContext:function(item){return"ensureSafeAssignContext("+item+",text)"},lazyRecurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var self=this;return function(){self.recurse(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck)}},lazyAssign:function(id,value){var self=this;return function(){self.assign(id,value)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)},escape:function(value){if(isString(value))return"'"+value.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(isNumber(value))return value.toString();if(!0===value)return"true";if(!1===value)return"false";if(null===value)return"null";if(void 0===value)return"undefined";throw $parseMinErr("esc","IMPOSSIBLE")},nextId:function(skip,init){var id="v"+this.state.nextId++;return skip||this.current().vars.push(id+(init?"="+init:"")),id},current:function(){return this.state[this.state.computing]}},ASTInterpreter.prototype={compile:function(expression,expensiveChecks){var assignable,assign,self=this,ast=this.astBuilder.ast(expression);this.expression=expression,this.expensiveChecks=expensiveChecks,findConstantAndWatchExpressions(ast,self.$filter),(assignable=assignableAST(ast))&&(assign=this.recurse(assignable));var inputs,toWatch=getInputs(ast.body);toWatch&&(inputs=[],forEach(toWatch,function(watch,key){var input=self.recurse(watch);watch.input=input,inputs.push(input),watch.watchId=key}));var expressions=[];forEach(ast.body,function(expression){expressions.push(self.recurse(expression.expression))});var fn=0===ast.body.length?noop:1===ast.body.length?expressions[0]:function(scope,locals){var lastValue;return forEach(expressions,function(exp){lastValue=exp(scope,locals)}),lastValue};return assign&&(fn.assign=function(scope,value,locals){return assign(scope,locals,value)}),inputs&&(fn.inputs=inputs),fn.literal=isLiteral(ast),fn.constant=isConstant(ast),fn},recurse:function(ast,context,create){var left,right,args,self=this;if(ast.input)return this.inputs(ast.input,ast.watchId);switch(ast.type){case AST.Literal:return this.value(ast.value,context);case AST.UnaryExpression:return right=this.recurse(ast.argument),this["unary"+ast.operator](right,context);case AST.BinaryExpression:case AST.LogicalExpression:return left=this.recurse(ast.left),right=this.recurse(ast.right),this["binary"+ast.operator](left,right,context);case AST.ConditionalExpression:return this["ternary?:"](this.recurse(ast.test),this.recurse(ast.alternate),this.recurse(ast.consequent),context);case AST.Identifier:return ensureSafeMemberName(ast.name,self.expression),self.identifier(ast.name,self.expensiveChecks||isPossiblyDangerousMemberName(ast.name),context,create,self.expression);case AST.MemberExpression:return left=this.recurse(ast.object,!1,!!create),ast.computed||(ensureSafeMemberName(ast.property.name,self.expression),right=ast.property.name),ast.computed&&(right=this.recurse(ast.property)),ast.computed?this.computedMember(left,right,context,create,self.expression):this.nonComputedMember(left,right,self.expensiveChecks,context,create,self.expression);case AST.CallExpression:return args=[],forEach(ast.arguments,function(expr){args.push(self.recurse(expr))}),ast.filter&&(right=this.$filter(ast.callee.name)),ast.filter||(right=this.recurse(ast.callee,!0)),ast.filter?function(scope,locals,assign,inputs){for(var values=[],i=0;i<args.length;++i)values.push(args[i](scope,locals,assign,inputs));var value=right.apply(void 0,values,inputs);return context?{context:void 0,name:void 0,value:value}:value}:function(scope,locals,assign,inputs){var value,rhs=right(scope,locals,assign,inputs);if(null!=rhs.value){ensureSafeObject(rhs.context,self.expression),ensureSafeFunction(rhs.value,self.expression);for(var values=[],i=0;i<args.length;++i)values.push(ensureSafeObject(args[i](scope,locals,assign,inputs),self.expression));value=ensureSafeObject(rhs.value.apply(rhs.context,values),self.expression)}return context?{value:value}:value};case AST.AssignmentExpression:return left=this.recurse(ast.left,!0,1),right=this.recurse(ast.right),function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs);return ensureSafeObject(lhs.value,self.expression),ensureSafeAssignContext(lhs.context),lhs.context[lhs.name]=rhs,context?{value:rhs}:rhs};case AST.ArrayExpression:return args=[],forEach(ast.elements,function(expr){args.push(self.recurse(expr))}),function(scope,locals,assign,inputs){for(var value=[],i=0;i<args.length;++i)value.push(args[i](scope,locals,assign,inputs));return context?{value:value}:value};case AST.ObjectExpression:return args=[],forEach(ast.properties,function(property){property.computed?args.push({key:self.recurse(property.key),computed:!0,value:self.recurse(property.value)}):args.push({key:property.key.type===AST.Identifier?property.key.name:""+property.key.value,computed:!1,value:self.recurse(property.value)})}),function(scope,locals,assign,inputs){for(var value={},i=0;i<args.length;++i)args[i].computed?value[args[i].key(scope,locals,assign,inputs)]=args[i].value(scope,locals,assign,inputs):value[args[i].key]=args[i].value(scope,locals,assign,inputs);return context?{value:value}:value};case AST.ThisExpression:return function(scope){return context?{value:scope}:scope};case AST.LocalsExpression:return function(scope,locals){return context?{value:locals}:locals};case AST.NGValueParameter:return function(scope,locals,assign){return context?{value:assign}:assign}}},"unary+":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?+arg:0,context?{value:arg}:arg}},"unary-":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?-arg:0,context?{value:arg}:arg}},"unary!":function(argument,context){return function(scope,locals,assign,inputs){var arg=!argument(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary+":function(left,right,context){return function(scope,locals,assign,inputs){var arg=plusFn(left(scope,locals,assign,inputs),right(scope,locals,assign,inputs));return context?{value:arg}:arg}},"binary-":function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs),arg=(isDefined(lhs)?lhs:0)-(isDefined(rhs)?rhs:0);return context?{value:arg}:arg}},"binary*":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)*right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary/":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)/right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary%":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)%right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary===":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)===right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary&&":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)&&right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary||":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)||right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"ternary?:":function(test,alternate,consequent,context){return function(scope,locals,assign,inputs){var arg=test(scope,locals,assign,inputs)?alternate(scope,locals,assign,inputs):consequent(scope,locals,assign,inputs);return context?{value:arg}:arg}},value:function(value,context){return function(){return context?{context:void 0,name:void 0,value:value}:value}},identifier:function(name,expensiveChecks,context,create,expression){return function(scope,locals,assign,inputs){var base=locals&&name in locals?locals:scope;create&&1!==create&&base&&!base[name]&&(base[name]={});var value=base?base[name]:void 0;return expensiveChecks&&ensureSafeObject(value,expression),context?{context:base,name:name,value:value}:value}},computedMember:function(left,right,context,create,expression){return function(scope,locals,assign,inputs){var rhs,value,lhs=left(scope,locals,assign,inputs);return null!=lhs&&(ensureSafeMemberName(rhs=getStringValue(rhs=right(scope,locals,assign,inputs)),expression),create&&1!==create&&(ensureSafeAssignContext(lhs),lhs&&!lhs[rhs]&&(lhs[rhs]={})),ensureSafeObject(value=lhs[rhs],expression)),context?{context:lhs,name:rhs,value:value}:value}},nonComputedMember:function(left,right,expensiveChecks,context,create,expression){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);create&&1!==create&&(ensureSafeAssignContext(lhs),lhs&&!lhs[right]&&(lhs[right]={}));var value=null!=lhs?lhs[right]:void 0;return(expensiveChecks||isPossiblyDangerousMemberName(right))&&ensureSafeObject(value,expression),context?{context:lhs,name:right,value:value}:value}},inputs:function(input,watchId){return function(scope,value,locals,inputs){return inputs?inputs[watchId]:input(scope,value,locals)}}};var Parser=function(lexer,$filter,options){this.lexer=lexer,this.$filter=$filter,this.options=options,this.ast=new AST(lexer,options),this.astCompiler=options.csp?new ASTInterpreter(this.ast,$filter):new ASTCompiler(this.ast,$filter)};function isPossiblyDangerousMemberName(name){return"constructor"===name}function getValueOf(value){return isFunction(value.valueOf)?value.valueOf():objectValueOf.call(value)}function $ParseProvider(){var identStart,identContinue,cacheDefault=createMap(),cacheExpensive=createMap(),literals={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(literalName,literalValue){literals[literalName]=literalValue},this.setIdentifierFns=function(identifierStart,identifierContinue){return identStart=identifierStart,identContinue=identifierContinue,this},this.$get=["$filter",function($filter){var noUnsafeEval=csp().noUnsafeEval,$parseOptions={csp:noUnsafeEval,expensiveChecks:!1,literals:copy(literals),isIdentifierStart:isFunction(identStart)&&identStart,isIdentifierContinue:isFunction(identContinue)&&identContinue},$parseOptionsExpensive={csp:noUnsafeEval,expensiveChecks:!0,literals:copy(literals),isIdentifierStart:isFunction(identStart)&&identStart,isIdentifierContinue:isFunction(identContinue)&&identContinue},runningChecksEnabled=!1;return $parse.$$runningExpensiveChecks=function(){return runningChecksEnabled},$parse;function $parse(exp,interceptorFn,expensiveChecks){var parsedExpression,oneTime,cacheKey;switch(expensiveChecks=expensiveChecks||runningChecksEnabled,typeof exp){case"string":exp=exp.trim();var cache=expensiveChecks?cacheExpensive:cacheDefault;if(!(parsedExpression=cache[cacheKey=exp])){":"===exp.charAt(0)&&":"===exp.charAt(1)&&(oneTime=!0,exp=exp.substring(2));var parseOptions=expensiveChecks?$parseOptionsExpensive:$parseOptions,lexer=new Lexer(parseOptions);(parsedExpression=new Parser(lexer,$filter,parseOptions).parse(exp)).constant?parsedExpression.$$watchDelegate=constantWatchDelegate:oneTime?parsedExpression.$$watchDelegate=parsedExpression.literal?oneTimeLiteralWatchDelegate:oneTimeWatchDelegate:parsedExpression.inputs&&(parsedExpression.$$watchDelegate=inputsWatchDelegate),expensiveChecks&&(parsedExpression=function expensiveChecksInterceptor(fn){if(!fn)return fn;expensiveCheckFn.$$watchDelegate=fn.$$watchDelegate;expensiveCheckFn.assign=expensiveChecksInterceptor(fn.assign);expensiveCheckFn.constant=fn.constant;expensiveCheckFn.literal=fn.literal;for(var i=0;fn.inputs&&i<fn.inputs.length;++i)fn.inputs[i]=expensiveChecksInterceptor(fn.inputs[i]);expensiveCheckFn.inputs=fn.inputs;return expensiveCheckFn;function expensiveCheckFn(scope,locals,assign,inputs){var expensiveCheckOldValue=runningChecksEnabled;runningChecksEnabled=!0;try{return fn(scope,locals,assign,inputs)}finally{runningChecksEnabled=expensiveCheckOldValue}}}(parsedExpression)),cache[cacheKey]=parsedExpression}return addInterceptor(parsedExpression,interceptorFn);case"function":return addInterceptor(exp,interceptorFn);default:return addInterceptor(noop,interceptorFn)}}function expressionInputDirtyCheck(newValue,oldValueOfValue){return null==newValue||null==oldValueOfValue?newValue===oldValueOfValue:("object"!=typeof newValue||"object"!=typeof(newValue=getValueOf(newValue)))&&(newValue===oldValueOfValue||newValue!=newValue&&oldValueOfValue!=oldValueOfValue)}function inputsWatchDelegate(scope,listener,objectEquality,parsedExpression,prettyPrintExpression){var lastResult,inputExpressions=parsedExpression.inputs;if(1===inputExpressions.length){var oldInputValueOf=expressionInputDirtyCheck;return inputExpressions=inputExpressions[0],scope.$watch(function(scope){var newInputValue=inputExpressions(scope);return expressionInputDirtyCheck(newInputValue,oldInputValueOf)||(lastResult=parsedExpression(scope,void 0,void 0,[newInputValue]),oldInputValueOf=newInputValue&&getValueOf(newInputValue)),lastResult},listener,objectEquality,prettyPrintExpression)}for(var oldInputValueOfValues=[],oldInputValues=[],i=0,ii=inputExpressions.length;i<ii;i++)oldInputValueOfValues[i]=expressionInputDirtyCheck,oldInputValues[i]=null;return scope.$watch(function(scope){for(var changed=!1,i=0,ii=inputExpressions.length;i<ii;i++){var newInputValue=inputExpressions[i](scope);(changed||(changed=!expressionInputDirtyCheck(newInputValue,oldInputValueOfValues[i])))&&(oldInputValues[i]=newInputValue,oldInputValueOfValues[i]=newInputValue&&getValueOf(newInputValue))}return changed&&(lastResult=parsedExpression(scope,void 0,void 0,oldInputValues)),lastResult},listener,objectEquality,prettyPrintExpression)}function oneTimeWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.apply(this,arguments),isDefined(value)&&scope.$$postDigest(function(){isDefined(lastValue)&&unwatch()})},objectEquality)}function oneTimeLiteralWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.call(this,value,old,scope),isAllDefined(value)&&scope.$$postDigest(function(){isAllDefined(lastValue)&&unwatch()})},objectEquality);function isAllDefined(value){var allDefined=!0;return forEach(value,function(val){isDefined(val)||(allDefined=!1)}),allDefined}}function constantWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch=scope.$watch(function(scope){return unwatch(),parsedExpression(scope)},listener,objectEquality);return unwatch}function addInterceptor(parsedExpression,interceptorFn){if(!interceptorFn)return parsedExpression;var watchDelegate=parsedExpression.$$watchDelegate,useInputs=!1,fn=watchDelegate!==oneTimeLiteralWatchDelegate&&watchDelegate!==oneTimeWatchDelegate?function(scope,locals,assign,inputs){var value=useInputs&&inputs?inputs[0]:parsedExpression(scope,locals,assign,inputs);return interceptorFn(value,scope,locals)}:function(scope,locals,assign,inputs){var value=parsedExpression(scope,locals,assign,inputs),result=interceptorFn(value,scope,locals);return isDefined(value)?result:value};return parsedExpression.$$watchDelegate&&parsedExpression.$$watchDelegate!==inputsWatchDelegate?fn.$$watchDelegate=parsedExpression.$$watchDelegate:interceptorFn.$stateful||(fn.$$watchDelegate=inputsWatchDelegate,useInputs=!parsedExpression.inputs,fn.inputs=parsedExpression.inputs?parsedExpression.inputs:[parsedExpression]),fn}}]}function $QProvider(){this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler)}]}function $$QProvider(){this.$get=["$browser","$exceptionHandler",function($browser,$exceptionHandler){return qFactory(function(callback){$browser.defer(callback)},$exceptionHandler)}]}function qFactory(nextTick,exceptionHandler){var $qMinErr=minErr("$q",TypeError),defer=function(){var d=new Deferred;return d.resolve=simpleBind(d,d.resolve),d.reject=simpleBind(d,d.reject),d.notify=simpleBind(d,d.notify),d};function Promise(){this.$$state={status:0}}function simpleBind(context,fn){return function(value){fn.call(context,value)}}function scheduleProcessQueue(state){!state.processScheduled&&state.pending&&(state.processScheduled=!0,nextTick(function(){!function(state){var fn,deferred,pending;pending=state.pending,state.processScheduled=!1,state.pending=void 0;for(var i=0,ii=pending.length;i<ii;++i){deferred=pending[i][0],fn=pending[i][state.status];try{isFunction(fn)?deferred.resolve(fn(state.value)):1===state.status?deferred.resolve(state.value):deferred.reject(state.value)}catch(e){deferred.reject(e),exceptionHandler(e)}}}(state)}))}function Deferred(){this.promise=new Promise}extend(Promise.prototype,{then:function(onFulfilled,onRejected,progressBack){if(isUndefined(onFulfilled)&&isUndefined(onRejected)&&isUndefined(progressBack))return this;var result=new Deferred;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([result,onFulfilled,onRejected,progressBack]),this.$$state.status>0&&scheduleProcessQueue(this.$$state),result.promise},catch:function(callback){return this.then(null,callback)},finally:function(callback,progressBack){return this.then(function(value){return handleCallback(value,!0,callback)},function(error){return handleCallback(error,!1,callback)},progressBack)}}),extend(Deferred.prototype,{resolve:function(val){this.promise.$$state.status||(val===this.promise?this.$$reject($qMinErr("qcycle","Expected promise to be resolved with value other than itself '{0}'",val)):this.$$resolve(val))},$$resolve:function(val){var then,that=this,done=!1;try{(isObject(val)||isFunction(val))&&(then=val&&val.then),isFunction(then)?(this.promise.$$state.status=-1,then.call(val,function(val){if(done)return;done=!0,that.$$resolve(val)},rejectPromise,simpleBind(this,this.notify))):(this.promise.$$state.value=val,this.promise.$$state.status=1,scheduleProcessQueue(this.promise.$$state))}catch(e){rejectPromise(e),exceptionHandler(e)}function rejectPromise(val){done||(done=!0,that.$$reject(val))}},reject:function(reason){this.promise.$$state.status||this.$$reject(reason)},$$reject:function(reason){this.promise.$$state.value=reason,this.promise.$$state.status=2,scheduleProcessQueue(this.promise.$$state)},notify:function(progress){var callbacks=this.promise.$$state.pending;this.promise.$$state.status<=0&&callbacks&&callbacks.length&&nextTick(function(){for(var callback,result,i=0,ii=callbacks.length;i<ii;i++){result=callbacks[i][0],callback=callbacks[i][3];try{result.notify(isFunction(callback)?callback(progress):progress)}catch(e){exceptionHandler(e)}}})}});var makePromise=function(value,resolved){var result=new Deferred;return resolved?result.resolve(value):result.reject(value),result.promise},handleCallback=function(value,isResolved,callback){var callbackOutput=null;try{isFunction(callback)&&(callbackOutput=callback())}catch(e){return makePromise(e,!1)}return isPromiseLike(callbackOutput)?callbackOutput.then(function(){return makePromise(value,isResolved)},function(error){return makePromise(error,!1)}):makePromise(value,isResolved)},when=function(value,callback,errback,progressBack){var result=new Deferred;return result.resolve(value),result.promise.then(callback,errback,progressBack)},resolve=when;var $Q=function(resolver){if(!isFunction(resolver))throw $qMinErr("norslvr","Expected resolverFn, got '{0}'",resolver);var deferred=new Deferred;return resolver(function(value){deferred.resolve(value)},function(reason){deferred.reject(reason)}),deferred.promise};return $Q.prototype=Promise.prototype,$Q.defer=defer,$Q.reject=function(reason){var result=new Deferred;return result.reject(reason),result.promise},$Q.when=when,$Q.resolve=resolve,$Q.all=function(promises){var deferred=new Deferred,counter=0,results=isArray(promises)?[]:{};return forEach(promises,function(promise,key){counter++,when(promise).then(function(value){results.hasOwnProperty(key)||(results[key]=value,--counter||deferred.resolve(results))},function(reason){results.hasOwnProperty(key)||deferred.reject(reason)})}),0===counter&&deferred.resolve(results),deferred.promise},$Q.race=function(promises){var deferred=defer();return forEach(promises,function(promise){when(promise).then(deferred.resolve,deferred.reject)}),deferred.promise},$Q}function $$RAFProvider(){this.$get=["$window","$timeout",function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};return raf.supported=rafSupported,raf}]}function $RootScopeProvider(){var TTL=10,$rootScopeMinErr=minErr("$rootScope"),lastDirtyWatch=null,applyAsyncId=null;this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$exceptionHandler","$parse","$browser",function($exceptionHandler,$parse,$browser){function destroyChildScope($event){$event.currentScope.$$destroyed=!0}function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}Scope.prototype={constructor:Scope,$new:function(isolate,parent){var child;return parent=parent||this,isolate?(child=new Scope).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(parent){function ChildScope(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=nextUid(),this.$$ChildScope=null}return ChildScope.prototype=parent,ChildScope}(this)),child=new this.$$ChildScope),child.$parent=parent,child.$$prevSibling=parent.$$childTail,parent.$$childHead?(parent.$$childTail.$$nextSibling=child,parent.$$childTail=child):parent.$$childHead=parent.$$childTail=child,(isolate||parent!==this)&&child.$on("$destroy",destroyChildScope),child},$watch:function(watchExp,listener,objectEquality,prettyPrintExpression){var get=$parse(watchExp);if(get.$$watchDelegate)return get.$$watchDelegate(this,listener,objectEquality,get,watchExp);var scope=this,array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:prettyPrintExpression||watchExp,eq:!!objectEquality};return lastDirtyWatch=null,isFunction(listener)||(watcher.fn=noop),array||(array=scope.$$watchers=[]),array.unshift(watcher),incrementWatchersCount(this,1),function(){arrayRemove(array,watcher)>=0&&incrementWatchersCount(scope,-1),lastDirtyWatch=null}},$watchGroup:function(watchExpressions,listener){var oldValues=new Array(watchExpressions.length),newValues=new Array(watchExpressions.length),deregisterFns=[],self=this,changeReactionScheduled=!1,firstRun=!0;if(!watchExpressions.length){var shouldCall=!0;return self.$evalAsync(function(){shouldCall&&listener(newValues,newValues,self)}),function(){shouldCall=!1}}if(1===watchExpressions.length)return this.$watch(watchExpressions[0],function(value,oldValue,scope){newValues[0]=value,oldValues[0]=oldValue,listener(newValues,value===oldValue?newValues:oldValues,scope)});function watchGroupAction(){changeReactionScheduled=!1,firstRun?(firstRun=!1,listener(newValues,newValues,self)):listener(newValues,oldValues,self)}return forEach(watchExpressions,function(expr,i){var unwatchFn=self.$watch(expr,function(value,oldValue){newValues[i]=value,oldValues[i]=oldValue,changeReactionScheduled||(changeReactionScheduled=!0,self.$evalAsync(watchGroupAction))});deregisterFns.push(unwatchFn)}),function(){for(;deregisterFns.length;)deregisterFns.shift()()}},$watchCollection:function(obj,listener){$watchCollectionInterceptor.$stateful=!0;var newValue,oldValue,veryOldValue,self=this,trackVeryOldValue=listener.length>1,changeDetected=0,changeDetector=$parse(obj,$watchCollectionInterceptor),internalArray=[],internalObject={},initRun=!0,oldLength=0;function $watchCollectionInterceptor(_value){var newLength,key,newItem,oldItem;if(!isUndefined(newValue=_value)){if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldLength=(oldValue=internalArray).length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;i<newLength;i++)oldItem=oldValue[i],newItem=newValue[i],oldItem!=oldItem&&newItem!=newItem||oldItem===newItem||(changeDetected++,oldValue[i]=newItem)}else{for(key in oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0,newValue)hasOwnProperty.call(newValue,key)&&(newLength++,newItem=newValue[key],oldItem=oldValue[key],key in oldValue?oldItem!=oldItem&&newItem!=newItem||oldItem===newItem||(changeDetected++,oldValue[key]=newItem):(oldLength++,oldValue[key]=newItem,changeDetected++));if(oldLength>newLength)for(key in changeDetected++,oldValue)hasOwnProperty.call(newValue,key)||(oldLength--,delete oldValue[key])}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}}return this.$watch(changeDetector,function(){if(initRun?(initRun=!1,listener(newValue,newValue,self)):listener(newValue,veryOldValue,self),trackVeryOldValue)if(isObject(newValue))if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++)veryOldValue[i]=newValue[i]}else for(var key in veryOldValue={},newValue)hasOwnProperty.call(newValue,key)&&(veryOldValue[key]=newValue[key]);else veryOldValue=newValue})},$digest:function(){var watch,value,last,watchers,length,dirty,next,current,logIdx,asyncTask,ttl=TTL,watchLog=[];beginPhase("$digest"),$browser.$$checkUrlChange(),this===$rootScope&&null!==applyAsyncId&&($browser.defer.cancel(applyAsyncId),flushApplyAsync()),lastDirtyWatch=null;do{dirty=!1,current=this;for(var asyncQueuePosition=0;asyncQueuePosition<asyncQueue.length;asyncQueuePosition++){try{(asyncTask=asyncQueue[asyncQueuePosition]).scope.$eval(asyncTask.expression,asyncTask.locals)}catch(e){$exceptionHandler(e)}lastDirtyWatch=null}asyncQueue.length=0;traverseScopesLoop:do{if(watchers=current.$$watchers)for(length=watchers.length;length--;)try{if(watch=watchers[length])if((value=(0,watch.get)(current))===(last=watch.last)||(watch.eq?equals(value,last):isNumberNaN(value)&&isNumberNaN(last))){if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}else dirty=!0,lastDirtyWatch=watch,watch.last=watch.eq?copy(value,null):value,(0,watch.fn)(value,last===initWatchVal?value:last,current),ttl<5&&(watchLog[logIdx=4-ttl]||(watchLog[logIdx]=[]),watchLog[logIdx].push({msg:isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,newVal:value,oldVal:last}))}catch(e){$exceptionHandler(e)}if(!(next=current.$$watchersCount&&current.$$childHead||current!==this&&current.$$nextSibling))for(;current!==this&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if((dirty||asyncQueue.length)&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,watchLog)}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueuePosition<postDigestQueue.length;)try{postDigestQueue[postDigestQueuePosition++]()}catch(e){$exceptionHandler(e)}postDigestQueue.length=postDigestQueuePosition=0},$destroy:function(){if(!this.$$destroyed){var parent=this.$parent;for(var eventName in this.$broadcast("$destroy"),this.$$destroyed=!0,this===$rootScope&&$browser.$$applicationDestroyed(),incrementWatchersCount(this,-this.$$watchersCount),this.$$listenerCount)decrementListenerCount(this,this.$$listenerCount[eventName],eventName);parent&&parent.$$childHead===this&&(parent.$$childHead=this.$$nextSibling),parent&&parent.$$childTail===this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=noop,this.$on=this.$watch=this.$watchGroup=function(){return noop},this.$$listeners={},this.$$nextSibling=null,function cleanUpScope($scope){9===msie&&($scope.$$childHead&&cleanUpScope($scope.$$childHead),$scope.$$nextSibling&&cleanUpScope($scope.$$nextSibling)),$scope.$parent=$scope.$$nextSibling=$scope.$$prevSibling=$scope.$$childHead=$scope.$$childTail=$scope.$root=$scope.$$watchers=null}(this)}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr,locals){$rootScope.$$phase||asyncQueue.length||$browser.defer(function(){asyncQueue.length&&$rootScope.$digest()}),asyncQueue.push({scope:this,expression:$parse(expr),locals:locals})},$$postDigest:function(fn){postDigestQueue.push(fn)},$apply:function(expr){try{beginPhase("$apply");try{return this.$eval(expr)}finally{clearPhase()}}catch(e){$exceptionHandler(e)}finally{try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$applyAsync:function(expr){var scope=this;expr&&applyAsyncQueue.push(function(){scope.$eval(expr)}),expr=$parse(expr),null===applyAsyncId&&(applyAsyncId=$browser.defer(function(){$rootScope.$apply(flushApplyAsync)}))},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener);var current=this;do{current.$$listenerCount[name]||(current.$$listenerCount[name]=0),current.$$listenerCount[name]++}while(current=current.$parent);var self=this;return function(){var indexOfListener=namedListeners.indexOf(listener);-1!==indexOfListener&&(namedListeners[indexOfListener]=null,decrementListenerCount(self,1,name))}},$emit:function(name,args){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;i<length;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)return event.currentScope=null,event;scope=scope.$parent}while(scope);return event.currentScope=null,event},$broadcast:function(name,args){var current=this,next=this,event={name:name,targetScope:this,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[name])return event;for(var listeners,i,length,listenerArgs=concat([event],arguments,1);current=next;){for(event.currentScope=current,i=0,length=(listeners=current.$$listeners[name]||[]).length;i<length;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==this&&current.$$nextSibling))for(;current!==this&&!(next=current.$$nextSibling);)current=current.$parent}return event.currentScope=null,event}};var $rootScope=new Scope,asyncQueue=$rootScope.$$asyncQueue=[],postDigestQueue=$rootScope.$$postDigestQueue=[],applyAsyncQueue=$rootScope.$$applyAsyncQueue=[],postDigestQueuePosition=0;return $rootScope;function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function incrementWatchersCount(current,count){do{current.$$watchersCount+=count}while(current=current.$parent)}function decrementListenerCount(current,count,name){do{current.$$listenerCount[name]-=count,0===current.$$listenerCount[name]&&delete current.$$listenerCount[name]}while(current=current.$parent)}function initWatchVal(){}function flushApplyAsync(){for(;applyAsyncQueue.length;)try{applyAsyncQueue.shift()()}catch(e){$exceptionHandler(e)}applyAsyncId=null}}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function(uri,isImage){var normalizedVal,regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;return""===(normalizedVal=urlResolve(uri).href)||normalizedVal.match(regex)?uri:"unsafe:"+normalizedVal}}}Parser.prototype={constructor:Parser,parse:function(text){return this.astCompiler.compile(text,this.options.expensiveChecks)}};var $sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,function(matcher){adjustedMatchers.push(function(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(matcher.indexOf("***")>-1)throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(matcher))}),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector",function($injector){var htmlSanitizer=function(html){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};function matchUrl(matcher,parsedUrl){return"self"===matcher?urlIsSameOrigin(parsedUrl):!!matcher.exec(parsedUrl.href)}function generateHolderType(Base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},holderType}$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:function(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||isUndefined(trustedValue)||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)},getTrusted:function(type,maybeTrusted){if(null===maybeTrusted||isUndefined(maybeTrusted)||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(function(url){var i,n,parsedUrl=urlResolve(url.toString()),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;i<n;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;i<n;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sceDelegate",function($parse,$sceDelegate){if(enabled&&msie<8)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:$parse(expr,function(value){return sce.getTrusted(type,value)})};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[camelCase("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[camelCase("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[camelCase("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}}),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var vendorPrefix,match,eventSupport={},hasHistoryPushState=!($window.chrome&&($window.chrome.app&&$window.chrome.app.runtime||!$window.chrome.app&&$window.chrome.runtime&&$window.chrome.runtime.id))&&$window.history&&$window.history.pushState,android=toInt((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},vendorRegex=/^(Moz|webkit|ms)(?=[A-Z])/,bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;if(bodyStyle){for(var prop in bodyStyle)if(match=vendorRegex.exec(prop)){vendorPrefix=(vendorPrefix=match[0])[0].toUpperCase()+vendorPrefix.substr(1);break}vendorPrefix||(vendorPrefix="WebkitOpacity"in bodyStyle&&"webkit"),transitions=!!("transition"in bodyStyle||vendorPrefix+"Transition"in bodyStyle),animations=!!("animation"in bodyStyle||vendorPrefix+"Animation"in bodyStyle),!android||transitions&&animations||(transitions=isString(bodyStyle.webkitTransition),animations=isString(bodyStyle.webkitAnimation))}return{history:!(!hasHistoryPushState||android<4||boxee),hasEvent:function(event){if("input"===event&&msie<=11)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),vendorPrefix:vendorPrefix,transitions:transitions,animations:animations,android:android}}]}var $templateRequestMinErr=minErr("$compile");function $TemplateRequestProvider(){var httpOptions;this.httpOptions=function(val){return val?(httpOptions=val,this):httpOptions},this.$get=["$templateCache","$http","$q","$sce",function($templateCache,$http,$q,$sce){function handleRequestFn(tpl,ignoreRequestError){handleRequestFn.totalPendingRequests++,isString(tpl)&&!isUndefined($templateCache.get(tpl))||(tpl=$sce.getTrustedResourceUrl(tpl));var transformResponse=$http.defaults&&$http.defaults.transformResponse;return isArray(transformResponse)?transformResponse=transformResponse.filter(function(transformer){return transformer!==defaultHttpResponseTransform}):transformResponse===defaultHttpResponseTransform&&(transformResponse=null),$http.get(tpl,extend({cache:$templateCache,transformResponse:transformResponse},httpOptions)).finally(function(){handleRequestFn.totalPendingRequests--}).then(function(response){return $templateCache.put(tpl,response.data),response.data},function(resp){if(!ignoreRequestError)throw $templateRequestMinErr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",tpl,resp.status,resp.statusText);return $q.reject(resp)})}return handleRequestFn.totalPendingRequests=0,handleRequestFn}]}function $$TestabilityProvider(){this.$get=["$rootScope","$browser","$location",function($rootScope,$browser,$location){var testability={findBindings:function(element,expression,opt_exactMatch){var bindings=element.getElementsByClassName("ng-binding"),matches=[];return forEach(bindings,function(binding){var dataBinding=angular.element(binding).data("$binding");dataBinding&&forEach(dataBinding,function(bindingName){opt_exactMatch?new RegExp("(^|\\s)"+escapeForRegexp(expression)+"(\\s|\\||$)").test(bindingName)&&matches.push(binding):-1!==bindingName.indexOf(expression)&&matches.push(binding)})}),matches},findModels:function(element,expression,opt_exactMatch){for(var prefixes=["ng-","data-ng-","ng\\:"],p=0;p<prefixes.length;++p){var selector="["+prefixes[p]+"model"+(opt_exactMatch?"=":"*=")+'"'+expression+'"]',elements=element.querySelectorAll(selector);if(elements.length)return elements}},getLocation:function(){return $location.url()},setLocation:function(url){url!==$location.url()&&($location.url(url),$rootScope.$digest())},whenStable:function(callback){$browser.notifyWhenNoOutstandingRequests(callback)}};return testability}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function($rootScope,$browser,$q,$$q,$exceptionHandler){var deferreds={};function timeout(fn,delay,invokeApply){isFunction(fn)||(invokeApply=delay,delay=fn,fn=noop);var timeoutId,args=sliceArgs(arguments,3),skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return timeoutId=$browser.defer(function(){try{deferred.resolve(fn.apply(null,args))}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}return timeout.cancel=function(promise){return!!(promise&&promise.$$timeoutId in deferreds)&&(deferreds[promise.$$timeoutId].reject("canceled"),delete deferreds[promise.$$timeoutId],$browser.defer.cancel(promise.$$timeoutId))},timeout}]}var urlParsingNode=window.document.createElement("a"),originUrl=urlResolve(window.location.href);function urlResolve(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $$CookieReader($document){var rawDocument=$document[0]||{},lastCookies={},lastCookieString="";function safeDecodeURIComponent(str){try{return decodeURIComponent(str)}catch(e){return str}}return function(){var cookieArray,cookie,i,index,name,currentCookieString=rawDocument.cookie||"";if(currentCookieString!==lastCookieString)for(cookieArray=(lastCookieString=currentCookieString).split("; "),lastCookies={},i=0;i<cookieArray.length;i++)(index=(cookie=cookieArray[i]).indexOf("="))>0&&(name=safeDecodeURIComponent(cookie.substring(0,index)),isUndefined(lastCookies[name])&&(lastCookies[name]=safeDecodeURIComponent(cookie.substring(index+1))));return lastCookies}}function $$CookieReaderProvider(){this.$get=$$CookieReader}function $FilterProvider($provide){var suffix="Filter";function register(name,factory){if(isObject(name)){var filters={};return forEach(name,function(filter,key){filters[key]=register(key,filter)}),filters}return $provide.factory(name+suffix,factory)}this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator,anyPropertyKey){if(!isArrayLike(array)){if(null==array)return array;throw minErr("filter")("notarray","Expected array but received: {0}",array)}var predicateFn,matchAgainstAnyProp;switch(anyPropertyKey=anyPropertyKey||"$",getTypeForFilter(expression)){case"function":predicateFn=expression;break;case"boolean":case"null":case"number":case"string":matchAgainstAnyProp=!0;case"object":predicateFn=function(expression,comparator,anyPropertyKey,matchAgainstAnyProp){var shouldMatchPrimitives=isObject(expression)&&anyPropertyKey in expression;!0===comparator?comparator=equals:isFunction(comparator)||(comparator=function(actual,expected){return!isUndefined(actual)&&(null===actual||null===expected?actual===expected:!(isObject(expected)||isObject(actual)&&!hasCustomToString(actual))&&(actual=lowercase(""+actual),expected=lowercase(""+expected),-1!==actual.indexOf(expected)))});return function(item){return shouldMatchPrimitives&&!isObject(item)?deepCompare(item,expression[anyPropertyKey],comparator,anyPropertyKey,!1):deepCompare(item,expression,comparator,anyPropertyKey,matchAgainstAnyProp)}}(expression,comparator,anyPropertyKey,matchAgainstAnyProp);break;default:return array}return Array.prototype.filter.call(array,predicateFn)}}function deepCompare(actual,expected,comparator,anyPropertyKey,matchAgainstAnyProp,dontMatchWholeObject){var actualType=getTypeForFilter(actual),expectedType=getTypeForFilter(expected);if("string"===expectedType&&"!"===expected.charAt(0))return!deepCompare(actual,expected.substring(1),comparator,anyPropertyKey,matchAgainstAnyProp);if(isArray(actual))return actual.some(function(item){return deepCompare(item,expected,comparator,anyPropertyKey,matchAgainstAnyProp)});switch(actualType){case"object":var key;if(matchAgainstAnyProp){for(key in actual)if("$"!==key.charAt(0)&&deepCompare(actual[key],expected,comparator,anyPropertyKey,!0))return!0;return!dontMatchWholeObject&&deepCompare(actual,expected,comparator,anyPropertyKey,!1)}if("object"===expectedType){for(key in expected){var expectedVal=expected[key];if(!isFunction(expectedVal)&&!isUndefined(expectedVal)){var matchAnyProperty=key===anyPropertyKey;if(!deepCompare(matchAnyProperty?actual:actual[key],expectedVal,comparator,anyPropertyKey,matchAnyProperty,matchAnyProperty))return!1}}return!0}return comparator(actual,expected);case"function":return!1;default:return comparator(actual,expected)}}function getTypeForFilter(val){return null===val?"null":typeof val}$$CookieReader.$inject=["$document"],$FilterProvider.$inject=["$provide"];var MAX_DIGITS=22,DECIMAL_SEP=".",ZERO_CHAR="0";function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol,fractionSize){return isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),isUndefined(fractionSize)&&(fractionSize=formats.PATTERNS[1].maxFrac),null==amount?amount:formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return null==number?number:formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(!isString(number)&&!isNumber(number)||isNaN(number))return"";var parsedNumber,isInfinity=!isFinite(number),isZero=!1,numStr=Math.abs(number)+"",formattedText="";if(isInfinity)formattedText="";else{(function(parsedNumber,fractionSize,minFrac,maxFrac){var digits=parsedNumber.d,fractionLen=digits.length-parsedNumber.i,roundAt=(fractionSize=isUndefined(fractionSize)?Math.min(Math.max(minFrac,fractionLen),maxFrac):+fractionSize)+parsedNumber.i,digit=digits[roundAt];if(roundAt>0){digits.splice(Math.max(parsedNumber.i,roundAt));for(var j=roundAt;j<digits.length;j++)digits[j]=0}else{fractionLen=Math.max(0,fractionLen),parsedNumber.i=1,digits.length=Math.max(1,roundAt=fractionSize+1),digits[0]=0;for(var i=1;i<roundAt;i++)digits[i]=0}if(digit>=5)if(roundAt-1<0){for(var k=0;k>roundAt;k--)digits.unshift(0),parsedNumber.i++;digits.unshift(1),parsedNumber.i++}else digits[roundAt-1]++;for(;fractionLen<Math.max(0,fractionSize);fractionLen++)digits.push(0);var carry=digits.reduceRight(function(carry,d,i,digits){return d+=carry,digits[i]=d%10,Math.floor(d/10)},0);carry&&(digits.unshift(carry),parsedNumber.i++)})(parsedNumber=function(numStr){var digits,numberOfIntegerDigits,i,j,zeros,exponent=0;for((numberOfIntegerDigits=numStr.indexOf(DECIMAL_SEP))>-1&&(numStr=numStr.replace(DECIMAL_SEP,"")),(i=numStr.search(/e/i))>0?(numberOfIntegerDigits<0&&(numberOfIntegerDigits=i),numberOfIntegerDigits+=+numStr.slice(i+1),numStr=numStr.substring(0,i)):numberOfIntegerDigits<0&&(numberOfIntegerDigits=numStr.length),i=0;numStr.charAt(i)===ZERO_CHAR;i++);if(i===(zeros=numStr.length))digits=[0],numberOfIntegerDigits=1;else{for(zeros--;numStr.charAt(zeros)===ZERO_CHAR;)zeros--;for(numberOfIntegerDigits-=i,digits=[],j=0;i<=zeros;i++,j++)digits[j]=+numStr.charAt(i)}return numberOfIntegerDigits>MAX_DIGITS&&(digits=digits.splice(0,MAX_DIGITS-1),exponent=numberOfIntegerDigits-1,numberOfIntegerDigits=1),{d:digits,e:exponent,i:numberOfIntegerDigits}}(numStr),fractionSize,pattern.minFrac,pattern.maxFrac);var digits=parsedNumber.d,integerLen=parsedNumber.i,exponent=parsedNumber.e,decimals=[];for(isZero=digits.reduce(function(isZero,d){return isZero&&!d},!0);integerLen<0;)digits.unshift(0),integerLen++;integerLen>0?decimals=digits.splice(integerLen,digits.length):(decimals=digits,digits=[0]);var groups=[];for(digits.length>=pattern.lgSize&&groups.unshift(digits.splice(-pattern.lgSize,digits.length).join(""));digits.length>pattern.gSize;)groups.unshift(digits.splice(-pattern.gSize,digits.length).join(""));digits.length&&groups.unshift(digits.join("")),formattedText=groups.join(groupSep),decimals.length&&(formattedText+=decimalSep+decimals.join("")),exponent&&(formattedText+="e+"+exponent)}return number<0&&!isZero?pattern.negPre+formattedText+pattern.negSuf:pattern.posPre+formattedText+pattern.posSuf}function padNumber(num,digits,trim,negWrap){var neg="";for((num<0||negWrap&&num<=0)&&(negWrap?num=1-num:(num=-num,neg="-")),num=""+num;num.length<digits;)num=ZERO_CHAR+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim,negWrap){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&-12===offset&&(value=12),padNumber(value,size,trim,negWrap)}}function dateStrGetter(name,shortForm,standAlone){return function(date,formats){var value=date["get"+name]();return formats[uppercase((standAlone?"STANDALONE":"")+(shortForm?"SHORT":"")+name)][value]}}function getFirstThursdayOfYear(year){var dayOfWeekOnFirst=new Date(year,0,1).getDay();return new Date(year,0,(dayOfWeekOnFirst<=4?5:12)-dayOfWeekOnFirst)}function weekGetter(size){return function(date){var datetime,firstThurs=getFirstThursdayOfYear(date.getFullYear()),diff=+(datetime=date,new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay())))-+firstThurs;return padNumber(1+Math.round(diff/6048e5),size)}}function eraGetter(date,formats){return date.getFullYear()<=0?formats.ERAS[0]:formats.ERAS[1]}currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DATE_FORMATS={yyyy:dateGetter("FullYear",4,0,!1,!0),yy:dateGetter("FullYear",2,0,!0,!0),y:dateGetter("FullYear",1,0,!1,!0),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),LLLL:dateStrGetter("Month",!1,!0),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:function(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]},Z:function(date,formats,offset){var zone=-1*offset,paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)},ww:weekGetter(2),w:weekGetter(1),G:eraGetter,GG:eraGetter,GGG:eraGetter,GGGG:function(date,formats){return date.getFullYear()<=0?formats.ERANAMES[0]:formats.ERANAMES[1]}},DATE_FORMATS_SPLIT=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,NUMBER_STRING=/^\-?\d+$/;function dateFilter($locale){var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format,timezone){var fn,match,text="",parts=[];if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?toInt(date):function(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=toInt(match[9]+match[10]),tzMin=toInt(match[9]+match[11])),dateSetter.call(date,toInt(match[1]),toInt(match[2])-1,toInt(match[3]));var h=toInt(match[4]||0)-tzHour,m=toInt(match[5]||0)-tzMin,s=toInt(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}(date)),isNumber(date)&&(date=new Date(date)),!isDate(date)||!isFinite(date.getTime()))return date;for(;format;)(match=DATE_FORMATS_SPLIT.exec(format))?format=(parts=concat(parts,match,1)).pop():(parts.push(format),format=null);var dateTimezoneOffset=date.getTimezoneOffset();return timezone&&(dateTimezoneOffset=timezoneToOffset(timezone,dateTimezoneOffset),date=convertTimezoneToLocal(date,timezone,!0)),forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,$locale.DATETIME_FORMATS,dateTimezoneOffset):"''"===value?"'":value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}function jsonFilter(){return function(object,spacing){return isUndefined(spacing)&&(spacing=2),toJson(object,spacing)}}dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);function limitToFilter(){return function(input,limit,begin){return limit=Math.abs(Number(limit))===1/0?Number(limit):toInt(limit),isNumberNaN(limit)?input:(isNumber(input)&&(input=input.toString()),isArrayLike(input)?(begin=(begin=!begin||isNaN(begin)?0:toInt(begin))<0?Math.max(0,input.length+begin):begin,limit>=0?sliceFn(input,begin,begin+limit):0===begin?sliceFn(input,limit,input.length):sliceFn(input,Math.max(0,begin+limit),begin)):input)}}function sliceFn(input,begin,end){return isString(input)?input.slice(begin,end):slice.call(input,begin,end)}function orderByFilter($parse){return function(array,sortPredicate,reverseOrder,compareFn){if(null==array)return array;if(!isArrayLike(array))throw minErr("orderBy")("notarray","Expected array but received: {0}",array);isArray(sortPredicate)||(sortPredicate=[sortPredicate]),0===sortPredicate.length&&(sortPredicate=["+"]);var predicates=sortPredicate.map(function(predicate){var descending=1,get=identity;if(isFunction(predicate))get=predicate;else if(isString(predicate)&&("+"!==predicate.charAt(0)&&"-"!==predicate.charAt(0)||(descending="-"===predicate.charAt(0)?-1:1,predicate=predicate.substring(1)),""!==predicate&&(get=$parse(predicate)).constant)){var key=get();get=function(value){return value[key]}}return{get:get,descending:descending}}),descending=reverseOrder?-1:1,compare=isFunction(compareFn)?compareFn:defaultCompare,compareValues=Array.prototype.map.call(array,function(value,index){return{value:value,tieBreaker:{value:index,type:"number",index:index},predicateValues:predicates.map(function(predicate){return function(value,index){var type=typeof value;null===value?(type="string",value="null"):"object"===type&&(value=function(value){if(isFunction(value.valueOf)&&isPrimitive(value=value.valueOf()))return value;if(hasCustomToString(value)&&isPrimitive(value=value.toString()))return value;return value}(value));return{value:value,type:type,index:index}}(predicate.get(value),index)})}});return compareValues.sort(function(v1,v2){for(var i=0,ii=predicates.length;i<ii;i++){var result=compare(v1.predicateValues[i],v2.predicateValues[i]);if(result)return result*predicates[i].descending*descending}return compare(v1.tieBreaker,v2.tieBreaker)*descending}),array=compareValues.map(function(item){return item.value})};function isPrimitive(value){switch(typeof value){case"number":case"boolean":case"string":return!0;default:return!1}}function defaultCompare(v1,v2){var result=0,type1=v1.type,type2=v2.type;if(type1===type2){var value1=v1.value,value2=v2.value;"string"===type1?(value1=value1.toLowerCase(),value2=value2.toLowerCase()):"object"===type1&&(isObject(value1)&&(value1=v1.index),isObject(value2)&&(value2=v2.index)),value1!==value2&&(result=value1<value2?-1:1)}else result=type1<type2?-1:1;return result}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){if(!attr.href&&!attr.xlinkHref)return function(scope,element){if("a"===element[0].nodeName.toLowerCase()){var href="[object SVGAnimatedString]"===toString.call(element.prop("href"))?"xlink:href":"href";element.on("click",function(event){element.attr(href)||event.preventDefault()})}}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){if("multiple"!==propName){var normalized=directiveNormalize("ng-"+attrName),linkFn=defaultLinkFn;"checked"===propName&&(linkFn=function(scope,element,attr){attr.ngModel!==attr[normalized]&&defaultLinkFn(scope,0,attr)}),ngAttributeAliasDirectives[normalized]=function(){return{restrict:"A",priority:100,link:linkFn}}}function defaultLinkFn(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}}),forEach(ALIASED_ATTR,function(htmlAttr,ngAttr){ngAttributeAliasDirectives[ngAttr]=function(){return{priority:100,link:function(scope,element,attr){if("ngPattern"===ngAttr&&"/"===attr.ngPattern.charAt(0)){var match=attr.ngPattern.match(REGEX_STRING_REGEXP);if(match)return void attr.$set("ngPattern",new RegExp(match[1],match[2]))}scope.$watch(attr[ngAttr],function(value){attr.$set(ngAttr,value)})}}}}),forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;"href"===attrName&&"[object SVGAnimatedString]"===toString.call(element.prop("href"))&&(name="xlinkHref",attr.$attr[name]="xlink:href",propName=null),attr.$observe(normalized,function(value){value?(attr.$set(name,value),msie&&propName&&element.prop(propName,attr[name])):"href"===attrName&&attr.$set(name,null)})}}}});var nullFormCtrl={$addControl:noop,$$renameControl:function(control,name){control.$name=name},$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop,$setSubmitted:noop},SUBMITTED_CLASS="ng-submitted";function FormController(element,attrs,$scope,$animate,$interpolate){var form=this,controls=[];form.$error={},form.$$success={},form.$pending=void 0,form.$name=$interpolate(attrs.name||attrs.ngForm||"")($scope),form.$dirty=!1,form.$pristine=!0,form.$valid=!0,form.$invalid=!1,form.$submitted=!1,form.$$parentForm=nullFormCtrl,form.$rollbackViewValue=function(){forEach(controls,function(control){control.$rollbackViewValue()})},form.$commitViewValue=function(){forEach(controls,function(control){control.$commitViewValue()})},form.$addControl=function(control){assertNotHasOwnProperty(control.$name,"input"),controls.push(control),control.$name&&(form[control.$name]=control),control.$$parentForm=form},form.$$renameControl=function(control,newName){var oldName=control.$name;form[oldName]===control&&delete form[oldName],form[newName]=control,control.$name=newName},form.$removeControl=function(control){control.$name&&form[control.$name]===control&&delete form[control.$name],forEach(form.$pending,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$error,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$$success,function(value,name){form.$setValidity(name,null,control)}),arrayRemove(controls,control),control.$$parentForm=nullFormCtrl},addSetValidityMethod({ctrl:this,$element:element,set:function(object,property,controller){var list=object[property];list?-1===list.indexOf(controller)&&list.push(controller):object[property]=[controller]},unset:function(object,property,controller){var list=object[property];list&&(arrayRemove(list,controller),0===list.length&&delete object[property])},$animate:$animate}),form.$setDirty=function(){$animate.removeClass(element,PRISTINE_CLASS),$animate.addClass(element,DIRTY_CLASS),form.$dirty=!0,form.$pristine=!1,form.$$parentForm.$setDirty()},form.$setPristine=function(){$animate.setClass(element,PRISTINE_CLASS,DIRTY_CLASS+" "+SUBMITTED_CLASS),form.$dirty=!1,form.$pristine=!0,form.$submitted=!1,forEach(controls,function(control){control.$setPristine()})},form.$setUntouched=function(){forEach(controls,function(control){control.$setUntouched()})},form.$setSubmitted=function(){$animate.addClass(element,SUBMITTED_CLASS),form.$submitted=!0,form.$$parentForm.$setSubmitted()}}FormController.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var formDirectiveFactory=function(isNgForm){return["$timeout","$parse",function($timeout,$parse){return{name:"form",restrict:isNgForm?"EAC":"E",require:["form","^^?form"],controller:FormController,compile:function(formElement,attr){formElement.addClass(PRISTINE_CLASS).addClass(VALID_CLASS);var nameAttr=attr.name?"name":!(!isNgForm||!attr.ngForm)&&"ngForm";return{pre:function(scope,formElement,attr,ctrls){var controller=ctrls[0];if(!("action"in attr)){var handleFormSubmission=function(event){scope.$apply(function(){controller.$commitViewValue(),controller.$setSubmitted()}),event.preventDefault()};addEventListenerFn(formElement[0],"submit",handleFormSubmission),formElement.on("$destroy",function(){$timeout(function(){removeEventListenerFn(formElement[0],"submit",handleFormSubmission)},0,!1)})}(ctrls[1]||controller.$$parentForm).$addControl(controller);var setter=nameAttr?getSetter(controller.$name):noop;nameAttr&&(setter(scope,controller),attr.$observe(nameAttr,function(newValue){controller.$name!==newValue&&(setter(scope,void 0),controller.$$parentForm.$$renameControl(controller,newValue),(setter=getSetter(controller.$name))(scope,controller))})),formElement.on("$destroy",function(){controller.$$parentForm.$removeControl(controller),setter(scope,void 0),extend(controller,nullFormCtrl)})}}}};function getSetter(expression){return""===expression?$parse('this[""]').assign:$parse(expression).assign||noop}}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0),ISO_DATE_REGEXP=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,URL_REGEXP=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,EMAIL_REGEXP=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,NUMBER_REGEXP=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,DATE_REGEXP=/^(\d{4,})-(\d{2})-(\d{2})$/,DATETIMELOCAL_REGEXP=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,WEEK_REGEXP=/^(\d{4,})-W(\d\d)$/,MONTH_REGEXP=/^(\d{4,})-(\d\d)$/,TIME_REGEXP=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,PARTIAL_VALIDATION_EVENTS="keydown wheel mousedown",PARTIAL_VALIDATION_TYPES=createMap();forEach("date,datetime-local,month,time,week".split(","),function(type){PARTIAL_VALIDATION_TYPES[type]=!0});var inputType={text:function(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl)},date:createDateInputType("date",DATE_REGEXP,createDateParser(DATE_REGEXP,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":createDateInputType("datetimelocal",DATETIMELOCAL_REGEXP,createDateParser(DATETIMELOCAL_REGEXP,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:createDateInputType("time",TIME_REGEXP,createDateParser(TIME_REGEXP,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:createDateInputType("week",WEEK_REGEXP,function(isoWeek,existingDate){if(isDate(isoWeek))return isoWeek;if(isString(isoWeek)){WEEK_REGEXP.lastIndex=0;var parts=WEEK_REGEXP.exec(isoWeek);if(parts){var year=+parts[1],week=+parts[2],hours=0,minutes=0,seconds=0,milliseconds=0,firstThurs=getFirstThursdayOfYear(year),addDays=7*(week-1);return existingDate&&(hours=existingDate.getHours(),minutes=existingDate.getMinutes(),seconds=existingDate.getSeconds(),milliseconds=existingDate.getMilliseconds()),new Date(year,0,firstThurs.getDate()+addDays,hours,minutes,seconds,milliseconds)}}return NaN},"yyyy-Www"),month:createDateInputType("month",MONTH_REGEXP,createDateParser(MONTH_REGEXP,["yyyy","MM"]),"yyyy-MM"),number:function(scope,element,attr,ctrl,$sniffer,$browser){var minVal,maxVal;badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser),numberFormatterParser(ctrl),(isDefined(attr.min)||attr.ngMin)&&(ctrl.$validators.min=function(value){return ctrl.$isEmpty(value)||isUndefined(minVal)||value>=minVal},attr.$observe("min",function(val){minVal=parseNumberAttrVal(val),ctrl.$validate()}));(isDefined(attr.max)||attr.ngMax)&&(ctrl.$validators.max=function(value){return ctrl.$isEmpty(value)||isUndefined(maxVal)||value<=maxVal},attr.$observe("max",function(val){maxVal=parseNumberAttrVal(val),ctrl.$validate()}))},url:function(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="url",ctrl.$validators.url=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||URL_REGEXP.test(value)}},email:function(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="email",ctrl.$validators.email=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value)}},radio:function(scope,element,attr,ctrl){isUndefined(attr.name)&&element.attr("name",nextUid());element.on("click",function(ev){element[0].checked&&ctrl.$setViewValue(attr.value,ev&&ev.type)}),ctrl.$render=function(){var value=attr.value;element[0].checked=value===ctrl.$viewValue},attr.$observe("value",ctrl.$render)},range:function(scope,element,attr,ctrl,$sniffer,$browser){badInputChecker(scope,element,attr,ctrl),numberFormatterParser(ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var supportsRange=ctrl.$$hasNativeValidators&&"range"===element[0].type,minVal=supportsRange?0:void 0,maxVal=supportsRange?100:void 0,stepVal=supportsRange?1:void 0,validity=element[0].validity,hasMinAttr=isDefined(attr.min),hasMaxAttr=isDefined(attr.max),hasStepAttr=isDefined(attr.step),originalRender=ctrl.$render;ctrl.$render=supportsRange&&isDefined(validity.rangeUnderflow)&&isDefined(validity.rangeOverflow)?function(){originalRender(),ctrl.$setViewValue(element.val())}:originalRender,hasMinAttr&&(ctrl.$validators.min=supportsRange?function(){return!0}:function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(minVal)||viewValue>=minVal},setInitialValueAndObserver("min",function(val){if(minVal=parseNumberAttrVal(val),isNumberNaN(ctrl.$modelValue))return;if(supportsRange){var elVal=element.val();minVal>elVal&&(elVal=minVal,element.val(elVal)),ctrl.$setViewValue(elVal)}else ctrl.$validate()}));hasMaxAttr&&(ctrl.$validators.max=supportsRange?function(){return!0}:function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(maxVal)||viewValue<=maxVal},setInitialValueAndObserver("max",function(val){if(maxVal=parseNumberAttrVal(val),isNumberNaN(ctrl.$modelValue))return;if(supportsRange){var elVal=element.val();maxVal<elVal&&(element.val(maxVal),elVal=maxVal<minVal?minVal:maxVal),ctrl.$setViewValue(elVal)}else ctrl.$validate()}));hasStepAttr&&(ctrl.$validators.step=supportsRange?function(){return!validity.stepMismatch}:function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(stepVal)||function(viewValue,stepBase,step){var value=Number(viewValue);if(!isNumberInteger(value)||!isNumberInteger(stepBase)||!isNumberInteger(step)){var decimalCount=Math.max(countDecimals(value),countDecimals(stepBase),countDecimals(step)),multiplier=Math.pow(10,decimalCount);value*=multiplier,stepBase*=multiplier,step*=multiplier}return(value-stepBase)%step==0}(viewValue,minVal||0,stepVal)},setInitialValueAndObserver("step",function(val){if(stepVal=parseNumberAttrVal(val),isNumberNaN(ctrl.$modelValue))return;supportsRange&&ctrl.$viewValue!==element.val()?ctrl.$setViewValue(element.val()):ctrl.$validate()}));function setInitialValueAndObserver(htmlAttrName,changeFn){element.attr(htmlAttrName,attr[htmlAttrName]),attr.$observe(htmlAttrName,changeFn)}},checkbox:function(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){var trueValue=parseConstantExpr($parse,scope,"ngTrueValue",attr.ngTrueValue,!0),falseValue=parseConstantExpr($parse,scope,"ngFalseValue",attr.ngFalseValue,!1);element.on("click",function(ev){ctrl.$setViewValue(element[0].checked,ev&&ev.type)}),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return!1===value},ctrl.$formatters.push(function(value){return equals(value,trueValue)}),ctrl.$parsers.push(function(value){return value?trueValue:falseValue})},hidden:noop,button:noop,submit:noop,reset:noop,file:noop};function stringBasedInputType(ctrl){ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?value:value.toString()})}function baseInputType(scope,element,attr,ctrl,$sniffer,$browser){var timeout,type=lowercase(element[0].type);if(!$sniffer.android){var composing=!1;element.on("compositionstart",function(){composing=!0}),element.on("compositionend",function(){composing=!1,listener()})}var listener=function(ev){if(timeout&&($browser.defer.cancel(timeout),timeout=null),!composing){var value=element.val(),event=ev&&ev.type;"password"===type||attr.ngTrim&&"false"===attr.ngTrim||(value=trim(value)),(ctrl.$viewValue!==value||""===value&&ctrl.$$hasNativeValidators)&&ctrl.$setViewValue(value,event)}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var deferListener=function(ev,input,origValue){timeout||(timeout=$browser.defer(function(){timeout=null,input&&input.value===origValue||listener(ev)}))};element.on("keydown",function(event){var key=event.keyCode;91===key||15<key&&key<19||37<=key&&key<=40||deferListener(event,this,this.value)}),$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}element.on("change",listener),PARTIAL_VALIDATION_TYPES[type]&&ctrl.$$hasNativeValidators&&type===attr.type&&element.on(PARTIAL_VALIDATION_EVENTS,function(ev){if(!timeout){var validity=this[VALIDITY_STATE_PROPERTY],origBadInput=validity.badInput,origTypeMismatch=validity.typeMismatch;timeout=$browser.defer(function(){timeout=null,validity.badInput===origBadInput&&validity.typeMismatch===origTypeMismatch||listener(ev)})}}),ctrl.$render=function(){var value=ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue;element.val()!==value&&element.val(value)}}function createDateParser(regexp,mapping){return function(iso,date){var parts,map;if(isDate(iso))return iso;if(isString(iso)){if('"'===iso.charAt(0)&&'"'===iso.charAt(iso.length-1)&&(iso=iso.substring(1,iso.length-1)),ISO_DATE_REGEXP.test(iso))return new Date(iso);if(regexp.lastIndex=0,parts=regexp.exec(iso))return parts.shift(),map=date?{yyyy:date.getFullYear(),MM:date.getMonth()+1,dd:date.getDate(),HH:date.getHours(),mm:date.getMinutes(),ss:date.getSeconds(),sss:date.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},forEach(parts,function(part,index){index<mapping.length&&(map[mapping[index]]=+part)}),new Date(map.yyyy,map.MM-1,map.dd,map.HH,map.mm,map.ss||0,1e3*map.sss||0)}return NaN}}function createDateInputType(type,regexp,parseDate,format){return function(scope,element,attr,ctrl,$sniffer,$browser,$filter){badInputChecker(scope,element,attr,ctrl),baseInputType(0,element,attr,ctrl,$sniffer,$browser);var previousDate,minVal,maxVal,timezone=ctrl&&ctrl.$options&&ctrl.$options.timezone;(ctrl.$$parserName=type,ctrl.$parsers.push(function(value){if(ctrl.$isEmpty(value))return null;if(regexp.test(value)){var parsedDate=parseDate(value,previousDate);return timezone&&(parsedDate=convertTimezoneToLocal(parsedDate,timezone)),parsedDate}}),ctrl.$formatters.push(function(value){if(value&&!isDate(value))throw ngModelMinErr("datefmt","Expected `{0}` to be a date",value);return isValidDate(value)?((previousDate=value)&&timezone&&(previousDate=convertTimezoneToLocal(previousDate,timezone,!0)),$filter("date")(value,format,timezone)):(previousDate=null,"")}),isDefined(attr.min)||attr.ngMin)&&(ctrl.$validators.min=function(value){return!isValidDate(value)||isUndefined(minVal)||parseDate(value)>=minVal},attr.$observe("min",function(val){minVal=parseObservedDateValue(val),ctrl.$validate()}));(isDefined(attr.max)||attr.ngMax)&&(ctrl.$validators.max=function(value){return!isValidDate(value)||isUndefined(maxVal)||parseDate(value)<=maxVal},attr.$observe("max",function(val){maxVal=parseObservedDateValue(val),ctrl.$validate()}));function isValidDate(value){return value&&!(value.getTime&&value.getTime()!=value.getTime())}function parseObservedDateValue(val){return isDefined(val)&&!isDate(val)?parseDate(val)||void 0:val}}}function badInputChecker(scope,element,attr,ctrl){var node=element[0];(ctrl.$$hasNativeValidators=isObject(node.validity))&&ctrl.$parsers.push(function(value){var validity=element.prop(VALIDITY_STATE_PROPERTY)||{};return validity.badInput||validity.typeMismatch?void 0:value})}function numberFormatterParser(ctrl){ctrl.$$parserName="number",ctrl.$parsers.push(function(value){return ctrl.$isEmpty(value)?null:NUMBER_REGEXP.test(value)?parseFloat(value):void 0}),ctrl.$formatters.push(function(value){if(!ctrl.$isEmpty(value)){if(!isNumber(value))throw ngModelMinErr("numfmt","Expected `{0}` to be a number",value);value=value.toString()}return value})}function parseNumberAttrVal(val){return isDefined(val)&&!isNumber(val)&&(val=parseFloat(val)),isNumberNaN(val)?void 0:val}function isNumberInteger(num){return(0|num)===num}function countDecimals(num){var numString=num.toString(),decimalSymbolIndex=numString.indexOf(".");if(-1===decimalSymbolIndex){if(-1<num&&num<1){var match=/e-(\d+)$/.exec(numString);if(match)return Number(match[1])}return 0}return numString.length-decimalSymbolIndex-1}function parseConstantExpr($parse,context,name,expression,fallback){var parseFn;if(isDefined(expression)){if(!(parseFn=$parse(expression)).constant)throw ngModelMinErr("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",name,expression);return parseFn(context)}return fallback}var inputDirective=["$browser","$sniffer","$filter","$parse",function($browser,$sniffer,$filter,$parse){return{restrict:"E",require:["?ngModel"],link:{pre:function(scope,element,attr,ctrls){if(ctrls[0]){var type=lowercase(attr.type);"range"!==type||attr.hasOwnProperty("ngInputRange")||(type="text"),(inputType[type]||inputType.text)(scope,element,attr,ctrls[0],$sniffer,$browser,$filter,$parse)}}}}}],CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){return{restrict:"A",priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){attr.$set("value",scope.$eval(attr.ngValue))}:function(scope,elm,attr){scope.$watch(attr.ngValue,function(value){attr.$set("value",value)})}}}},ngBindDirective=["$compile",function($compile){return{restrict:"AC",compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBind),element=element[0],scope.$watch(attr.ngBind,function(value){element.textContent=isUndefined(value)?"":value})}}}}],ngBindTemplateDirective=["$interpolate","$compile",function($interpolate,$compile){return{compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));$compile.$$addBindingInfo(element,interpolateFn.expressions),element=element[0],attr.$observe("ngBindTemplate",function(value){element.textContent=isUndefined(value)?"":value})}}}}],ngBindHtmlDirective=["$sce","$parse","$compile",function($sce,$parse,$compile){return{restrict:"A",compile:function(tElement,tAttrs){var ngBindHtmlGetter=$parse(tAttrs.ngBindHtml),ngBindHtmlWatch=$parse(tAttrs.ngBindHtml,function(val){return $sce.valueOf(val)});return $compile.$$addBindingClass(tElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBindHtml),scope.$watch(ngBindHtmlWatch,function(){var value=ngBindHtmlGetter(scope);element.html($sce.getTrustedHtml(value)||"")})}}}}],ngChangeDirective=valueFn({restrict:"A",require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}});function classDirective(name,selector){return name="ngClass"+name,["$animate",function($animate){return{restrict:"AC",link:function(scope,element,attr){var oldVal;function addClasses(classes){var newClasses=digestClassCounts(classes,1);attr.$addClass(newClasses)}function digestClassCounts(classes,count){var classCounts=element.data("$classCounts")||createMap(),classesToUpdate=[];return forEach(classes,function(className){(count>0||classCounts[className])&&(classCounts[className]=(classCounts[className]||0)+count,classCounts[className]===+(count>0)&&classesToUpdate.push(className))}),element.data("$classCounts",classCounts),classesToUpdate.join(" ")}function ngClassWatchAction(newVal){if(!0===selector||(1&scope.$index)===selector){var newClasses=arrayClasses(newVal||[]);if(oldVal){if(!equals(newVal,oldVal)){!function(oldClasses,newClasses){var toAdd=arrayDifference(newClasses,oldClasses),toRemove=arrayDifference(oldClasses,newClasses);toAdd=digestClassCounts(toAdd,1),toRemove=digestClassCounts(toRemove,-1),toAdd&&toAdd.length&&$animate.addClass(element,toAdd),toRemove&&toRemove.length&&$animate.removeClass(element,toRemove)}(arrayClasses(oldVal),newClasses)}}else addClasses(newClasses)}oldVal=isArray(newVal)?newVal.map(function(v){return shallowCopy(v)}):shallowCopy(newVal)}scope.$watch(attr[name],ngClassWatchAction,!0),attr.$observe("class",function(value){ngClassWatchAction(scope.$eval(attr[name]))}),"ngClass"!==name&&scope.$watch("$index",function($index,old$index){var mod=1&$index;if(mod!==(1&old$index)){var classes=arrayClasses(scope.$eval(attr[name]));mod===selector?addClasses(classes):function(classes){var newClasses=digestClassCounts(classes,-1);attr.$removeClass(newClasses)}(classes)}})}};function arrayDifference(tokens1,tokens2){var values=[];outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token===tokens2[j])continue outer;values.push(token)}return values}function arrayClasses(classVal){var classes=[];return isArray(classVal)?(forEach(classVal,function(v){classes=classes.concat(arrayClasses(v))}),classes):isString(classVal)?classVal.split(" "):isObject(classVal)?(forEach(classVal,function(v,k){v&&(classes=classes.concat(k.split(" ")))}),classes):classVal}}]}var ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",void 0),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ngEventDirectives={},forceAsyncEvents={blur:!0,focus:!0};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(eventName){var directiveName=directiveNormalize("ng-"+eventName);ngEventDirectives[directiveName]=["$parse","$rootScope",function($parse,$rootScope){return{restrict:"A",compile:function($element,attr){var fn=$parse(attr[directiveName],null,!0);return function(scope,element){element.on(eventName,function(event){var callback=function(){fn(scope,{$event:event})};forceAsyncEvents[eventName]&&$rootScope.$$phase?scope.$evalAsync(callback):scope.$apply(callback)})}}}}]});var ngIfDirective=["$animate","$compile",function($animate,$compile){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function(value){value?childScope||$transclude(function(clone,newScope){childScope=newScope,clone[clone.length++]=$compile.$$createComment("end ngIf",$attr.ngIf),block={clone:clone},$animate.enter(clone,$element.parent(),$element)}):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockNodes(block.clone),$animate.leave(previousElements).then(function(){previousElements=null}),block=null))})}}}],ngIncludeDirective=["$templateRequest","$anchorScroll","$animate",function($templateRequest,$anchorScroll,$animate){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var currentScope,previousElement,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).then(function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch(srcExp,function(src){var afterAnimation=function(){!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($templateRequest(src,!0).then(function(response){if(!scope.$$destroyed&&thisChangeId===changeCounter){var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,null,$element).then(afterAnimation)});currentElement=clone,(currentScope=newScope).$emit("$includeContentLoaded",src),scope.$eval(onloadExp)}},function(){scope.$$destroyed||thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))}),scope.$emit("$includeContentRequested",src)):(cleanupLastIncludeContent(),ctrl.template=null)})}}}}],ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){if(toString.call($element[0]).match(/SVG/))return $element.empty(),void $compile(jqLiteBuildFragment(ctrl.template,window.document).childNodes)(scope,function(clone){$element.append(clone)},{futureParentElement:$element});$element.html(ctrl.template),$compile($element.contents())(scope)}}}],ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngListDirective=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(scope,element,attr,ctrl){var ngList=element.attr(attr.$attr.ngList)||", ",trimValues="false"!==attr.ngTrim,separator=trimValues?trim(ngList):ngList;ctrl.$parsers.push(function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trimValues?trim(value):value)}),list}}),ctrl.$formatters.push(function(value){if(isArray(value))return value.join(ngList)}),ctrl.$isEmpty=function(value){return!value||!value.length}}}},VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",PENDING_CLASS="ng-pending",ngModelMinErr=minErr("ngModel"),NgModelController=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function($scope,$exceptionHandler,$attr,$element,$parse,$animate,$timeout,$rootScope,$q,$interpolate){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=$interpolate($attr.name||"",!1)($scope),this.$$parentForm=nullFormCtrl;var parserValid,parsedNgModel=$parse($attr.ngModel),parsedNgModelAssign=parsedNgModel.assign,ngModelGet=parsedNgModel,ngModelSet=parsedNgModelAssign,pendingDebounce=null,ctrl=this;this.$$setOptions=function(options){if(ctrl.$options=options,options&&options.getterSetter){var invokeModelGetter=$parse($attr.ngModel+"()"),invokeModelSetter=$parse($attr.ngModel+"($$$p)");ngModelGet=function($scope){var modelValue=parsedNgModel($scope);return isFunction(modelValue)&&(modelValue=invokeModelGetter($scope)),modelValue},ngModelSet=function($scope,newValue){isFunction(parsedNgModel($scope))?invokeModelSetter($scope,{$$$p:newValue}):parsedNgModelAssign($scope,newValue)}}else if(!parsedNgModel.assign)throw ngModelMinErr("nonassign","Expression '{0}' is non-assignable. Element: {1}",$attr.ngModel,startingTag($element))},this.$render=noop,this.$isEmpty=function(value){return isUndefined(value)||""===value||null===value||value!=value},this.$$updateEmptyClasses=function(value){ctrl.$isEmpty(value)?($animate.removeClass($element,"ng-not-empty"),$animate.addClass($element,"ng-empty")):($animate.removeClass($element,"ng-empty"),$animate.addClass($element,"ng-not-empty"))};var currentValidationRunId=0;addSetValidityMethod({ctrl:this,$element:$element,set:function(object,property){object[property]=!0},unset:function(object,property){delete object[property]},$animate:$animate}),this.$setPristine=function(){ctrl.$dirty=!1,ctrl.$pristine=!0,$animate.removeClass($element,DIRTY_CLASS),$animate.addClass($element,PRISTINE_CLASS)},this.$setDirty=function(){ctrl.$dirty=!0,ctrl.$pristine=!1,$animate.removeClass($element,PRISTINE_CLASS),$animate.addClass($element,DIRTY_CLASS),ctrl.$$parentForm.$setDirty()},this.$setUntouched=function(){ctrl.$touched=!1,ctrl.$untouched=!0,$animate.setClass($element,"ng-untouched","ng-touched")},this.$setTouched=function(){ctrl.$touched=!0,ctrl.$untouched=!1,$animate.setClass($element,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){$timeout.cancel(pendingDebounce),ctrl.$viewValue=ctrl.$$lastCommittedViewValue,ctrl.$render()},this.$validate=function(){if(!isNumberNaN(ctrl.$modelValue)){var viewValue=ctrl.$$lastCommittedViewValue,modelValue=ctrl.$$rawModelValue,prevValid=ctrl.$valid,prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;ctrl.$$runValidators(modelValue,viewValue,function(allValid){allowInvalid||prevValid===allValid||(ctrl.$modelValue=allValid?modelValue:void 0,ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope())})}},this.$$runValidators=function(modelValue,viewValue,doneCallback){var validatorPromises,allValid,localValidationRunId=++currentValidationRunId;(function(){var errorKey=ctrl.$$parserName||"parse";if(!isUndefined(parserValid))return parserValid||(forEach(ctrl.$validators,function(v,name){setValidity(name,null)}),forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)})),setValidity(errorKey,parserValid),parserValid;setValidity(errorKey,null);return!0})()?!function(){var syncValidatorsValid=!0;if(forEach(ctrl.$validators,function(validator,name){var result=validator(modelValue,viewValue);syncValidatorsValid=syncValidatorsValid&&result,setValidity(name,result)}),!syncValidatorsValid)return forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)}),!1;return!0}()?validationDone(!1):(validatorPromises=[],allValid=!0,forEach(ctrl.$asyncValidators,function(validator,name){var promise=validator(modelValue,viewValue);if(!isPromiseLike(promise))throw ngModelMinErr("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",promise);setValidity(name,void 0),validatorPromises.push(promise.then(function(){setValidity(name,!0)},function(){allValid=!1,setValidity(name,!1)}))}),validatorPromises.length?$q.all(validatorPromises).then(function(){validationDone(allValid)},noop):validationDone(!0)):validationDone(!1);function setValidity(name,isValid){localValidationRunId===currentValidationRunId&&ctrl.$setValidity(name,isValid)}function validationDone(allValid){localValidationRunId===currentValidationRunId&&doneCallback(allValid)}},this.$commitViewValue=function(){var viewValue=ctrl.$viewValue;$timeout.cancel(pendingDebounce),(ctrl.$$lastCommittedViewValue!==viewValue||""===viewValue&&ctrl.$$hasNativeValidators)&&(ctrl.$$updateEmptyClasses(viewValue),ctrl.$$lastCommittedViewValue=viewValue,ctrl.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var modelValue=ctrl.$$lastCommittedViewValue;if(parserValid=!isUndefined(modelValue)||void 0)for(var i=0;i<ctrl.$parsers.length;i++)if(isUndefined(modelValue=ctrl.$parsers[i](modelValue))){parserValid=!1;break}isNumberNaN(ctrl.$modelValue)&&(ctrl.$modelValue=ngModelGet($scope));var prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;function writeToModelIfNeeded(){ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope()}ctrl.$$rawModelValue=modelValue,allowInvalid&&(ctrl.$modelValue=modelValue,writeToModelIfNeeded()),ctrl.$$runValidators(modelValue,ctrl.$$lastCommittedViewValue,function(allValid){allowInvalid||(ctrl.$modelValue=allValid?modelValue:void 0,writeToModelIfNeeded())})},this.$$writeModelToScope=function(){ngModelSet($scope,ctrl.$modelValue),forEach(ctrl.$viewChangeListeners,function(listener){try{listener()}catch(e){$exceptionHandler(e)}})},this.$setViewValue=function(value,trigger){ctrl.$viewValue=value,ctrl.$options&&!ctrl.$options.updateOnDefault||ctrl.$$debounceViewValueCommit(trigger)},this.$$debounceViewValueCommit=function(trigger){var debounce,debounceDelay=0,options=ctrl.$options;options&&isDefined(options.debounce)&&(isNumber(debounce=options.debounce)?debounceDelay=debounce:isNumber(debounce[trigger])?debounceDelay=debounce[trigger]:isNumber(debounce.default)&&(debounceDelay=debounce.default)),$timeout.cancel(pendingDebounce),debounceDelay?pendingDebounce=$timeout(function(){ctrl.$commitViewValue()},debounceDelay):$rootScope.$$phase?ctrl.$commitViewValue():$scope.$apply(function(){ctrl.$commitViewValue()})},$scope.$watch(function(){var modelValue=ngModelGet($scope);if(modelValue!==ctrl.$modelValue&&(ctrl.$modelValue==ctrl.$modelValue||modelValue==modelValue)){ctrl.$modelValue=ctrl.$$rawModelValue=modelValue,parserValid=void 0;for(var formatters=ctrl.$formatters,idx=formatters.length,viewValue=modelValue;idx--;)viewValue=formatters[idx](viewValue);ctrl.$viewValue!==viewValue&&(ctrl.$$updateEmptyClasses(viewValue),ctrl.$viewValue=ctrl.$$lastCommittedViewValue=viewValue,ctrl.$render(),ctrl.$$runValidators(ctrl.$modelValue,ctrl.$viewValue,noop))}return modelValue})}],ngModelDirective=["$rootScope",function($rootScope){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:NgModelController,priority:1,compile:function(element){return element.addClass(PRISTINE_CLASS).addClass("ng-untouched").addClass(VALID_CLASS),{pre:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||modelCtrl.$$parentForm;modelCtrl.$$setOptions(ctrls[2]&&ctrls[2].$options),formCtrl.$addControl(modelCtrl),attr.$observe("name",function(newValue){modelCtrl.$name!==newValue&&modelCtrl.$$parentForm.$$renameControl(modelCtrl,newValue)}),scope.$on("$destroy",function(){modelCtrl.$$parentForm.$removeControl(modelCtrl)})},post:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0];modelCtrl.$options&&modelCtrl.$options.updateOn&&element.on(modelCtrl.$options.updateOn,function(ev){modelCtrl.$$debounceViewValueCommit(ev&&ev.type)}),element.on("blur",function(){modelCtrl.$touched||($rootScope.$$phase?scope.$evalAsync(modelCtrl.$setTouched):scope.$apply(modelCtrl.$setTouched))})}}}}}],DEFAULT_REGEXP=/(\s+|^)default(\s+|$)/,ngModelOptionsDirective=function(){return{restrict:"A",controller:["$scope","$attrs",function($scope,$attrs){var that=this;this.$options=copy($scope.$eval($attrs.ngModelOptions)),isDefined(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=trim(this.$options.updateOn.replace(DEFAULT_REGEXP,function(){return that.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}};function addSetValidityMethod(context){var ctrl=context.ctrl,$element=context.$element,classCache={},set=context.set,unset=context.unset,$animate=context.$animate;function cachedToggleClass(className,switchValue){switchValue&&!classCache[className]?($animate.addClass($element,className),classCache[className]=!0):!switchValue&&classCache[className]&&($animate.removeClass($element,className),classCache[className]=!1)}function toggleValidationCss(validationErrorKey,isValid){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",cachedToggleClass(VALID_CLASS+validationErrorKey,!0===isValid),cachedToggleClass(INVALID_CLASS+validationErrorKey,!1===isValid)}classCache[INVALID_CLASS]=!(classCache[VALID_CLASS]=$element.hasClass(VALID_CLASS)),ctrl.$setValidity=function(validationErrorKey,state,controller){isUndefined(state)?function(name,value,controller){ctrl[name]||(ctrl[name]={});set(ctrl[name],value,controller)}("$pending",validationErrorKey,controller):function(name,value,controller){ctrl[name]&&unset(ctrl[name],value,controller);isObjectEmpty(ctrl[name])&&(ctrl[name]=void 0)}("$pending",validationErrorKey,controller);isBoolean(state)?state?(unset(ctrl.$error,validationErrorKey,controller),set(ctrl.$$success,validationErrorKey,controller)):(set(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller)):(unset(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller));ctrl.$pending?(cachedToggleClass(PENDING_CLASS,!0),ctrl.$valid=ctrl.$invalid=void 0,toggleValidationCss("",null)):(cachedToggleClass(PENDING_CLASS,!1),ctrl.$valid=isObjectEmpty(ctrl.$error),ctrl.$invalid=!ctrl.$valid,toggleValidationCss("",ctrl.$valid));var combinedState;combinedState=ctrl.$pending&&ctrl.$pending[validationErrorKey]?void 0:!ctrl.$error[validationErrorKey]&&(!!ctrl.$$success[validationErrorKey]||null);toggleValidationCss(validationErrorKey,combinedState),ctrl.$$parentForm.$setValidity(validationErrorKey,combinedState,ctrl)}}function isObjectEmpty(obj){if(obj)for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0}var ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngOptionsMinErr=minErr("ngOptions"),NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ngOptionsDirective=["$compile","$document","$parse",function($compile,$document,$parse){var optionTemplate=window.document.createElement("option"),optGroupTemplate=window.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(scope,selectElement,attr,ctrls){ctrls[0].registerOption=noop},post:function(scope,selectElement,attr,ctrls){for(var emptyOption,selectCtrl=ctrls[0],ngModelCtrl=ctrls[1],multiple=attr.multiple,i=0,children=selectElement.children(),ii=children.length;i<ii;i++)if(""===children[i].value){emptyOption=children.eq(i);break}var options,providedEmptyOption=!!emptyOption,unknownOption=jqLite(optionTemplate.cloneNode(!1));unknownOption.val("?");var ngOptions=function(optionsExp,selectElement,scope){var match=optionsExp.match(NG_OPTIONS_REGEXP);if(!match)throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var valueName=match[5]||match[7],keyName=match[6],selectAs=/ as /.test(match[0])&&match[1],trackBy=match[9],valueFn=$parse(match[2]?match[1]:valueName),viewValueFn=selectAs&&$parse(selectAs)||valueFn,trackByFn=trackBy&&$parse(trackBy),getTrackByValueFn=trackBy?function(value,locals){return trackByFn(scope,locals)}:function(value){return hashKey(value)},getTrackByValue=function(value,key){return getTrackByValueFn(value,getLocals(value,key))},displayFn=$parse(match[2]||match[1]),groupByFn=$parse(match[3]||""),disableWhenFn=$parse(match[4]||""),valuesFn=$parse(match[8]),locals={},getLocals=keyName?function(value,key){return locals[keyName]=key,locals[valueName]=value,locals}:function(value){return locals[valueName]=value,locals};function Option(selectValue,viewValue,label,group,disabled){this.selectValue=selectValue,this.viewValue=viewValue,this.label=label,this.group=group,this.disabled=disabled}function getOptionValuesKeys(optionValues){var optionValuesKeys;if(!keyName&&isArrayLike(optionValues))optionValuesKeys=optionValues;else for(var itemKey in optionValuesKeys=[],optionValues)optionValues.hasOwnProperty(itemKey)&&"$"!==itemKey.charAt(0)&&optionValuesKeys.push(itemKey);return optionValuesKeys}return{trackBy:trackBy,getTrackByValue:getTrackByValue,getWatchables:$parse(valuesFn,function(optionValues){for(var watchedArray=[],optionValuesKeys=getOptionValuesKeys(optionValues=optionValues||[]),optionValuesLength=optionValuesKeys.length,index=0;index<optionValuesLength;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],value=optionValues[key],locals=getLocals(value,key),selectValue=getTrackByValueFn(value,locals);if(watchedArray.push(selectValue),match[2]||match[1]){var label=displayFn(scope,locals);watchedArray.push(label)}if(match[4]){var disableWhen=disableWhenFn(scope,locals);watchedArray.push(disableWhen)}}return watchedArray}),getOptions:function(){for(var optionItems=[],selectValueMap={},optionValues=valuesFn(scope)||[],optionValuesKeys=getOptionValuesKeys(optionValues),optionValuesLength=optionValuesKeys.length,index=0;index<optionValuesLength;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],value=optionValues[key],locals=getLocals(value,key),viewValue=viewValueFn(scope,locals),selectValue=getTrackByValueFn(viewValue,locals),optionItem=new Option(selectValue,viewValue,displayFn(scope,locals),groupByFn(scope,locals),disableWhenFn(scope,locals));optionItems.push(optionItem),selectValueMap[selectValue]=optionItem}return{items:optionItems,selectValueMap:selectValueMap,getOptionFromViewValue:function(value){return selectValueMap[getTrackByValue(value)]},getViewValueFromOption:function(option){return trackBy?angular.copy(option.viewValue):option.viewValue}}}}}(attr.ngOptions,selectElement,scope),listFragment=$document[0].createDocumentFragment(),removeEmptyOption=function(){providedEmptyOption?emptyOption.removeAttr("selected"):emptyOption.remove()},removeUnknownOption=function(){unknownOption.remove()};function addOptionElement(option,parent){var optionElement=optionTemplate.cloneNode(!1);parent.appendChild(optionElement),function(option,element){option.element=element,element.disabled=option.disabled,option.label!==element.label&&(element.label=option.label,element.textContent=option.label),option.value!==element.value&&(element.value=option.selectValue)}(option,optionElement)}function updateOptions(){var previousValue=options&&selectCtrl.readValue();if(options)for(var i=options.items.length-1;i>=0;i--){var option=options.items[i];isDefined(option.group)?jqLiteRemove(option.element.parentNode):jqLiteRemove(option.element)}options=ngOptions.getOptions();var groupElementMap={};if(providedEmptyOption&&selectElement.prepend(emptyOption),options.items.forEach(function(option){var groupElement;isDefined(option.group)?((groupElement=groupElementMap[option.group])||(groupElement=optGroupTemplate.cloneNode(!1),listFragment.appendChild(groupElement),groupElement.label=null===option.group?"null":option.group,groupElementMap[option.group]=groupElement),addOptionElement(option,groupElement)):addOptionElement(option,listFragment)}),selectElement[0].appendChild(listFragment),ngModelCtrl.$render(),!ngModelCtrl.$isEmpty(previousValue)){var nextValue=selectCtrl.readValue();(ngOptions.trackBy||multiple?equals(previousValue,nextValue):previousValue===nextValue)||(ngModelCtrl.$setViewValue(nextValue),ngModelCtrl.$render())}}multiple?(ngModelCtrl.$isEmpty=function(value){return!value||0===value.length},selectCtrl.writeValue=function(value){options.items.forEach(function(option){option.element.selected=!1}),value&&value.forEach(function(item){var option=options.getOptionFromViewValue(item);option&&(option.element.selected=!0)})},selectCtrl.readValue=function(){var selectedValues=selectElement.val()||[],selections=[];return forEach(selectedValues,function(value){var option=options.selectValueMap[value];option&&!option.disabled&&selections.push(options.getViewValueFromOption(option))}),selections},ngOptions.trackBy&&scope.$watchCollection(function(){if(isArray(ngModelCtrl.$viewValue))return ngModelCtrl.$viewValue.map(function(value){return ngOptions.getTrackByValue(value)})},function(){ngModelCtrl.$render()})):(selectCtrl.writeValue=function(value){var selectedOption=options.selectValueMap[selectElement.val()],option=options.getOptionFromViewValue(value);selectedOption&&selectedOption.element.removeAttribute("selected"),option?(selectElement[0].value!==option.selectValue&&(removeUnknownOption(),removeEmptyOption(),selectElement[0].value=option.selectValue,option.element.selected=!0),option.element.setAttribute("selected","selected")):null===value||providedEmptyOption?(removeUnknownOption(),providedEmptyOption||selectElement.prepend(emptyOption),selectElement.val(""),emptyOption.prop("selected",!0),emptyOption.attr("selected",!0)):(removeEmptyOption(),selectElement.prepend(unknownOption),selectElement.val("?"),unknownOption.prop("selected",!0),unknownOption.attr("selected",!0))},selectCtrl.readValue=function(){var selectedOption=options.selectValueMap[selectElement.val()];return selectedOption&&!selectedOption.disabled?(removeEmptyOption(),removeUnknownOption(),options.getViewValueFromOption(selectedOption)):null},ngOptions.trackBy&&scope.$watch(function(){return ngOptions.getTrackByValue(ngModelCtrl.$viewValue)},function(){ngModelCtrl.$render()})),providedEmptyOption?(emptyOption.remove(),$compile(emptyOption)(scope),emptyOption.removeClass("ng-scope")):emptyOption=jqLite(optionTemplate.cloneNode(!1)),selectElement.empty(),updateOptions(),scope.$watchCollection(ngOptions.getWatchables,updateOptions)}}}}],ngPluralizeDirective=["$locale","$interpolate","$log",function($locale,$interpolate,$log){var BRACE=/{}/g,IS_WHEN=/^when(Minus)?(.+)$/;return{link:function(scope,element,attr){var lastCount,numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),braceReplacement=startSymbol+numberExp+"-"+offset+endSymbol,watchRemover=angular.noop;function updateElementText(newText){element.text(newText||"")}forEach(attr,function(expression,attributeName){var tmpMatch=IS_WHEN.exec(attributeName);if(tmpMatch){var whenKey=(tmpMatch[1]?"-":"")+lowercase(tmpMatch[2]);whens[whenKey]=element.attr(attr.$attr[attributeName])}}),forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,braceReplacement))}),scope.$watch(numberExp,function(newVal){var count=parseFloat(newVal),countIsNaN=isNumberNaN(count);if(countIsNaN||count in whens||(count=$locale.pluralCat(count-offset)),!(count===lastCount||countIsNaN&&isNumberNaN(lastCount))){watchRemover();var whenExpFn=whensExpFns[count];isUndefined(whenExpFn)?(null!=newVal&&$log.debug("ngPluralize: no rule defined for '"+count+"' in "+whenExp),watchRemover=noop,updateElementText()):watchRemover=scope.$watch(whenExpFn,updateElementText),lastCount=count}})}}}],ngRepeatDirective=["$parse","$animate","$compile",function($parse,$animate,$compile){var ngRepeatMinErr=minErr("ngRepeat"),updateScope=function(scope,index,valueIdentifier,value,keyIdentifier,key,arrayLength){scope[valueIdentifier]=value,keyIdentifier&&(scope[keyIdentifier]=key),scope.$index=index,scope.$first=0===index,scope.$last=index===arrayLength-1,scope.$middle=!(scope.$first||scope.$last),scope.$odd=!(scope.$even=0==(1&index))},getBlockStart=function(block){return block.clone[0]},getBlockEnd=function(block){return block.clone[block.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function($element,$attr){var expression=$attr.ngRepeat,ngRepeatEndComment=$compile.$$createComment("end ngRepeat",expression),match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);var lhs=match[1],rhs=match[2],aliasAs=match[3],trackByExp=match[4];if(!(match=lhs.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/)))throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);var trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn,valueIdentifier=match[3]||match[1],keyIdentifier=match[2];if(aliasAs&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(aliasAs)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(aliasAs)))throw ngRepeatMinErr("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",aliasAs);var hashFnLocals={$id:hashKey};return trackByExp?trackByExpGetter=$parse(trackByExp):(trackByIdArrayFn=function(key,value){return hashKey(value)},trackByIdObjFn=function(key){return key}),function($scope,$element,$attr,ctrl,$transclude){trackByExpGetter&&(trackByIdExpFn=function(key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)});var lastBlockMap=createMap();$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,collectionLength,key,value,trackById,trackByIdFn,collectionKeys,block,nextBlockOrder,elementsToRemove,previousNode=$element[0],nextBlockMap=createMap();if(aliasAs&&($scope[aliasAs]=collection),isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else for(var itemKey in trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[],collection)hasOwnProperty.call(collection,itemKey)&&"$"!==itemKey.charAt(0)&&collectionKeys.push(itemKey);for(collectionLength=collectionKeys.length,nextBlockOrder=new Array(collectionLength),index=0;index<collectionLength;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn(key,value,index),lastBlockMap[trackById])block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap[trackById])throw forEach(nextBlockOrder,function(block){block&&block.scope&&(lastBlockMap[block.id]=block)}),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",expression,trackById,value);nextBlockOrder[index]={id:trackById,scope:void 0,clone:void 0},nextBlockMap[trackById]=!0}for(var blockKey in lastBlockMap){if(elementsToRemove=getBlockNodes((block=lastBlockMap[blockKey]).clone),$animate.leave(elementsToRemove),elementsToRemove[0].parentNode)for(index=0,length=elementsToRemove.length;index<length;index++)elementsToRemove[index].$$NG_REMOVED=!0;block.scope.$destroy()}for(index=0;index<collectionLength;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],(block=nextBlockOrder[index]).scope){nextNode=previousNode;do{nextNode=nextNode.nextSibling}while(nextNode&&nextNode.$$NG_REMOVED);getBlockStart(block)!==nextNode&&$animate.move(getBlockNodes(block.clone),null,previousNode),previousNode=getBlockEnd(block),updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)}else $transclude(function(clone,scope){block.scope=scope;var endNode=ngRepeatEndComment.cloneNode(!1);clone[clone.length++]=endNode,$animate.enter(clone,null,previousNode),previousNode=endNode,block.clone=clone,nextBlockMap[block.id]=block,updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)});lastBlockMap=nextBlockMap})}}}}],ngShowDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[value?"removeClass":"addClass"](element,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ngHideDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[value?"addClass":"removeClass"](element,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watch(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,function(val,style){element.css(style,"")}),newStyles&&element.css(newStyles)},!0)}),ngSwitchDirective=["$animate","$compile",function($animate,$compile){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousLeaveAnimations=[],selectedScopes=[],spliceFactory=function(array,index){return function(){array.splice(index,1)}};scope.$watch(watchExpr,function(value){var i,ii;for(i=0,ii=previousLeaveAnimations.length;i<ii;++i)$animate.cancel(previousLeaveAnimations[i]);for(previousLeaveAnimations.length=0,i=0,ii=selectedScopes.length;i<ii;++i){var selected=getBlockNodes(selectedElements[i].clone);selectedScopes[i].$destroy(),(previousLeaveAnimations[i]=$animate.leave(selected)).then(spliceFactory(previousLeaveAnimations,i))}selectedElements.length=0,selectedScopes.length=0,(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&forEach(selectedTranscludes,function(selectedTransclude){selectedTransclude.transclude(function(caseElement,selectedScope){selectedScopes.push(selectedScope);var anchor=selectedTransclude.element;caseElement[caseElement.length++]=$compile.$$createComment("end ngSwitchWhen");var block={clone:caseElement};selectedElements.push(block),$animate.enter(caseElement,anchor.parent(),anchor)})})})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attrs,ctrl,$transclude){ctrl.cases["!"+attrs.ngSwitchWhen]=ctrl.cases["!"+attrs.ngSwitchWhen]||[],ctrl.cases["!"+attrs.ngSwitchWhen].push({transclude:$transclude,element:element})}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeMinErr=minErr("ngTransclude"),ngTranscludeDirective=["$compile",function($compile){return{restrict:"EAC",terminal:!0,compile:function(tElement){var fallbackLinkFn=$compile(tElement.contents());return tElement.empty(),function($scope,$element,$attrs,controller,$transclude){if(!$transclude)throw ngTranscludeMinErr("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));$attrs.ngTransclude===$attrs.$attr.ngTransclude&&($attrs.ngTransclude="");var slotName=$attrs.ngTransclude||$attrs.ngTranscludeSlot;function useFallbackContent(){fallbackLinkFn($scope,function(clone){$element.append(clone)})}$transclude(function(clone,transcludedScope){clone.length?$element.append(clone):(useFallbackContent(),transcludedScope.$destroy())},null,slotName),slotName&&!$transclude.isSlotFilled(slotName)&&useFallbackContent()}}}}],scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"===attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],noopNgModelController={$setViewValue:noop,$render:noop};var SelectController=["$element","$scope",function($element,$scope){var self=this,optionsMap=new HashMap;self.ngModelCtrl=noopNgModelController,self.unknownOption=jqLite(window.document.createElement("option")),self.renderUnknownOption=function(val){var unknownVal="? "+hashKey(val)+" ?";self.unknownOption.val(unknownVal),$element.prepend(self.unknownOption),$element.val(unknownVal)},$scope.$on("$destroy",function(){self.renderUnknownOption=noop}),self.removeUnknownOption=function(){self.unknownOption.parent()&&self.unknownOption.remove()},self.readValue=function(){return self.removeUnknownOption(),$element.val()},self.writeValue=function(value){self.hasOption(value)?(self.removeUnknownOption(),$element.val(value),""===value&&self.emptyOption.prop("selected",!0)):null==value&&self.emptyOption?(self.removeUnknownOption(),$element.val("")):self.renderUnknownOption(value)},self.addOption=function(value,element){if(element[0].nodeType!==NODE_TYPE_COMMENT){assertNotHasOwnProperty(value,'"option value"'),""===value&&(self.emptyOption=element);var optionElement,count=optionsMap.get(value)||0;optionsMap.put(value,count+1),self.ngModelCtrl.$render(),(optionElement=element)[0].hasAttribute("selected")&&(optionElement[0].selected=!0)}},self.removeOption=function(value){var count=optionsMap.get(value);count&&(1===count?(optionsMap.remove(value),""===value&&(self.emptyOption=void 0)):optionsMap.put(value,count-1))},self.hasOption=function(value){return!!optionsMap.get(value)},self.registerOption=function(optionScope,optionElement,optionAttrs,interpolateValueFn,interpolateTextFn){var oldVal;interpolateValueFn?optionAttrs.$observe("value",function(newVal){isDefined(oldVal)&&self.removeOption(oldVal),oldVal=newVal,self.addOption(newVal,optionElement)}):interpolateTextFn?optionScope.$watch(interpolateTextFn,function(newVal,oldVal){optionAttrs.$set("value",newVal),oldVal!==newVal&&self.removeOption(oldVal),self.addOption(newVal,optionElement)}):self.addOption(optionAttrs.value,optionElement);optionElement.on("$destroy",function(){self.removeOption(optionAttrs.value),self.ngModelCtrl.$render()})}}],selectDirective=function(){return{restrict:"E",require:["select","?ngModel"],controller:SelectController,priority:1,link:{pre:function(scope,element,attr,ctrls){var ngModelCtrl=ctrls[1];if(!ngModelCtrl)return;var selectCtrl=ctrls[0];if(selectCtrl.ngModelCtrl=ngModelCtrl,element.on("change",function(){scope.$apply(function(){ngModelCtrl.$setViewValue(selectCtrl.readValue())})}),attr.multiple){selectCtrl.readValue=function(){var array=[];return forEach(element.find("option"),function(option){option.selected&&array.push(option.value)}),array},selectCtrl.writeValue=function(value){var items=new HashMap(value);forEach(element.find("option"),function(option){option.selected=isDefined(items.get(option.value))})};var lastView,lastViewRef=NaN;scope.$watch(function(){lastViewRef!==ngModelCtrl.$viewValue||equals(lastView,ngModelCtrl.$viewValue)||(lastView=shallowCopy(ngModelCtrl.$viewValue),ngModelCtrl.$render()),lastViewRef=ngModelCtrl.$viewValue}),ngModelCtrl.$isEmpty=function(value){return!value||0===value.length}}},post:function(scope,element,attrs,ctrls){var ngModelCtrl=ctrls[1];if(!ngModelCtrl)return;var selectCtrl=ctrls[0];ngModelCtrl.$render=function(){selectCtrl.writeValue(ngModelCtrl.$viewValue)}}}}},optionDirective=["$interpolate",function($interpolate){return{restrict:"E",priority:100,compile:function(element,attr){if(isDefined(attr.value))var interpolateValueFn=$interpolate(attr.value,!0);else{var interpolateTextFn=$interpolate(element.text(),!0);interpolateTextFn||attr.$set("value",element.text())}return function(scope,element,attr){var parent=element.parent(),selectCtrl=parent.data("$selectController")||parent.parent().data("$selectController");selectCtrl&&selectCtrl.registerOption(scope,element,attr,interpolateValueFn,interpolateTextFn)}}}}],requiredDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){ctrl&&(attr.required=!0,ctrl.$validators.required=function(modelValue,viewValue){return!attr.required||!ctrl.$isEmpty(viewValue)},attr.$observe("required",function(){ctrl.$validate()}))}}},patternDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var regexp,patternExp=attr.ngPattern||attr.pattern;attr.$observe("pattern",function(regex){if(isString(regex)&&regex.length>0&&(regex=new RegExp("^"+regex+"$")),regex&&!regex.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",patternExp,regex,startingTag(elm));regexp=regex||void 0,ctrl.$validate()}),ctrl.$validators.pattern=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(regexp)||regexp.test(viewValue)}}}}},maxlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var maxlength=-1;attr.$observe("maxlength",function(value){var intVal=toInt(value);maxlength=isNumberNaN(intVal)?-1:intVal,ctrl.$validate()}),ctrl.$validators.maxlength=function(modelValue,viewValue){return maxlength<0||ctrl.$isEmpty(viewValue)||viewValue.length<=maxlength}}}}},minlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var minlength=0;attr.$observe("minlength",function(value){minlength=toInt(value)||0,ctrl.$validate()}),ctrl.$validators.minlength=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||viewValue.length>=minlength}}}}};window.angular.bootstrap?window.console&&console.log("WARNING: Tried to load angular more than once."):(!function(){var originalCleanData;if(!bindJQueryFired){var jqName=jq();(jQuery=isUndefined(jqName)?window.jQuery:jqName?window[jqName]:void 0)&&jQuery.fn.on?(jqLite=jQuery,extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData}),originalCleanData=jQuery.cleanData,jQuery.cleanData=function(elems){for(var events,elem,i=0;null!=(elem=elems[i]);i++)(events=jQuery._data(elem,"events"))&&events.$destroy&&jQuery(elem).triggerHandler("$destroy");originalCleanData(elems)}):jqLite=JQLite,angular.element=jqLite,bindJQueryFired=!0}}(),function(angular){extend(angular,{bootstrap:bootstrap,copy:copy,extend:extend,merge:merge,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{$$counter:0},getTestability:getTestability,$$minErr:minErr,$$csp:csp,reloadWithDebugInfo:reloadWithDebugInfo}),(angularModule=function(window){var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng");function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",function(){var modules={};return function(name,requires,configFn){return function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,function(){if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],configBlocks=[],runBlocks=[],config=invokeLater("$injector","invoke","push",configBlocks),moduleInstance={_invokeQueue:invokeQueue,_configBlocks:configBlocks,_runBlocks:runBlocks,requires:requires,name:name,provider:invokeLaterAndSetModuleName("$provide","provider"),factory:invokeLaterAndSetModuleName("$provide","factory"),service:invokeLaterAndSetModuleName("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),decorator:invokeLaterAndSetModuleName("$provide","decorator"),animation:invokeLaterAndSetModuleName("$animateProvider","register"),filter:invokeLaterAndSetModuleName("$filterProvider","register"),controller:invokeLaterAndSetModuleName("$controllerProvider","register"),directive:invokeLaterAndSetModuleName("$compileProvider","directive"),component:invokeLaterAndSetModuleName("$compileProvider","component"),config:config,run:function(block){return runBlocks.push(block),this}};return configFn&&config(configFn),moduleInstance;function invokeLater(provider,method,insertMethod,queue){return queue||(queue=invokeQueue),function(){return queue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}function invokeLaterAndSetModuleName(provider,method){return function(recipeName,factoryFunction){return factoryFunction&&isFunction(factoryFunction)&&(factoryFunction.$$moduleName=name),invokeQueue.push([provider,method,arguments]),moduleInstance}}})}})}(window))("ng",["ngLocale"],["$provide",function($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,pattern:patternDirective,ngPattern:patternDirective,required:requiredDirective,ngRequired:requiredDirective,minlength:minlengthDirective,ngMinlength:minlengthDirective,maxlength:maxlengthDirective,ngMaxlength:maxlengthDirective,ngValue:ngValueDirective,ngModelOptions:ngModelOptionsDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$animateCss:$CoreAnimateCssProvider,$$animateJs:$$CoreAnimateJsProvider,$$animateQueue:$$CoreAnimateQueueProvider,$$AnimateRunner:$$AnimateRunnerFactoryProvider,$$animateAsyncRun:$$AnimateAsyncRunFactoryProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$$forceReflow:$$ForceReflowProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpParamSerializer:$HttpParamSerializerProvider,$httpParamSerializerJQLike:$HttpParamSerializerJQLikeProvider,$httpBackend:$HttpBackendProvider,$xhrFactory:$xhrFactoryProvider,$jsonpCallbacks:$jsonpCallbacksProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$$q:$$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$templateRequest:$TemplateRequestProvider,$$testability:$$TestabilityProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$jqLite:$$jqLiteProvider,$$HashMap:$$HashMapProvider,$$cookieReader:$$CookieReaderProvider})}])}(angular),angular.module("ngLocale",[],["$provide",function($provide){var PLURAL_CATEGORY_ONE="one",PLURAL_CATEGORY_OTHER="other";$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(n,opt_precision){var i=0|n,vf=function(n,opt_precision){var v=opt_precision;void 0===v&&(v=Math.min(function(n){var i=(n+="").indexOf(".");return-1==i?0:n.length-i-1}(n),3));var base=Math.pow(10,v);return{v:v,f:(n*base|0)%base}}(n,opt_precision);return 1==i&&0==vf.v?PLURAL_CATEGORY_ONE:PLURAL_CATEGORY_OTHER}})}]),jqLite(window.document).ready(function(){angularInit(window.document,bootstrap)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},641:function(module,exports){
/**
 * @license AngularJS v1.5.9
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(window,angular){"use strict";var isArray,isObject,ngRouteModule=angular.module("ngRoute",["ng"]).provider("$route",function(){function inherit(parent,extra){return angular.extend(Object.create(parent),extra)}isArray=angular.isArray,isObject=angular.isObject;var routes={};function pathRegExp(path,opts){var insensitive=opts.caseInsensitiveMatch,ret={originalPath:path,regexp:path},keys=ret.keys=[];return path=path.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[\?\*])?/g,function(_,slash,key,option){var optional="?"===option||"*?"===option?"?":null,star="*"===option||"*?"===option?"*":null;return keys.push({name:key,optional:!!optional}),slash=slash||"",(optional?"":slash)+"(?:"+(optional?slash:"")+(star?"(.+?)":"([^/]+)")+(optional||"")+")"+(optional||"")}).replace(/([\/$\*])/g,"\\$1"),ret.regexp=new RegExp("^"+path+"$",insensitive?"i":""),ret}this.when=function(path,route){var routeCopy=function(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;i<ii;i++)dst[i]=src[i]}else if(isObject(src))for(var key in dst=dst||{},src)"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key]);return dst||src}(route);if(angular.isUndefined(routeCopy.reloadOnSearch)&&(routeCopy.reloadOnSearch=!0),angular.isUndefined(routeCopy.caseInsensitiveMatch)&&(routeCopy.caseInsensitiveMatch=this.caseInsensitiveMatch),routes[path]=angular.extend(routeCopy,path&&pathRegExp(path,routeCopy)),path){var redirectPath="/"===path[path.length-1]?path.substr(0,path.length-1):path+"/";routes[redirectPath]=angular.extend({redirectTo:path},pathRegExp(redirectPath,routeCopy))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(params){return"string"==typeof params&&(params={redirectTo:params}),this.when(null,params),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function($rootScope,$location,$routeParams,$q,$injector,$templateRequest,$sce){var preparedRoute,preparedRouteIsUpdateOnly,forceReload=!1,$route={routes:routes,reload:function(){forceReload=!0;var fakeLocationEvent={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,forceReload=!1}};$rootScope.$evalAsync(function(){prepareRoute(fakeLocationEvent),fakeLocationEvent.defaultPrevented||commitRoute()})},updateParams:function(newParams){if(!this.current||!this.current.$$route)throw $routeMinErr("norout","Tried updating route when with no current route");newParams=angular.extend({},this.current.params,newParams),$location.path(interpolate(this.current.$$route.originalPath,newParams)),$location.search(newParams)}};return $rootScope.$on("$locationChangeStart",prepareRoute),$rootScope.$on("$locationChangeSuccess",commitRoute),$route;function prepareRoute($locationEvent){var params,match,lastRoute=$route.current;angular.forEach(routes,function(route,path){!match&&(params=function(on,route){var keys=route.keys,params={};if(!route.regexp)return null;var m=route.regexp.exec(on);if(!m)return null;for(var i=1,len=m.length;i<len;++i){var key=keys[i-1],val=m[i];key&&val&&(params[key.name]=val)}return params}($location.path(),route))&&((match=inherit(route,{params:angular.extend({},$location.search(),params),pathParams:params})).$$route=route)}),preparedRoute=match||routes.null&&inherit(routes.null,{params:{},pathParams:{}}),(preparedRouteIsUpdateOnly=preparedRoute&&lastRoute&&preparedRoute.$$route===lastRoute.$$route&&angular.equals(preparedRoute.pathParams,lastRoute.pathParams)&&!preparedRoute.reloadOnSearch&&!forceReload)||!lastRoute&&!preparedRoute||$rootScope.$broadcast("$routeChangeStart",preparedRoute,lastRoute).defaultPrevented&&$locationEvent&&$locationEvent.preventDefault()}function commitRoute(){var lastRoute=$route.current,nextRoute=preparedRoute;preparedRouteIsUpdateOnly?(lastRoute.params=nextRoute.params,angular.copy(lastRoute.params,$routeParams),$rootScope.$broadcast("$routeUpdate",lastRoute)):(nextRoute||lastRoute)&&(forceReload=!1,$route.current=nextRoute,nextRoute&&nextRoute.redirectTo&&(angular.isString(nextRoute.redirectTo)?$location.path(interpolate(nextRoute.redirectTo,nextRoute.params)).search(nextRoute.params).replace():$location.url(nextRoute.redirectTo(nextRoute.pathParams,$location.path(),$location.search())).replace()),$q.when(nextRoute).then(resolveLocals).then(function(locals){nextRoute===$route.current&&(nextRoute&&(nextRoute.locals=locals,angular.copy(nextRoute.params,$routeParams)),$rootScope.$broadcast("$routeChangeSuccess",nextRoute,lastRoute))},function(error){nextRoute===$route.current&&$rootScope.$broadcast("$routeChangeError",nextRoute,lastRoute,error)}))}function resolveLocals(route){if(route){var locals=angular.extend({},route.resolve);angular.forEach(locals,function(value,key){locals[key]=angular.isString(value)?$injector.get(value):$injector.invoke(value,null,null,key)});var template=function(route){var template,templateUrl;angular.isDefined(template=route.template)?angular.isFunction(template)&&(template=template(route.params)):angular.isDefined(templateUrl=route.templateUrl)&&(angular.isFunction(templateUrl)&&(templateUrl=templateUrl(route.params)),angular.isDefined(templateUrl)&&(route.loadedTemplateUrl=$sce.valueOf(templateUrl),template=$templateRequest(templateUrl)));return template}(route);return angular.isDefined(template)&&(locals.$template=template),$q.all(locals)}}function interpolate(string,params){var result=[];return angular.forEach((string||"").split(":"),function(segment,i){if(0===i)result.push(segment);else{var segmentMatch=segment.match(/(\w+)(?:[?*])?(.*)/),key=segmentMatch[1];result.push(params[key]),result.push(segmentMatch[2]||""),delete params[key]}}),result.join("")}}]}),$routeMinErr=angular.$$minErr("ngRoute");function ngViewFactory($route,$anchorScroll,$animate){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(scope,$element,attr,ctrl,$transclude){var currentScope,currentElement,previousLeaveAnimation,autoScrollExp=attr.autoscroll,onloadExp=attr.onload||"";function cleanupLastView(){previousLeaveAnimation&&($animate.cancel(previousLeaveAnimation),previousLeaveAnimation=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&((previousLeaveAnimation=$animate.leave(currentElement)).then(function(){previousLeaveAnimation=null}),currentElement=null)}function update(){var locals=$route.current&&$route.current.locals,template=locals&&locals.$template;if(angular.isDefined(template)){var newScope=scope.$new(),current=$route.current,clone=$transclude(newScope,function(clone){$animate.enter(clone,null,currentElement||$element).then(function(){!angular.isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()}),cleanupLastView()});currentElement=clone,(currentScope=current.scope=newScope).$emit("$viewContentLoaded"),currentScope.$eval(onloadExp)}else cleanupLastView()}scope.$on("$routeChangeSuccess",update),update()}}}function ngViewFillContentFactory($compile,$controller,$route){return{restrict:"ECA",priority:-400,link:function(scope,$element){var current=$route.current,locals=current.locals;$element.html(locals.$template);var link=$compile($element.contents());if(current.controller){locals.$scope=scope;var controller=$controller(current.controller,locals);current.controllerAs&&(scope[current.controllerAs]=controller),$element.data("$ngControllerController",controller),$element.children().data("$ngControllerController",controller)}scope[current.resolveAs||"$resolve"]=locals,link(scope)}}}ngRouteModule.provider("$routeParams",function(){this.$get=function(){return{}}}),ngRouteModule.directive("ngView",ngViewFactory),ngRouteModule.directive("ngView",ngViewFillContentFactory),ngViewFactory.$inject=["$route","$anchorScroll","$animate"],ngViewFillContentFactory.$inject=["$compile","$controller","$route"]}(window,window.angular)},642:function(module,exports){
/**
 * @license AngularJS v1.5.9
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(window,angular){"use strict";var $resourceMinErr=angular.$$minErr("$resource"),MEMBER_NAME_REGEX=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;function lookupDottedPath(obj,path){if(!function(path){return null!=path&&""!==path&&"hasOwnProperty"!==path&&MEMBER_NAME_REGEX.test("."+path)}(path))throw $resourceMinErr("badmember",'Dotted member path "@{0}" is invalid.',path);for(var keys=path.split("."),i=0,ii=keys.length;i<ii&&angular.isDefined(obj);i++){var key=keys[i];obj=null!==obj?obj[key]:void 0}return obj}function shallowClearAndCopy(src,dst){for(var key in dst=dst||{},angular.forEach(dst,function(value,key){delete dst[key]}),src)!src.hasOwnProperty(key)||"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key]);return dst}angular.module("ngResource",["ng"]).provider("$resource",function(){var PROTOCOL_AND_DOMAIN_REGEX=/^https?:\/\/[^\/]*/,provider=this;this.defaults={stripTrailingSlashes:!0,cancellable:!1,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},delete:{method:"DELETE"}}},this.$get=["$http","$log","$q","$timeout",function($http,$log,$q,$timeout){var noop=angular.noop,forEach=angular.forEach,extend=angular.extend,copy=angular.copy,isFunction=angular.isFunction;function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function Route(template,defaults){this.template=template,this.defaults=extend({},provider.defaults,defaults),this.urlParams={}}return Route.prototype={setUrlParams:function(config,params,actionUrl){var val,encodedVal,self=this,url=actionUrl||self.template,protocolAndDomain="",urlParams=self.urlParams={};forEach(url.split(/\W/),function(param){if("hasOwnProperty"===param)throw $resourceMinErr("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(param)&&param&&new RegExp("(^|[^\\\\]):"+param+"(\\W|$)").test(url)&&(urlParams[param]={isQueryParamValue:new RegExp("\\?.*=:"+param+"(?:\\W|$)").test(url)})}),url=(url=url.replace(/\\:/g,":")).replace(PROTOCOL_AND_DOMAIN_REGEX,function(match){return protocolAndDomain=match,""}),params=params||{},forEach(self.urlParams,function(paramInfo,urlParam){val=params.hasOwnProperty(urlParam)?params[urlParam]:self.defaults[urlParam],angular.isDefined(val)&&null!==val?(encodedVal=paramInfo.isQueryParamValue?encodeUriQuery(val,!0):function(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}(val),url=url.replace(new RegExp(":"+urlParam+"(\\W|$)","g"),function(match,p1){return encodedVal+p1})):url=url.replace(new RegExp("(/?):"+urlParam+"(\\W|$)","g"),function(match,leadingSlashes,tail){return"/"===tail.charAt(0)?tail:leadingSlashes+tail})}),self.defaults.stripTrailingSlashes&&(url=url.replace(/\/+$/,"")||"/"),url=url.replace(/\/\.(?=\w+($|\?))/,"."),config.url=protocolAndDomain+url.replace(/\/\\\./,"/."),forEach(params,function(value,key){self.urlParams[key]||(config.params=config.params||{},config.params[key]=value)})}},function resourceFactory(url,paramDefaults,actions,options){var route=new Route(url,options);function defaultResponseInterceptor(response){return response.resource}function Resource(value){shallowClearAndCopy(value||{},this)}return actions=extend({},provider.defaults.actions,actions),Resource.prototype.toJSON=function(){var data=extend({},this);return delete data.$promise,delete data.$resolved,data},forEach(actions,function(action,name){var hasBody=/^(POST|PUT|PATCH)$/i.test(action.method),numericTimeout=action.timeout,cancellable=angular.isDefined(action.cancellable)?action.cancellable:options&&angular.isDefined(options.cancellable)?options.cancellable:provider.defaults.cancellable;numericTimeout&&!angular.isNumber(numericTimeout)&&($log.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete action.timeout,numericTimeout=null),Resource[name]=function(a1,a2,a3,a4){var data,success,error,params={};switch(arguments.length){case 4:error=a4,success=a3;case 3:case 2:if(!isFunction(a2)){params=a1,data=a2,success=a3;break}if(isFunction(a1)){success=a1,error=a2;break}success=a2,error=a3;case 1:isFunction(a1)?success=a1:hasBody?data=a1:params=a1;break;case 0:break;default:throw $resourceMinErr("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var timeoutDeferred,numericTimeoutPromise,isInstanceCall=this instanceof Resource,value=isInstanceCall?data:action.isArray?[]:new Resource(data),httpConfig={},responseInterceptor=action.interceptor&&action.interceptor.response||defaultResponseInterceptor,responseErrorInterceptor=action.interceptor&&action.interceptor.responseError||void 0;forEach(action,function(value,key){switch(key){default:httpConfig[key]=copy(value);break;case"params":case"isArray":case"interceptor":case"cancellable":}}),!isInstanceCall&&cancellable&&(timeoutDeferred=$q.defer(),httpConfig.timeout=timeoutDeferred.promise,numericTimeout&&(numericTimeoutPromise=$timeout(timeoutDeferred.resolve,numericTimeout))),hasBody&&(httpConfig.data=data),route.setUrlParams(httpConfig,extend({},function(data,actionParams){var ids={};return actionParams=extend({},paramDefaults,actionParams),forEach(actionParams,function(value,key){isFunction(value)&&(value=value(data)),ids[key]=value&&value.charAt&&"@"===value.charAt(0)?lookupDottedPath(data,value.substr(1)):value}),ids}(data,action.params||{}),params),action.url);var promise=$http(httpConfig).then(function(response){var data=response.data;if(data){if(angular.isArray(data)!==!!action.isArray)throw $resourceMinErr("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",name,action.isArray?"array":"object",angular.isArray(data)?"array":"object",httpConfig.method,httpConfig.url);if(action.isArray)value.length=0,forEach(data,function(item){"object"==typeof item?value.push(new Resource(item)):value.push(item)});else{var promise=value.$promise;shallowClearAndCopy(data,value),value.$promise=promise}}return response.resource=value,response},function(response){return(error||noop)(response),$q.reject(response)});return promise.finally(function(){value.$resolved=!0,!isInstanceCall&&cancellable&&(value.$cancelRequest=angular.noop,$timeout.cancel(numericTimeoutPromise),timeoutDeferred=numericTimeoutPromise=httpConfig.timeout=null)}),promise=promise.then(function(response){var value=responseInterceptor(response);return(success||noop)(value,response.headers),value},responseErrorInterceptor),isInstanceCall?promise:(value.$promise=promise,value.$resolved=!1,cancellable&&(value.$cancelRequest=timeoutDeferred.resolve),value)},Resource.prototype["$"+name]=function(params,success,error){isFunction(params)&&(error=success,success=params,params={});var result=Resource[name].call(this,params,this,success,error);return result.$promise||result}}),Resource.bind=function(additionalParamDefaults){return resourceFactory(url,extend({},paramDefaults,additionalParamDefaults),actions)},Resource}}]})}(window,window.angular)},643:function(module,exports){
/**
 * @license AngularJS v1.5.9
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(window,angular){"use strict";var bind,extend,forEach,isDefined,lowercase,noop,htmlParser,htmlSanitizeWriter,$sanitizeMinErr=angular.$$minErr("$sanitize");angular.module("ngSanitize",[]).provider("$sanitize",function(){var svgEnabled=!1;this.$get=["$$sanitizeUri",function($$sanitizeUri){return svgEnabled&&extend(validElements,svgElements),function(html){var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe:/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}],this.enableSvg=function(enableSvg){return isDefined(enableSvg)?(svgEnabled=enableSvg,this):svgEnabled},bind=angular.bind,extend=angular.extend,forEach=angular.forEach,isDefined=angular.isDefined,lowercase=angular.lowercase,noop=angular.noop,htmlParser=function(html,handler){null==html?html="":"string"!=typeof html&&(html=""+html),inertBodyElement.innerHTML=html;var mXSSAttempts=5;do{if(0===mXSSAttempts)throw $sanitizeMinErr("uinput","Failed to sanitize html because the input is unstable");mXSSAttempts--,window.document.documentMode&&stripCustomNsAttrs(inertBodyElement),html=inertBodyElement.innerHTML,inertBodyElement.innerHTML=html}while(html!==inertBodyElement.innerHTML);for(var node=inertBodyElement.firstChild;node;){switch(node.nodeType){case 1:handler.start(node.nodeName.toLowerCase(),attrToMap(node.attributes));break;case 3:handler.chars(node.textContent)}var nextNode;if(!((nextNode=node.firstChild)||(1===node.nodeType&&handler.end(node.nodeName.toLowerCase()),nextNode=node.nextSibling)))for(;null==nextNode&&(node=node.parentNode)!==inertBodyElement;)nextNode=node.nextSibling,1===node.nodeType&&handler.end(node.nodeName.toLowerCase());node=nextNode}for(;node=inertBodyElement.firstChild;)inertBodyElement.removeChild(node)},htmlSanitizeWriter=function(buf,uriValidator){var ignoreCurrentElement=!1,out=bind(buf,buf.push);return{start:function(tag,attrs){tag=lowercase(tag),!ignoreCurrentElement&&blockedElements[tag]&&(ignoreCurrentElement=tag),ignoreCurrentElement||!0!==validElements[tag]||(out("<"),out(tag),forEach(attrs,function(value,key){var lkey=lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;!0!==validAttrs[lkey]||!0===uriAttrs[lkey]&&!uriValidator(value,isImage)||(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(">"))},end:function(tag){tag=lowercase(tag),ignoreCurrentElement||!0!==validElements[tag]||!0===voidElements[tag]||(out("</"),out(tag),out(">")),tag==ignoreCurrentElement&&(ignoreCurrentElement=!1)},chars:function(chars){ignoreCurrentElement||out(encodeEntities(chars))}}};var inertBodyElement,SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^#-~ |!])/g,voidElements=toMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=toMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=toMap("rp,rt"),optionalEndTagElements=extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=extend({},optionalEndTagBlockElements,toMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),inlineElements=extend({},optionalEndTagInlineElements,toMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),svgElements=toMap("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),blockedElements=toMap("script,style"),validElements=extend({},voidElements,blockElements,inlineElements,optionalEndTagElements),uriAttrs=toMap("background,cite,href,longdesc,src,xlink:href"),htmlAttrs=toMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),svgAttrs=toMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),validAttrs=extend({},uriAttrs,svgAttrs,htmlAttrs);function toMap(str,lowercaseKeys){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[lowercaseKeys?lowercase(items[i]):items[i]]=!0;return obj}function attrToMap(attrs){for(var map={},i=0,ii=attrs.length;i<ii;i++){var attr=attrs[i];map[attr.name]=attr.value}return map}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){return"&#"+(1024*(value.charCodeAt(0)-55296)+(value.charCodeAt(1)-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function stripCustomNsAttrs(node){if(node.nodeType===window.Node.ELEMENT_NODE)for(var attrs=node.attributes,i=0,l=attrs.length;i<l;i++){var attrNode=attrs[i],attrName=attrNode.name.toLowerCase();"xmlns:ns1"!==attrName&&0!==attrName.lastIndexOf("ns1:",0)||(node.removeAttributeNode(attrNode),i--,l--)}var nextNode=node.firstChild;nextNode&&stripCustomNsAttrs(nextNode),(nextNode=node.nextSibling)&&stripCustomNsAttrs(nextNode)}!function(window){var doc;if(!window.document||!window.document.implementation)throw $sanitizeMinErr("noinert","Can't create an inert html document");var bodyElements=((doc=window.document.implementation.createHTMLDocument("inert")).documentElement||doc.getDocumentElement()).getElementsByTagName("body");if(1===bodyElements.length)inertBodyElement=bodyElements[0];else{var html=doc.createElement("html");inertBodyElement=doc.createElement("body"),html.appendChild(inertBodyElement),doc.appendChild(html)}}(window)}),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,MAILTO_REGEXP=/^mailto:/i,linkyMinErr=angular.$$minErr("linky"),isDefined=angular.isDefined,isFunction=angular.isFunction,isObject=angular.isObject,isString=angular.isString;return function(text,target,attributes){if(null==text||""===text)return text;if(!isString(text))throw linkyMinErr("notstring","Expected string but received: {0}",text);for(var match,url,i,attributesFn=isFunction(attributes)?attributes:isObject(attributes)?function(){return attributes}:function(){return{}},raw=text,html=[];match=raw.match(LINKY_URL_REGEXP);)url=match[0],match[2]||match[4]||(url=(match[3]?"http://":"mailto:")+url),i=match.index,addText(raw.substr(0,i)),addLink(url,match[0].replace(MAILTO_REGEXP,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""));function addText(text){var chars,buf;text&&html.push((chars=text,htmlSanitizeWriter(buf=[],noop).chars(chars),buf.join("")))}function addLink(url,text){var key,linkAttributes=attributesFn(url);for(key in html.push("<a "),linkAttributes)html.push(key+'="'+linkAttributes[key]+'" ');!isDefined(target)||"target"in linkAttributes||html.push('target="',target,'" '),html.push('href="',url.replace(/"/g,"&quot;"),'">'),addText(text),html.push("</a>")}}}])}(window,window.angular)},644:function(module,exports){
/**
 * @license AngularJS v1.5.9
 * (c) 2010-2016 Google, Inc. http://angularjs.org
 * License: MIT
 */
!function(window,angular){"use strict";function $$CookieWriter($document,$log,$browser){var cookiePath=$browser.baseHref(),rawDocument=$document[0];return function(name,value,options){rawDocument.cookie=function(name,value,options){var path,expires;expires=(options=options||{}).expires,path=angular.isDefined(options.path)?options.path:cookiePath,angular.isUndefined(value)&&(expires="Thu, 01 Jan 1970 00:00:00 GMT",value=""),angular.isString(expires)&&(expires=new Date(expires));var str=encodeURIComponent(name)+"="+encodeURIComponent(value);str+=path?";path="+path:"",str+=options.domain?";domain="+options.domain:"",str+=expires?";expires="+expires.toUTCString():"";var cookieLength=(str+=options.secure?";secure":"").length+1;return cookieLength>4096&&$log.warn("Cookie '"+name+"' possibly not set or overflowed because it was too large ("+cookieLength+" > 4096 bytes)!"),str}(name,value,options)}}angular.module("ngCookies",["ng"]).provider("$cookies",[function(){var defaults=this.defaults={};function calcOptions(options){return options?angular.extend({},defaults,options):defaults}this.$get=["$$cookieReader","$$cookieWriter",function($$cookieReader,$$cookieWriter){return{get:function(key){return $$cookieReader()[key]},getObject:function(key){var value=this.get(key);return value?angular.fromJson(value):value},getAll:function(){return $$cookieReader()},put:function(key,value,options){$$cookieWriter(key,value,calcOptions(options))},putObject:function(key,value,options){this.put(key,angular.toJson(value),options)},remove:function(key,options){$$cookieWriter(key,void 0,calcOptions(options))}}}]}]),angular.module("ngCookies").factory("$cookieStore",["$cookies",function($cookies){return{get:function(key){return $cookies.getObject(key)},put:function(key,value){$cookies.putObject(key,value)},remove:function(key){$cookies.remove(key)}}}]),$$CookieWriter.$inject=["$document","$log","$browser"],angular.module("ngCookies").provider("$$cookieWriter",function(){this.$get=$$CookieWriter})}(window,window.angular)},72:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(9),__webpack_require__(26),__webpack_require__(27),__webpack_require__(8)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(angular,inject,notify,ftnt_shared){const Omniselect=ftnt_shared.Omniselect,DEFAULT_WTP_REGION_COORDINATES={x:0,y:0};function cloneAndBuildMapping(arr){const result=angular.copy(arr);return result.mapping=result.reduce(function(map,elem){return map[elem.q_origin_key]=elem,map},{}),result}function WifiRegionService(injector){injector.injectMarked(this),this.locateAPs={}}return WifiRegionService.prototype.initialize=inject.mark(function($q){return function(){return $q.all([this.updateRegions(),this.updateWTPs(),this.updateManagedAPs()]).then(function(){this.initialized=!0;let region=this.regions[0];this.mkey&&(region=this.regions.find(r=>r.q_origin_key===this.mkey)),this.setRegion(region),this.placeholder=null,this.selectedAP=null,this._processAPs()}.bind(this))}}),WifiRegionService.prototype.locateAP=function(APsToLocate){APsToLocate.forEach(ap=>{this.locateAPs[ap.wtpID]=!0})},WifiRegionService.prototype.refreshRegions=inject.mark(function(){return function(){return Omniselect.invalidateCacheForSource("wireless-controller.region"),this.updateRegions()}}),WifiRegionService.prototype.refreshWTPs=inject.mark(function(){return function(){return Omniselect.invalidateCacheForSource("wireless-controller.wtp"),this.updateWTPs()}}),WifiRegionService.prototype.updateRegions=inject.mark(function(){return function(){return Omniselect.getSourceData("wireless-controller.region").then(function(regions){this.regions=cloneAndBuildMapping(regions)}.bind(this))}}),WifiRegionService.prototype.updateWTPs=inject.mark(function(){return function(){return Omniselect.getSourceData("wireless-controller.wtp").then(function(wtps){this.wtps=cloneAndBuildMapping(wtps)}.bind(this))}}),WifiRegionService.prototype.updateManagedAPs=inject.mark(function(){return function(){return Omniselect.getSourceMetaData("wireless-controller.wtp").then(function(response){this.managedAPs=response,this.managedAPs.mapping=response.managedAPMap}.bind(this))}}),WifiRegionService.prototype.getManagedAPDataForID=inject.mark(function(){return function(wtpID){return this.managedAPs&&this.managedAPs.mapping[wtpID]}}),WifiRegionService.prototype._processAPs=inject.mark(function(){return function(){this._processUnplacedAPs(),this._processPlacedAPs()}}),WifiRegionService.prototype._getAPRegion=inject.mark(function(){return function(wtp){return wtp.region}}),WifiRegionService.prototype._updateAPRegion=inject.mark(function(){return function(wtp,region){wtp.region=region}}),WifiRegionService.prototype._getAPRegionCoordinates=inject.mark(function(){return function(wtp){return{x:Number(wtp["region-x"]||0),y:Number(wtp["region-y"]||0)}}}),WifiRegionService.prototype._setAPRegionCoordinates=inject.mark(function(){return function(wtp,regionCoordinates){wtp["region-x"]=regionCoordinates.x,wtp["region-y"]=regionCoordinates.y}}),WifiRegionService.prototype._updateAPRegionCoordinates=inject.mark(function(){return function(wtp,regionCoordinates){this._setAPRegionCoordinates(wtp,regionCoordinates)}}),WifiRegionService.prototype._processUnplacedAPs=inject.mark(function(){return function(){this.unplacedAPSet=new Set(this.wtps.filter(function(wtp){return!wtp.region}).map(function(wtp){return wtp["wtp-id"]})),this.unplacedAPs=Array.from(this.unplacedAPSet||new Set).map(function(apID){return this.wtps.mapping[apID]}.bind(this))}}),WifiRegionService.prototype._processPlacedAPs=inject.mark(function(){return function(){this.placedAPSet=new Set(this.wtps.filter(function(wtp){return wtp.region&&this.region&&wtp.region.name===this.region.name}.bind(this)).map(function(wtp){return wtp["wtp-id"]})),this.placedAPs=Array.from(this.placedAPSet||new Set).map(function(apID){return this.wtps.mapping[apID]}.bind(this))}}),WifiRegionService.prototype.getRegions=inject.mark(function(){return function(){return this.regions}}),WifiRegionService.prototype.getRegion=inject.mark(function(){return function(){return this.region}}),WifiRegionService.prototype.setRegion=inject.mark(function($q){return function(region){if(region)return this.region=ftnt_shared.util.cloneObject(region),this._processAPs(),$q.resolve()}}),WifiRegionService.prototype.setRegionMkey=function(mkey){if(this.mkey=mkey,this.initialized&&mkey!==this.getRegion().q_origin_key){const region=this.regions.find(r=>r.q_origin_key===mkey);region&&this.setRegion(region)}},WifiRegionService.prototype.deleteRegion=inject.mark(function($http,lang){return function(region){const encodedName=encodeURIComponent(region.name);return this.unplaceAllAPs(region).then(function(){return $http.delete(`/api/v2/cmdb/wireless-controller/region/${encodedName}`)}).then(function(){return this.region=null,this.refreshRegions()}.bind(this)).then(function(){return this.refreshWTPs()}.bind(this)).then(function(){return this._processAPs(),this.setRegion(this.regions[0])}.bind(this)).catch(function(){notify.post(lang("Failed to delete WiFi Map."),notify.LEVEL.ERROR)})}}),WifiRegionService.prototype._toRegionCoordinates=inject.mark(function(){return function(imageCoordinates){try{return{x:imageCoordinates.x/this.getImageWidth(),y:imageCoordinates.y/this.getImageHeight()}}catch(e){return null}}}),WifiRegionService.prototype.getUnplacedAPs=inject.mark(function(){return function(){return this.unplacedAPs}}),WifiRegionService.prototype.getPlacedAPs=inject.mark(function(){return function(){return this.placedAPs}}),WifiRegionService.prototype.setPlaceholderCoordinates=function(coordinates){this.placeholder=coordinates},WifiRegionService.prototype.getPlaceholderCoordinates=function(){return this._toRegionCoordinates(this.placeholder)},WifiRegionService.prototype.isPlacePending=function(){return this.placePending},WifiRegionService.prototype.placeholderExists=function(){return null!==this.placeholder},WifiRegionService.prototype.clearPlaceholder=function(){this.placeholder=null},WifiRegionService.prototype.setPlacePending=function(pending){this.placePending=pending},WifiRegionService.prototype.setSelectedAP=function(ap){ap.selected=!0,this.selectedAP=ap},WifiRegionService.prototype.placeSelectedAP=function(coordinates){this.placeAP(this.selectedAP["wtp-id"],coordinates),this.selectedAP=null},WifiRegionService.prototype.clearSelectedAP=function(){this.selectedAP=null},WifiRegionService.prototype.placeAP=function(apID,imageCoordinates){if(!(imageCoordinates=imageCoordinates||this.placeholder))return!1;var placedAP=this.wtps.mapping[apID],lastState=this._getLastState(apID,placedAP),currentState={apID:apID,ap:placedAP,region:this.region,regionCoordinates:this._toRegionCoordinates(imageCoordinates),isPlaced:!0};return this._updateState(currentState),this._processAPs(),this._putAP(apID,currentState.region.name,currentState.regionCoordinates).catch(function(){this._updateState(lastState),this._processAPs()}.bind(this)),!0},WifiRegionService.prototype.unplaceAP=inject.mark(function(){return function(apID,skipProcessing){var unplacedAP=this.wtps.mapping[apID],lastState=this._getLastState(apID,unplacedAP),currentState={apID:apID,ap:unplacedAP,region:"",regionCoordinates:DEFAULT_WTP_REGION_COORDINATES,isPlaced:!1};return this._updateState(currentState),skipProcessing||this._processAPs(),this._putAP(apID,"",DEFAULT_WTP_REGION_COORDINATES).catch(function(){this._updateState(lastState),skipProcessing||this._processAPs()}.bind(this))}}),WifiRegionService.prototype.unplaceAllAPs=inject.mark(function($q){return function(region){return this.getPlacedAPs().filter(function(placedAP){return placedAP.region.name===region.name}).map(function(placedAP){return placedAP["wtp-id"]}).reduce(function(sequence,apID){return sequence.then(function(){return this.unplaceAP(apID,!0)}.bind(this))}.bind(this),$q.resolve())}}),WifiRegionService.prototype._putAP=inject.mark(function($http){return function(apID,regionName,regionCoordinates){return $http.put(`/api/v2/cmdb/wireless-controller/wtp/${apID}`,{region:regionName,"region-x":regionCoordinates.x,"region-y":regionCoordinates.y})}}),WifiRegionService.prototype._getLastState=inject.mark(function(){return function(apID,ap){return{apID:apID,ap:ap,region:angular.copy(this._getAPRegion(ap)),regionCoordinates:angular.copy(this._getAPRegionCoordinates(ap)),isPlaced:this._getAPRegion(ap)===this.region.name}}}),WifiRegionService.prototype._updateState=inject.mark(function(){return function(state){this._updateAPRegionCoordinates(state.ap,state.regionCoordinates),this._updateAPRegion(state.ap,state.region),state.isPlaced?(this.unplacedAPSet.delete(state.apID),this.placedAPSet.add(state.apID)):(this.unplacedAPSet.add(state.apID),this.placedAPSet.delete(state.apID))}}),WifiRegionService.prototype.getLock=inject.mark(function(){return function(){return this.isLocked}}),WifiRegionService.prototype.setLock=inject.mark(function(){return function(isLocked){this.isLocked=isLocked}}),WifiRegionService.prototype.isZoomInEnabled=inject.mark(function(){return function(){return Math.ceil(this.getImageZoomFactor())<9}}),WifiRegionService.prototype.isZoomOutEnabled=inject.mark(function(){return function(){return Math.floor(this.getImageZoomFactor())>-9}}),WifiRegionService.prototype.getImageZoomFactor=inject.mark(function(){return function(){return this.zoomFactor||0}}),WifiRegionService.prototype.setImageZoomFactor=inject.mark(function(){return function(zoomFactor){this.zoomFactor=zoomFactor}}),WifiRegionService.prototype.updateImageZoomFactor=inject.mark(function(){return function(zoomFactor){var zoomFactorUpdate=this.getImageZoomFactor()+zoomFactor;this.setImageZoomFactor(zoomFactorUpdate)}}),WifiRegionService.prototype.getImageWidth=inject.mark(function(){return function(){var regionImage=this.region&&this.region.image;return regionImage&&regionImage.naturalWidth||0}}),WifiRegionService.prototype.getImageHeight=inject.mark(function(){return function(){var regionImage=this.region&&this.region.image;return regionImage&&regionImage.naturalHeight||0}}),WifiRegionService.prototype.getScale=inject.mark(function(){return function(){return 1+this.getImageZoomFactor()/10}}),WifiRegionService.prototype.getCurrentlyDragging=inject.mark(function(){return function(){return this._currentlyDraggingID||null}}),WifiRegionService.prototype.setCurrentlyDragging=inject.mark(function(){return function(apID){this._currentlyDraggingID=apID}}),WifiRegionService.prototype.cleanUp=function(){this.locateAPs={},this.placedAPSet={},this.unplacedAPSet={},this.managedAPs={},this.unplacedAPs=[],this.placedAPs=[],this.wtps=[],this.regions=[]},function(providers){return providers.$provide.service("wifiRegionService",WifiRegionService)}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},760:function(module,exports,__webpack_require__){"use strict";module.exports=[__webpack_require__(418),__webpack_require__(419),__webpack_require__(420),__webpack_require__(421),__webpack_require__(229),__webpack_require__(422),__webpack_require__(423)]},861:function(module,exports){var path="/migadmin/ng/wifi/managed-ap/details/f-ap-details.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<f-dialog form="$ctrl.form" full-height="::true" loading="$ctrl.loading" footer-type="\'close\'">\n    <div class="flex-column absolute-fill" ng-if="!$ctrl.loading">\n        <div class="ap-summary" ng-show="!$ctrl.expanded">\n            <div class="summary">\n                <table class="table striped bordered key-value with-header summary-table full-width">\n                    <thead>\n                        <tr>\n                            <th colspan="2">\n                                <f-omniselect-entry entry="{\n                                    q_origin_key: $ctrl.ap.wtpID,\n                                    datasource: $ctrl.getOmniselectDatasource(\'wireless-controller.wtp\')\n                                }">\n                                </f-omniselect-entry>\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td>\n                                {{::\'sn\' | lang}}\n                            </td>\n                            <td>\n                                {{$ctrl.ap.serial}}\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                {{::\'board_mac\' | lang}}\n                            </td>\n                            <td>\n                                {{$ctrl.ap.boardMac}}\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                {{::\'status\' | lang}}\n                            </td>\n                            <td>\n                                {{$ctrl.ap.status | lang}}\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                {{::\'country\' | lang}}\n                            </td>\n                            <td>\n                                <f-icon ng-if="$ctrl.hasCountryConflict" class="fa-negate"></f-icon>\n                                <span ng-class="{\'tooltip-hint\': $ctrl.hasCountryConflict}" f-tip-target>\n                                    {{::$ctrl.ap.configuredCountry.name | lang}}\n                                    <div ng-if="$ctrl.hasCountryConflict" f-tip display-options="::{padContent: false}">\n                                        <table class="table slightly-condensed key-value select-tooltip-table">\n                                            <tr ng-repeat="country in $ctrl.countryMismatch">\n                                                <td>{{::country.langKey | lang}}</td>\n                                                <td>{{::country.value}}</td>\n                                            </tr>\n                                        </table>\n                                    </div>\n                                </span>\n                            </td>\n                        </tr>\n                        <tr ng-if="!$ctrl.ap.isMeshMode && $ctrl.ap.uplinkInterfaceName && !$ctrl.ap.isLocal">\n                            <td>\n                                {{::\'Uplink Interface\' | lang}}\n                            </td>\n                            <td>\n                                <f-omniselect-entry entry="{\n                                    q_origin_key: $ctrl.ap.uplinkInterfaceName,\n                                    datasource: $ctrl.getOmniselectDatasource(\'firewallInterfaces\')\n                                }">\n                                </f-omniselect-entry>\n                            </td>\n                        </tr>\n                        <tr ng-if="$ctrl.ap.networkAddress.ipv4 && !$ctrl.ap.isLocal">\n                            <td>\n                                {{::\'IPv4 Address\' | lang}}\n                            </td>\n                            <td>\n                                {{$ctrl.ap.networkAddress.ipv4}}\n                            </td>\n                        </tr>\n                        <tr ng-if="$ctrl.ap.networkAddress.ipv6 && !$ctrl.ap.isLocal">\n                            <td>\n                                {{::\'IPv6 Address\' | lang}}\n                            </td>\n                            <td>\n                                {{$ctrl.ap.networkAddress.ipv6}}\n                            </td>\n                        </tr>\n                        <tr ng-if="$ctrl.ap.isConnected && $ctrl.ap.uptime && $ctrl.ap.uptime.formatted">\n                            <td>\n                                {{::\'Uptime\' | lang}}\n                            </td>\n                            <td>\n                                {{$ctrl.ap.uptime.formatted}}\n                            </td>\n                        </tr>\n                        <tr ng-if="$ctrl.ap.version && $ctrl.ap.version.formatted">\n                            <td>\n                                {{::\'version\' | lang}}\n                            </td>\n                            <td>\n                                {{$ctrl.ap.version.formatted}}\n                                <f-icon ng-if="$ctrl.firmwareLoading" class="fa-loading"></f-icon>\n                                <f-icon class="fa-help-info" f-tip\n                                    ng-if="!$ctrl.firmwareLoading && $ctrl.newFirmwareAvailable"\n                                    title="{{ ::\'A new firmware version is available: {BUILD}\' | lang:[$ctrl.ap.latestFirmware] }}">\n                                </f-icon>\n                            </td>\n                        </tr>\n                    </tbody>\n                    <tfoot>\n                        <td colspan="2">\n                            <span f-menu-item-submenu="actionsDropdown" ng-if="!$ctrl.ap.isLocal">\n                                <span f-lang="Actions"></span>&nbsp;\n                                <span ng-if="$ctrl.newFirmwareAvailable" class="number-bubble severity-low">1</span>\n                            </span>\n                            <div f-pop-up-menu="actionsDropdown">\n                                <div f-menu-item-button click="$ctrl.deauthorize()"\n                                    enabled="!$ctrl.readOnly && $ctrl.ap.isAuthorized">\n                                    <f-icon class="fa-disabled"></f-icon>\n                                    <span>\n                                        {{::\'deauthorize\' | lang}}\n                                    </span>\n                                </div>\n                                <div f-menu-item-button click="$ctrl.authorize()"\n                                    enabled="!$ctrl.readOnly && $ctrl.canAuthorize()">\n                                    <f-icon class="fa-enabled"></f-icon>\n                                    <span>\n                                        {{::\'authorize\' | lang}}\n                                    </span>\n                                </div>\n                                <div f-menu-item-button click="$ctrl.ap.upgradeFirmware()" ng-show="!$ctrl.readOnly"\n                                    enabled="$ctrl.ap.isConnectedAuthorized">\n                                    <f-icon class="ftnt-install"></f-icon>\n                                    <span>{{ :: \'Upgrade\' | lang}}</span>\n                                    <span ng-if="$ctrl.newFirmwareAvailable" class="number-bubble severity-low">1</span>\n                                </div>\n                                <div f-menu-item-button click="$ctrl.ap.restart({ showConfirmation: true })"\n                                    enabled="!$ctrl.readOnly && $ctrl.ap.isConnected">\n                                    <f-icon class="fa-refresh"></f-icon>\n                                    <span>\n                                        {{::\'restart\' | lang}}\n                                    </span>\n                                </div>\n                                <div f-menu-item-submenu="ledBlinkMenu"\n                                    ng-if="!$ctrl.readOnly && $ctrl.ap.ledBlinkSupported">\n                                    <f-icon></f-icon>\n                                    <span>\n                                        {{::\'LED Blink\' | lang}}\n                                    </span>\n                                </div>\n                                <div f-pop-up-menu="ledBlinkMenu">\n                                    <div f-menu-item-submenu="ledBlinkMenuOptions">\n                                        <f-icon class="fa-sun-o"></f-icon>\n                                        <span f-lang="start"></span>\n                                    </div>\n                                    <div f-pop-up-menu="ledBlinkMenuOptions">\n                                        <div f-menu-item-button ng-repeat="blinkOption in $ctrl.ledBlinkOptions"\n                                            click="$ctrl.ap.blinkLED(\'start\', blinkOption.value)">\n                                            <span>{{:: blinkOption.label }}</span>\n                                        </div>\n                                    </div>\n                                    <div f-menu-item-button click="$ctrl.ap.blinkLED(\'stop\')">\n                                        <f-icon class="fa-circle"></f-icon>\n                                        <span f-lang="stop"></span>\n                                    </div>\n                                </div>\n                            </div>\n                            <button ng-click="$ctrl.locateAP()"\n                                ng-if="$ctrl.ap.isLocatable && $ctrl.fortigate.isCurrent">\n                                <f-icon class="fa-search"></f-icon>\n                                <span>\n                                    {{::\'Locate\' | lang}}\n                                </span>\n                            </button>\n                            <button ng-click="$ctrl.editAP()" ng-if="::$ctrl.showEdit()">\n                                <f-icon ng-class="{\'ftnt-view\': $ctrl.readOnly, \'fa-pencil\': !$ctrl.readOnly}"></f-icon>\n                                <span>\n                                    {{ $ctrl.readOnly ? \'view\' : \'edit\' | lang }}\n                                </span>\n                            </button>\n                        </td>\n                    </tfoot>\n                </table>\n            </div>\n            <div class="radio-health" ng-init="apHealth=$ctrl.ap.health">\n                <div class="health-type" ng-if="!$ctrl.ap.isLocal">\n                    <label class="section-title title">\n                        <button type="button" class="compact-visual-toggle"\n                            ng-class="{active: apHealth.general.expanded}"\n                            ng-click="apHealth.general.expanded = !apHealth.general.expanded">\n                        </button>\n                        <h3>{{::\'General Health\' | lang}}</h3>\n                        <f-icon class="fa-severity-{{apHealth.general.overall.severity}}"\n                            ng-if="$ctrl.ap.isConnectedAuthorized">\n                        </f-icon>\n                        <span ng-if="$ctrl.ap.isConnectedAuthorized">\n                            {{apHealth.general.overall.langKey | lang}}\n                        </span>\n                        <f-icon ng-if="!$ctrl.ap.isConnectedAuthorized" class="fa-status-down"></f-icon>\n                    </label>\n                    <table class="details" ng-show="apHealth.general.expanded">\n                        <tr class="cpu-usage">\n                            <td>\n                                <span\n                                    class="severity-label health-metric small wide disabled-metric"\n                                    ng-if="$ctrl.ap.isConnectedAuthorized">\n                                    {{$ctrl.formatters.percentage($ctrl.ap.cpuUsage)}}\n                                </span>\n                                <div class="offline-metric" ng-if="!$ctrl.ap.isConnectedAuthorized">\n                                    <f-icon class="fa-unknown"></f-icon>\n                                </div>\n                            </td>\n                            <td>\n                                {{::\'CPU Usage\' | lang}}\n                            </td>\n                        </tr>\n                        <tr class="mem-usage">\n                            <td>\n                                <span\n                                    class="severity-label health-metric small wide disabled-metric"\n                                    ng-if="$ctrl.ap.isConnectedAuthorized">\n                                    {{$ctrl.formatters.percentage($ctrl.ap.memUsage)}}\n                                </span>\n                                <div class="offline-metric" ng-if="!$ctrl.ap.isConnectedAuthorized">\n                                    <f-icon class="fa-unknown"></f-icon>\n                                </div>\n                            </td>\n                            <td>\n                                {{::\'Memory Usage\' | lang}}\n                            </td>\n                        </tr>\n                        <tr class="connection-uptime">\n                            <td>\n                                <span\n                                    class="severity-label health-metric small wide severity-{{apHealth.general.connection_uptime.severity}}"\n                                    ng-if="$ctrl.ap.isConnectedAuthorized">\n                                    {{apHealth.general.connection_uptime.label}}\n                                </span>\n                                <div class="offline-metric" ng-if="!$ctrl.ap.isConnectedAuthorized">\n                                    <f-icon class="fa-unknown"></f-icon>\n                                </div>\n                            </td>\n                            <td>\n                                <span class="tooltip-hint" f-tip-target>\n                                    {{::\'Connection Uptime\' | lang}}\n                                    <div f-tip display-options="::{padContent: false}">\n                                        <table class="table slightly-condensed key-value select-tooltip-table">\n                                            <tr>\n                                                <td>{{::\'Connected Since\' | lang}}</td>\n                                                <td>{{$ctrl.ap.jointime.formatted}}</td>\n                                            </tr>\n                                            <tr ng-if="$ctrl.ap.lastFailure.errorCode">\n                                                <td>{{::\'Last Failure Reason\' | lang}}</td>\n                                                <td>{{$ctrl.ap.lastFailure.errorMessage}}</td>\n                                            </tr>\n                                        </table>\n                                    </div>\n                                </span>\n                            </td>\n                        </tr>\n                        <tr class="country-code"\n                            ng-if="$ctrl.ap.isConnectedAuthorized && apHealth.general.country_code.id > 1">\n                            <td>\n                                <span\n                                    class="severity-label health-metric small wide severity-{{apHealth.general.country_code.severity}}"\n                                    ng-if="$ctrl.ap.isConnectedAuthorized">\n                                    {{apHealth.general.country_code.label}}\n                                </span>\n                                <div class="offline-metric" ng-if="!$ctrl.ap.isConnectedAuthorized">\n                                    <f-icon class="fa-unknown"></f-icon>\n                                </div>\n                            </td>\n                            <td>\n                                {{::\'Country/Region Mismatch\' | lang}}\n                            </td>\n                        </tr>\n                        <tr ng-repeat="uplinkStatus in ::apHealth.general.uplink_status"\n                            ng-class="{\'light-text\': $ctrl.ap.uplinkStatus[$index].isDisabled}">\n                            <td>\n                                <span class="severity-label health-metric small wide" ng-class="{\'severity-{{:: uplinkStatus.severity}}\': uplinkStatus.value !== 0,\n                                               \'disabled-metric\': $ctrl.ap.uplinkStatus[$index].isDisabled}"\n                                    ng-if="$ctrl.ap.isConnectedAuthorized">\n                                    {{:: uplinkStatus.label }}\n                                </span>\n                                <div class="offline-metric" ng-if="!$ctrl.ap.isConnectedAuthorized">\n                                    <f-icon class="fa-unknown"></f-icon>\n                                </div>\n                            </td>\n                            <td>\n                                <span f-tip-target\n                                    ng-class="{\'tooltip-hint\': uplinkStatus.id === 1 && !$ctrl.ap.uplinkStatus[$index].isWired}">\n                                    {{:: $ctrl.ap.uplinkStatus[$index].interface }}\n                                    <span ng-if="uplinkStatus.id === 1 && !$ctrl.ap.uplinkStatus[$index].isWired" f-tip>\n                                        {{:: \'The 2.4GHz band is generally crowded, noisy, and provides less throughput. It is recommended to use 5GHz for mesh uplink.\' | lang }}\n                                    </span>\n                                </span>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n                <div ng-repeat="radioFreq in ::$ctrl.radioFrequency">\n                    <div class="health-type" ng-repeat="radio in apHealth.radio[radioFreq].radios">\n                        <label class="section-title title">\n                            <button type="button" class="compact-visual-toggle"\n                                ng-class="{active: !radio.hidden}"\n                                ng-click="radio.hidden = !radio.hidden">\n                            </button>\n                            <h3>{{::\'wifi::\' + radioFreq | lang}} {{::\'Health\' | lang}} - {{\'Radio {ID}\' | lang:[radio.radio_id]}}</h3>\n                            <f-icon class="fa-severity-{{radio.overall.severity}}"\n                                ng-if="$ctrl.ap.isConnectedAuthorized">\n                            </f-icon>\n                            <span ng-if="$ctrl.ap.isConnectedAuthorized">\n                                    {{radio.overall.langKey | lang}}\n                            </span>\n                        </label>\n                        <table class="details" ng-if="!radio.hidden" f-with="$ctrl.ap.radios[radio.radio_id - 1] as radioInfo">\n                            <tr class="interfering-aps" ng-class="{\'light-text\': !radioInfo.backgroundScanEnabled && radioInfo.widsSupported}">\n                                <td>\n                                    <span ng-if="$ctrl.ap.isConnectedAuthorized">\n                                        <span\n                                            ng-if="radioInfo.backgroundScanEnabled || !radioInfo.widsSupported"\n                                            class="severity-label health-metric small wide severity-{{radio.interfering_ssids.severity}}">\n                                            {{radio.interfering_ssids.label}}\n                                        </span>\n                                        <span ng-if="!radioInfo.backgroundScanEnabled && radioInfo.widsSupported"\n                                            class="severity-label disabled-metric small wide">\n                                            {{::\'n/a\' | lang}}\n                                        </span>\n                                    </span>\n                                    <div class="offline-metric" ng-if="!$ctrl.ap.isConnectedAuthorized">\n                                        <f-icon class="fa-unknown"></f-icon>\n                                    </div>\n                                </td>\n                                <td>\n                                    <span ng-if="(radioInfo.backgroundScanEnabled || !radioInfo.widsSupported) && $ctrl.ap.isConnectedAuthorized">\n                                        {{::\'interfering_ssids\' | lang}}\n                                    </span>\n                                    <span ng-if="(!radioInfo.backgroundScanEnabled && radioInfo.widsSupported) || !$ctrl.ap.isConnectedAuthorized"\n                                        f-tip-target class="tooltip-hint">\n                                        {{::\'interfering_ssids\' | lang}}\n                                        <div f-tip>\n                                            {{::\'To detect interfering SSIDs, configure the FortiAP profile to use Radio Resource Provisioning or a WIDS profile with AP Scan enabled.\' | lang}}\n                                        </div>\n                                    </span>\n                                </td>\n                            </tr>\n                            <tr class="client-count">\n                                <td>\n                                    <span class="severity-label health-metric small wide severity-{{radio.client_count.severity}}"\n                                        ng-if="$ctrl.ap.isConnectedAuthorized">\n                                        {{radio.client_count.label}}\n                                    </span>\n                                    <div class="offline-metric" ng-if="!$ctrl.ap.isConnectedAuthorized">\n                                        <f-icon class="fa-unknown"></f-icon>\n                                    </div>\n                                </td>\n                                <td>\n                                    {{::\'client\' | lang}}\n                                </td>\n                            </tr>\n                            <tr class="channel-utilization" ng-class="{\'light-text\': !radioInfo.channelUtilizationEnabled || $ctrl.ap.isLocal}">\n                                <td>\n                                    <span ng-if="$ctrl.ap.isConnectedAuthorized">\n                                        <span ng-if="radioInfo.channelUtilizationEnabled && !$ctrl.ap.isLocal"\n                                            class="severity-label health-metric small wide severity-{{radio.channel_utilization.severity}}">\n                                            {{radio.channel_utilization.label}}\n                                        </span>\n                                        <span ng-if="!radioInfo.channelUtilizationEnabled || $ctrl.ap.isLocal"\n                                            class="severity-label disabled-metric small wide">\n                                            {{::\'n/a\' | lang}}\n                                        </span>\n                                    </span>\n                                    <div class="offline-metric" ng-if="!$ctrl.ap.isConnectedAuthorized">\n                                        <f-icon class="fa-unknown"></f-icon>\n                                    </div>\n                                </td>\n                                <td>\n                                    {{::\'Channel Utilization\' | lang}}\n                                </td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="controls-container">\n            <div class="control tabs small-hide">\n                <div f-tip-target ng-repeat="(key, view) in ::$ctrl.VIEWS" class="button-container"\n                    ng-init="enabled = !view.enabled || view.enabled($ctrl.ap, $ctrl.fortigate, $ctrl.state)">\n                    <button type="button" class="button" ng-click="$ctrl.changeView(view)" ng-class="{\n                            selected: view === $ctrl.selectedView,\n                            disabled: !enabled\n                        }">\n                        <span f-lang="{{:: view.lang }}"></span>\n                        <f-icon ng-if="!enabled" class="fa-warning"></f-icon>\n                    </button>\n                    <div f-tip display-options="::{showDelay: true, fixed: true}" ng-if="!enabled">\n                        <span>\n                            {{:: \'Option is disabled because of the following reason(s)\' | lang}}:\n                        </span>\n                        <ul ng-repeat="(reason, message) in ::view.disabledReasons">\n                            <li ng-if="!view.enabledCheckMap[reason]">\n                                {{:: message | lang }}\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            <div class="control">\n                <button class="button expand" ng-click="$ctrl.expand()">\n                    <f-icon ng-class="{\'fa-chevron-up\': !$ctrl.expanded, \'fa-chevron-down\': $ctrl.expanded}"></f-icon>\n                </button>\n            </div>\n        </div>\n        <div class="flex-grow containing-block tabs-wrapper small-hide">\n            <table ng-show="!$ctrl.loading && $ctrl.selectedView === $ctrl.VIEWS.RADIOS"\n                class="table radio-table full-width striped bordered key-value with-header sticky-header">\n                <thead>\n                    <tr>\n                        <th class="key-col"></th>\n                        <th ng-repeat="radio in $ctrl.ap.radios">\n                            {{::\'radio\' | lang}} {{::radio.id}}\n                            <span ng-if="radio.isAP">\n                                - {{::\'wifi::\' + radio.radioFrequency | lang}}\n                            </span>\n                        </th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr>\n                        <td>\n                            {{::\'mode\' | lang}}\n                        </td>\n                        <td ng-repeat="radio in $ctrl.ap.radios">\n                            {{::radio.mode}}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            {{::\'ssid\' | lang}}\n                        </td>\n                        <td ng-repeat="ssidContent in ::$ctrl.ssidContents">\n                            <div ng-if="ssidContent.isString">\n                                {{::ssidContent.content | lang}}\n                            </div>\n                            <div ng-if="!ssidContent.isString">\n                                <div ng-repeat="entry in ::ssidContent.content">\n                                    <f-omniselect-entry entry="entry">\n                                    </f-omniselect-entry>\n                                </div>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            {{::\'client\' | lang}}\n                        </td>\n                        <td ng-repeat="radio in $ctrl.ap.radios">\n                            {{::radio.clientCount}}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            {{::\'Bandwidth Tx\' | lang}}\n                        </td>\n                        <td ng-repeat="radio in $ctrl.ap.radios">\n                            {{::radio.bandwidth.tx.formatted}}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            {{::\'Bandwidth Rx\' | lang}}\n                        </td>\n                        <td ng-repeat="radio in $ctrl.ap.radios">\n                            {{::radio.bandwidth.rx.formatted}}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            {{::\'Operating Channel\' | lang}}\n                        </td>\n                        <td ng-repeat="radio in $ctrl.ap.radios">\n                            {{::radio.operatingChannel}}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            {{::\'channels\' | lang}}\n                        </td>\n                        <td ng-repeat="radio in $ctrl.ap.radios">\n                            {{::$ctrl.formatters.channels(radio.channels)}}\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            {{::\'field_oper_txpower\' | lang}}\n                        </td>\n                        <td ng-repeat="radio in $ctrl.ap.radios">\n                            {{::radio.operatingPower}} dBm\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            {{::\'radioband\' | lang}}\n                        </td>\n                        <td ng-repeat="radio in $ctrl.ap.radios">\n                            {{::$ctrl.formatters.band(radio.radioType, radio.isAP)}}\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n            <f-wifi-client-monitor ng-show="!$ctrl.loading && $ctrl.selectedView === $ctrl.VIEWS.CLIENTS"\n                default-columns="$ctrl.clientColumns" hide-csf-chooser="::true" ap="$ctrl.ap" hide-charts="::true">\n            </f-wifi-client-monitor>\n            <f-log-view ng-show="!$ctrl.loading && $ctrl.selectedView === $ctrl.VIEWS.LOGS" filters="$ctrl.logFilters"\n                filter-model="$ctrl.logFilterModel" log-type="\'event/wireless\'">\n            </f-log-view>\n            <f-console class="ap-cli" ng-if="!$ctrl.loading && $ctrl.selectedView === $ctrl.VIEWS.AP_CLI" options="::{\n                    commands: [\'exec ssh admin@\' + $ctrl.ap.displayIP],\n                    vdom: $ctrl.ap.csfFortiAP && $ctrl.ap.csfFortiAP.vdom\n                }">\n            </f-console>\n            <f-probe-vlan ng-show="!$ctrl.loading && $ctrl.selectedView === $ctrl.VIEWS.PROBE_VLAN && $ctrl.ap.vlanProbeSupported"\n                ap="$ctrl.ap.serial" fortigate="$ctrl.fortigate">\n            </f-probe-vlan>\n            <div class="spectral" ng-if="!$ctrl.loading && $ctrl.selectedView === $ctrl.VIEWS.SPECTRAL">\n                <f-wifi-spectral-analysis ap="$ctrl.ap"></f-wifi-spectral-analysis>\n            </div>\n        </div>\n    </div>\n</f-dialog>\n\n<link rel="stylesheet" type="text/css" ng-href="{{ \'/ng/wifi/managed-ap/details/f-ap-details.css\' | cache_path }}">\n<link rel="stylesheet" type="text/css" ng-href="{{ \'/ng/directives/faceted_search/faceted_search.css\' | cache_path }}">\n<link rel="stylesheet" type="text/css" ng-href="{{ \'/ng/log/view/f-log-view.css\' | cache_path }}">')}]),module.exports=path},893:function(module,exports){var path="/migadmin/ng/wifi/monitor/partials/f-wifi-client-monitor.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<f-mutable\n    settings="$ctrl.muTable.settings"\n    source="$ctrl.muTable.source"\n    chart-columns="$ctrl.chartSettings.columns"\n    chart-colors="$ctrl.getChartColor(value, column)"\n    on-double-click="$ctrl.showDetails($entry)"\n    context-menu="::true">\n    <f-wifi-client-monitor-menu\n        menu="menu"\n        ng-if="!$ctrl.slide"\n        on-refresh="$ctrl.reloadSource()"\n        hide-csf-chooser="$ctrl.hideCsfChooser"\n        show-details="$ctrl.showDetails(entry)"\n        class="menu-bar-component">\n    </f-wifi-client-monitor-menu>\n</f-mutable>\n')}]),module.exports=path},894:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8),__webpack_require__(63),__webpack_require__(27)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=((ftnt_shared,fwebWifi,notify)=>{const WIFI_CLIENT_URL="/api/v2/monitor/wifi/client",{MuTable:MuTable}=ftnt_shared;function WifiClientMonitorSourceFactory($http,$q){class WifiClientMonitorSource extends MuTable.FixedStreamableSource{constructor(options){super(),this.setParams(options)}setParams(options={}){this.ap=options.ap,this.sourceFilterFn=options.sourceFilterFn,this.fortigate=options.fortigate}async _fetchEntries(){const promises=[$http.get(WIFI_CLIENT_URL,{csfProxy:this.fortigate}).then(r=>r.data.results),fwebWifi.metaDataFactory()];try{let[source,wifiCommon]=await $q.all(promises);return source=source.map(entry=>Object.assign(entry,{frequency:wifiCommon.getFrequencyForBand(entry.radio_type)})),this.ap&&this.ap.serial?source=source.filter(entry=>entry.wtp_id===this.ap.serial):this.sourceFilterFn&&"function"==typeof this.sourceFilterFn&&(source=this.sourceFilterfn(source)),source}catch(error){return notify.post(error.message,notify.LEVEL.ERROR),[]}}fetchEntries(){return this._promise||(this._promise=this._fetchEntries()),this._promise.finally(()=>this._promise=null)}}return WifiClientMonitorSource.prototype.AUTO_REFRESH=!0,WifiClientMonitorSource}return providers=>{providers.$provide.factory("WifiClientMonitorSource",WifiClientMonitorSourceFactory)}}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},895:function(module,exports){var path="/migadmin/ng/wifi/monitor/partials/f-wifi-client-monitor-menu.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<div class="left-menu-items">\n    <div f-menu-item-button ng-click="$ctrl.refresh()" ng-if="::$ctrl.menu.menuBar && !$ctrl.inWidget">\n        <f-icon class="fa-refresh"></f-icon>\n        <span>{{::\'refresh\' | lang}}</span>\n    </div>\n    <div f-menu-item-button\n        click="$ctrl.showDetails({entry: $entries[0]})"\n        enabled="$ctrl.singleSelected">\n        <f-icon class="fa-external-link"></f-icon>\n        <span f-lang="Diagnostics and Tools"></span>\n    </div>\n</div>\n<div class="center-menu-items" ng-if="$ctrl.menu.menuBar">\n    <f-mutable-search></f-mutable-search>\n</div>\n<div class="right-menu-items" ng-if="$ctrl.menu.menuBar && !$ctrl.hideCsfChooser">\n    <div class="menu-item menu-item-padded">\n        <f-csf-fortigate-chooser></f-csf-fortigate-chooser>\n    </div>\n</div>\n')}]),module.exports=path},896:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26),__webpack_require__(8),__webpack_require__(108),__webpack_require__(63),__webpack_require__(27),__webpack_require__(55)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=((inject,ftnt_shared,fWebUtil,fWifi,notify)=>{const{formatters:formatters,quarantine:quarantine,select:select,datetime:datetime,dom:dom}=fWebUtil,{adjustBasedOnTZDevice:adjustBasedOnTZDevice}=datetime,CLIENT_REFRESH_INTERVAL=2e3,GRAPH_RANGE_SECONDS=300,GRAPH_SIZE=GRAPH_RANGE_SECONDS/2,BANDWIDTH_TX_COLOR=dom.COMPARE_BAR.COLORS.OCEAN_GREEN,BANDWIDTH_RX_COLOR=dom.COMPARE_BAR.COLORS.GREEN,SNR_COLOR=dom.COMPARE_BAR.COLORS.BLUE,WIFI_CLIENT_VIEWS={APPLICATIONS:{lang:"Applications",value:"applications",viewType:"application",sortBy:"bytes",timeframe:"realtime",visualization:"table"},DESTINATIONS:{lang:"Destinations",value:"destinations",viewType:"destination",sortBy:"bytes",timeframe:"realtime",visualization:"table"},POLICIES:{lang:"Policies",value:"policies",viewType:"policy",sortBy:"bytes",timeframe:"realtime",visualization:"table"},LOGS:{lang:"logs",value:"logs"}},HEALTH_CONSTANTS={SIGNAL_STRENGTH:{LOW:[-56,Number.MAX_SAFE_INTEGER],MEDIUM:[-75,-56],HIGH:[Number.MIN_SAFE_INTEGER,-75]},SNR:{LOW:[39,Number.MAX_SAFE_INTEGER],MEDIUM:[20,39],HIGH:[Number.MIN_SAFE_INTEGER,20]},BAND:{ALL:(band,radios,client)=>{if("5ghz"===band)return"LOW";{const hasSharedSsid=radios.some(radio=>"5ghz"===radio.radioFrequency&&radio.ssid.value&&radio.ssid.value[client.ssid]);return"24ghz"!==band||hasSharedSsid?"HIGH":"MEDIUM"}}},TRANSMISSION:{LOW:[0,20],MEDIUM:[20,50],HIGH:[50,100]}},HEALTH_RESULTS={LOW:{id:0,value:0,label:0,langKey:"Good",severity:"none"},MEDIUM:{id:1,value:0,label:0,langKey:"Fair",severity:"medium"},HIGH:{id:3,value:0,label:0,langKey:"Poor",severity:"critical"}},REST_API="/api/v2",CLIENT_URL="/monitor/wifi/client",DISASSOCIATE_URL="/monitor/wifi/client/disassociate",QUARANTINE_URL="/cmdb/user/quarantine",isUniqueLocalAddress=address=>address.startsWith("fe80");class WifiClientDetails extends inject.Collectable{constructor(state,lang){super(),this.setupClientWatch(),this.formatters={signalStrength:signal=>Number.isInteger(signal)?`${signal} ${lang("dBm")}`:lang("n/a"),snr:snr=>Number.isInteger(snr)?`${snr} ${lang("dB")}`:lang("n/a"),band:type=>{const band=this.getBand(type);return lang(band?`wifi::${band}`:"n/a")},bandwidth:bandwidth=>bandwidth>=0?formatters.metric_bits_per_second(bandwidth):lang("n/a"),percentage:number=>Number.isInteger(number)?`${number}%`:lang("n/a")},this.readOnly=state.readOnlyAdmin(),this.GRAPH_SIZE=1e3*GRAPH_RANGE_SECONDS,this.fortiViewTypes=["APPLICATIONS","DESTINATIONS","POLICIES"],this.bandwidthTxColor=BANDWIDTH_TX_COLOR,this.bandwidthRxColor=BANDWIDTH_RX_COLOR,this.currentGraph="Bandwidth"}$onInit(){this.init()}$onDestroy($INJECTABLE$,$timeout){return()=>{$timeout.cancel(this.nextStatisticsTimeout)}}changeView(view){this.selectedView!==view&&(this.selectedView=view)}getOmniselectDatasource(datasource){return this.fortigate&&this.fortigate.getOmniselectProxySourceID(datasource)||datasource}getAllVdomDatasource(datasource){return select.makeAllVdomsSourceID(this.getOmniselectDatasource(datasource))}setupClientWatch($INJECTABLE$,$scope){return()=>{$scope.$watch("$ctrl.client",(newClient,oldClient)=>{oldClient&&newClient.sta_mac!==oldClient.sta_mac&&this.init(!0)})}}init($INJECTABLE$,lang,apManager,$timeout,csfTopology,$q,$http){return async delay=>{this.loading=!0,this.fortigate=this.fortigate||csfTopology.selectedFortigate,this.logFilters={stamac:{selectors:{history:"stamac"}}},this.logFilterModel={stamac:[this.client.sta_mac]},this.tableFilters={source:this.client.ip};const clientName=this.client.hostname||this.client.sta_mac.toUpperCase(),promises=[$http.get(this.fortigate.createCSFURI(`${REST_API}${QUARANTINE_URL}`)).then(r=>r.data.results),fWifi.metaDataFactory()];let[quarantineData,wifiCommon]=await $q.all(promises);this.slideController.slide.update({title:`${lang("Summary of").toString()} ${clientName}`}),this.WIFI_COMMON=wifiCommon,this.mac=this.client.sta_mac,this.isQuarantined=quarantineData&&quarantineData.targets.some(entry=>entry.macs.some(macAddress=>macAddress.mac===this.mac)),this.ipAddresses=[],this.client.ip&&this.ipAddresses.push({langKey:"IPv4 Address",value:this.client.ip}),this.client.sta_ip6.map(address=>{if(address&&"::"!==address){let langKey="IPv6 Global Unicast Address";isUniqueLocalAddress(address)&&(langKey="IPv6 Unique Local Address"),this.ipAddresses.push({langKey:langKey,value:address})}}),this.quarantineData=quarantineData,this.snrGraph=[],this.bandwidthGraph=[[],[]],this.snrMax=null,this.bandwidthMax=null,this.bandwidthValues=[0,0],apManager.buildIfNecessary(this.fortigate).then(()=>{this.ap=apManager.get(this.getApId(this.client.wtp_id)),this.ap.refresh().then(()=>{this.getHealth(),this.loadData()}).finally(()=>{delay?$timeout(()=>{this.loading=!1},100):this.loading=!1})}),this.VIEWS=WIFI_CLIENT_VIEWS,this.selectedView=this.VIEWS.APPLICATIONS}}loadData($INJECTABLE$,$timeout,$http,lang){const timeFormatter=(value,format)=>ftnt_shared.dateTime.formatDateTimeCustom(value,format),getXaxisOptions=(min,max)=>({mode:"time",timezone:"browser",ticks:5,min:min,max:max,tickFormatter:value=>timeFormatter(value,"HH:mm")});return()=>{const url=this.fortigate.createCSFURI(`${REST_API}${CLIENT_URL}`),nextStatistics=()=>{this.nextStatisticsTimeout=$timeout(()=>{$http.get(url).then(res=>res.data.results).then(allData=>{const newData=allData.find(entry=>entry.sta_mac===this.mac);if(newData){this.client=newData,this.getHealth();const adjustedTime=adjustBasedOnTZDevice(Date.now());["bandwidth_tx","bandwidth_rx"].map((key,index)=>{const bandwidth=newData[key]||0;this.bandwidthGraph[index].push([adjustedTime,bandwidth]),this.bandwidthValues[index]=this.formatters.bandwidth(bandwidth),this.bandwidthMax=Math.max(this.bandwidthMax,bandwidth)});const snr=newData.snr||0;for(this.snrGraph.push([adjustedTime,snr]),this.snrValue=this.formatters.snr(snr),this.snrMax=Math.max(this.snrMax,snr);this.snrGraph.length>GRAPH_SIZE;)this.snrGraph.shift(),this.bandwidthGraph[0].shift(),this.bandwidthGraph[1].shift();this.bandwidthLineChartConfigs={data:[{data:this.bandwidthGraph[0],color:BANDWIDTH_TX_COLOR,label:lang("Bandwidth Tx")},{data:this.bandwidthGraph[1],color:BANDWIDTH_RX_COLOR,label:lang("Bandwidth Rx")}],options:{xaxis:getXaxisOptions(this.snrGraph[0][0],adjustedTime),yaxis:{min:this.bandwidthMax?.1*-this.bandwidthMax:-10,max:this.bandwidthMax?1.1*this.bandwidthMax:100,ticks:3,tickFormatter:this.formatters.bandwidth},legend:{show:!1}},tooltips:!0,tooltip_formatter:(label,x,y)=>{return`${timeFormatter(x,"HH:mm:ss")}: ${this.formatters.bandwidth(y)}`+` (${label})`}},this.snrLineChartConfigs={data:[{data:this.snrGraph,color:SNR_COLOR}],options:{xaxis:getXaxisOptions(this.snrGraph[0][0],adjustedTime),yaxis:{min:-10,max:1.1*this.snrMax,ticks:3,tickFormatter:this.formatters.snr},legend:{show:!1}},tooltips:!0,tooltip_formatter:(label,x,y)=>{return`${timeFormatter(x,"HH:mm:ss")}: ${this.formatters.snr(y)}`}}}nextStatistics()})},CLIENT_REFRESH_INTERVAL)};this.loading=!0,nextStatistics(),this.loading=!1}}quarantineClient($INJECTABLE$,$http,lang,slide,$scope){return()=>{const url=this.fortigate.createCSFURI(`${REST_API}${QUARANTINE_URL}`),entries=[quarantine.createQuarantineRequestEntry({mac:this.client.sta_mac,fortigateSerial:this.fortigate.serial})];let slideTitle="Quarantine Host",removeMode=!1;this.isQuarantined&&(slideTitle="Remove Quarantine",removeMode=!0);const childScope=Object.assign($scope.$new(),{entries:entries,removeMode:removeMode});return slide.open(null,{template:'<f-quarantine-dialog entries="entries" remove-mode="removeMode"</f-quarantine-dialog>',parentScope:childScope,options:{closeButton:!0,closeOnEscape:!0,fullHeight:!0,title:lang(slideTitle).toString()}}).then(async()=>{this.loading=!0,this.isQuarantined=!this.isQuarantined,this.quarantineData=await $http.get(url).then(res=>res.data.results),this.loading=!1}).finally(()=>{childScope.$destroy()})}}disassociateClient($INJECTABLE$,$http,lang,slide,$timeout){return()=>{slide.confirm(lang("Client will be disassociated from FortiAP.")).then(()=>{const url=this.fortigate.createCSFURI(`${REST_API}${DISASSOCIATE_URL}`);return $http.post(url,{mac:this.client.sta_mac}).then(()=>{notify.post(lang("Client disassociated"),notify.LEVEL.SUCCESS),this.disassociated=!0,this.health={signalStrength:{},snr:{},band:{}},$timeout.cancel(this.nextStatisticsTimeout)}).catch(()=>{notify.post(lang("Failed to disassociate client"),notify.LEVEL.ERROR)})})}}getApId(apId){return this.fortigate.serial===apId?fWifi.convertSerialToLocal(this.fortigate.serial):apId}getBand(radioType){return this.WIFI_COMMON.getFrequencyForBand(radioType)}getHealth(){const health={};health.signalStrength=this.getHealthDetails({ranges:HEALTH_CONSTANTS.SIGNAL_STRENGTH,value:this.client.signal,label:this.formatters.signalStrength(this.client.signal)}),health.snr=this.getHealthDetails({ranges:HEALTH_CONSTANTS.SNR,value:this.client.snr,label:this.formatters.snr(this.client.snr)}),health.band=this.getHealthDetails({ranges:HEALTH_CONSTANTS.BAND,value:this.getBand(this.client.radio_type),label:this.formatters.band(this.client.radio_type)});const txFailPercentage=Math.max(this.client.tx_discard_percentage,this.client.tx_retry_percentage);health.transmission=this.getHealthDetails({ranges:HEALTH_CONSTANTS.TRANSMISSION,value:txFailPercentage,label:this.formatters.percentage(txFailPercentage)});let highestSeverity=0,overall={};for(let key in health){const severity=health[key];severity.id>=highestSeverity&&(highestSeverity=severity.id,overall=severity)}health.overall=overall,this.health=health,this.txTooltipFields=[{fieldLangKey:"Transmission Discard Percentage",key:"tx_discard_percentage"},{fieldLangKey:"Transmission Retry Percentage",key:"tx_retry_percentage"}].map(entry=>{const value=this.client[entry.key];return Object.assign(entry,this.getHealthDetails({ranges:HEALTH_CONSTANTS.TRANSMISSION,value:value,label:this.formatters.percentage(value)}))})}getHealthDetails({ranges:ranges,value:value,label:label}){let healthResult=HEALTH_RESULTS.LOW;for(let key in ranges){if("function"==typeof ranges[key]){const healthLevel=ranges[key](value,this.ap.radios,this.client);healthResult=HEALTH_RESULTS[healthLevel];break}if(ranges[key]instanceof Array&&null!=value&&value>=ranges[key][0]&&value<ranges[key][1]){healthResult=HEALTH_RESULTS[key];break}}return Object.assign({},healthResult,{value:value,label:label})}fallbackFormatter(text){return text}setGraphOption(graph){this.currentGraph=graph}expand($INJECTABLE$,$timeout){return()=>{$timeout(()=>{this.expanded=!this.expanded,window.dispatchEvent(new Event("resize"))})}}}return(providers,providerLoader)=>(providers.$compile.component("fWifiClientDetails",{controller:WifiClientDetails,templateUrl:__webpack_require__(904),require:{slideController:"?^fSlideContainer"},bindings:{client:"<",view:"<?",fortigate:"<"}}),providerLoader.initModules([__webpack_require__(184),__webpack_require__(186)]))}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},897:function(module,exports){!function($){$.color={},$.color.make=function(r,g,b,a){var o={};return o.r=r||0,o.g=g||0,o.b=b||0,o.a=null!=a?a:1,o.add=function(c,d){for(var i=0;i<c.length;++i)o[c.charAt(i)]+=d;return o.normalize()},o.scale=function(c,f){for(var i=0;i<c.length;++i)o[c.charAt(i)]*=f;return o.normalize()},o.toString=function(){return o.a>=1?"rgb("+[o.r,o.g,o.b].join(",")+")":"rgba("+[o.r,o.g,o.b,o.a].join(",")+")"},o.normalize=function(){function clamp(min,value,max){return value<min?min:value>max?max:value}return o.r=clamp(0,parseInt(o.r),255),o.g=clamp(0,parseInt(o.g),255),o.b=clamp(0,parseInt(o.b),255),o.a=clamp(0,o.a,1),o},o.clone=function(){return $.color.make(o.r,o.b,o.g,o.a)},o.normalize()},$.color.extract=function(elem,css){var c;do{if(""!=(c=elem.css(css).toLowerCase())&&"transparent"!=c)break;elem=elem.parent()}while(elem.length&&!$.nodeName(elem.get(0),"body"));return"rgba(0, 0, 0, 0)"==c&&(c="transparent"),$.color.parse(c)},$.color.parse=function(str){var res,m=$.color.make;if(res=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10));if(res=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(parseInt(res[1],10),parseInt(res[2],10),parseInt(res[3],10),parseFloat(res[4]));if(res=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(str))return m(2.55*parseFloat(res[1]),2.55*parseFloat(res[2]),2.55*parseFloat(res[3]));if(res=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(str))return m(2.55*parseFloat(res[1]),2.55*parseFloat(res[2]),2.55*parseFloat(res[3]),parseFloat(res[4]));if(res=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str))return m(parseInt(res[1],16),parseInt(res[2],16),parseInt(res[3],16));if(res=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str))return m(parseInt(res[1]+res[1],16),parseInt(res[2]+res[2],16),parseInt(res[3]+res[3],16));var name=$.trim(str).toLowerCase();return"transparent"==name?m(255,255,255,0):m((res=lookupColors[name]||[0,0,0])[0],res[1],res[2])};var lookupColors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function($){var hasOwnProperty=Object.prototype.hasOwnProperty;function Canvas(cls,container){var element=container.children("."+cls)[0];if(null==element&&((element=document.createElement("canvas")).className=cls,$(element).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(container),!element.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");element=window.G_vmlCanvasManager.initElement(element)}this.element=element;var context=this.context=element.getContext("2d"),devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1;this.pixelRatio=devicePixelRatio/backingStoreRatio,this.resize(container.width(),container.height()),this.textContainer=null,this.text={},this._textCache={}}function Plot(placeholder,data_,options_,plugins){var series=[],options={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},surface=null,overlay=null,eventHolder=null,ctx=null,octx=null,xaxes=[],yaxes=[],plotOffset={left:0,right:0,top:0,bottom:0},plotWidth=0,plotHeight=0,hooks={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},plot=this;function executeHooks(hook,args){args=[plot].concat(args);for(var i=0;i<hook.length;++i)hook[i].apply(this,args)}function setData(d){series=function(d){for(var res=[],i=0;i<d.length;++i){var s=$.extend(!0,{},options.series);null!=d[i].data?(s.data=d[i].data,delete d[i].data,$.extend(!0,s,d[i]),d[i].data=s.data):s.data=d[i],res.push(s)}return res}(d),function(){var i,neededColors=series.length,maxIndex=-1;for(i=0;i<series.length;++i){var sc=series[i].color;null!=sc&&(neededColors--,"number"==typeof sc&&sc>maxIndex&&(maxIndex=sc))}neededColors<=maxIndex&&(neededColors=maxIndex+1);var c,colors=[],colorPool=options.colors,colorPoolSize=colorPool.length,variation=0;for(i=0;i<neededColors;i++)c=$.color.parse(colorPool[i%colorPoolSize]||"#666"),i%colorPoolSize==0&&i&&(variation=variation>=0?variation<.5?-variation-.2:0:-variation),colors[i]=c.scale("rgb",1+variation);var s,colori=0;for(i=0;i<series.length;++i){if(null==(s=series[i]).color?(s.color=colors[colori].toString(),++colori):"number"==typeof s.color&&(s.color=colors[s.color].toString()),null==s.lines.show){var v,show=!0;for(v in s)if(s[v]&&s[v].show){show=!1;break}show&&(s.lines.show=!0)}null==s.lines.zero&&(s.lines.zero=!!s.lines.fill),s.xaxis=getOrCreateAxis(xaxes,axisNumber(s,"x")),s.yaxis=getOrCreateAxis(yaxes,axisNumber(s,"y"))}}(),function(){var i,j,k,m,s,points,ps,val,f,p,data,format,topSentry=Number.POSITIVE_INFINITY,bottomSentry=Number.NEGATIVE_INFINITY,fakeInfinity=Number.MAX_VALUE;function updateAxis(axis,min,max){min<axis.datamin&&min!=-fakeInfinity&&(axis.datamin=min),max>axis.datamax&&max!=fakeInfinity&&(axis.datamax=max)}for($.each(allAxes(),function(_,axis){axis.datamin=topSentry,axis.datamax=bottomSentry,axis.used=!1}),i=0;i<series.length;++i)(s=series[i]).datapoints={points:[]},executeHooks(hooks.processRawData,[s,s.data,s.datapoints]);for(i=0;i<series.length;++i){if(s=series[i],data=s.data,!(format=s.datapoints.format)){if((format=[]).push({x:!0,number:!0,required:!0}),format.push({y:!0,number:!0,required:!0}),s.bars.show||s.lines.show&&s.lines.fill){var autoscale=!!(s.bars.show&&s.bars.zero||s.lines.show&&s.lines.zero);format.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:autoscale}),s.bars.horizontal&&(delete format[format.length-1].y,format[format.length-1].x=!0)}s.datapoints.format=format}if(null==s.datapoints.pointsize){s.datapoints.pointsize=format.length,ps=s.datapoints.pointsize,points=s.datapoints.points;var insertSteps=s.lines.show&&s.lines.steps;for(s.xaxis.used=s.yaxis.used=!0,j=k=0;j<data.length;++j,k+=ps){var nullify=null==(p=data[j]);if(!nullify)for(m=0;m<ps;++m)val=p[m],(f=format[m])&&(f.number&&null!=val&&(val=+val,isNaN(val)?val=null:val==1/0?val=fakeInfinity:val==-1/0&&(val=-fakeInfinity)),null==val&&(f.required&&(nullify=!0),null!=f.defaultValue&&(val=f.defaultValue))),points[k+m]=val;if(nullify)for(m=0;m<ps;++m)null!=(val=points[k+m])&&!1!==(f=format[m]).autoscale&&(f.x&&updateAxis(s.xaxis,val,val),f.y&&updateAxis(s.yaxis,val,val)),points[k+m]=null;else if(insertSteps&&k>0&&null!=points[k-ps]&&points[k-ps]!=points[k]&&points[k-ps+1]!=points[k+1]){for(m=0;m<ps;++m)points[k+ps+m]=points[k+m];points[k+1]=points[k-ps+1],k+=ps}}}}for(i=0;i<series.length;++i)s=series[i],executeHooks(hooks.processDatapoints,[s,s.datapoints]);for(i=0;i<series.length;++i){s=series[i],points=s.datapoints.points,ps=s.datapoints.pointsize,format=s.datapoints.format;var xmin=topSentry,ymin=topSentry,xmax=bottomSentry,ymax=bottomSentry;for(j=0;j<points.length;j+=ps)if(null!=points[j])for(m=0;m<ps;++m)val=points[j+m],(f=format[m])&&!1!==f.autoscale&&val!=fakeInfinity&&val!=-fakeInfinity&&(f.x&&(val<xmin&&(xmin=val),val>xmax&&(xmax=val)),f.y&&(val<ymin&&(ymin=val),val>ymax&&(ymax=val)));if(s.bars.show){var delta;switch(s.bars.align){case"left":delta=0;break;case"right":delta=-s.bars.barWidth;break;default:delta=-s.bars.barWidth/2}s.bars.horizontal?(ymin+=delta,ymax+=delta+s.bars.barWidth):(xmin+=delta,xmax+=delta+s.bars.barWidth)}updateAxis(s.xaxis,xmin,xmax),updateAxis(s.yaxis,ymin,ymax)}$.each(allAxes(),function(_,axis){axis.datamin==topSentry&&(axis.datamin=null),axis.datamax==bottomSentry&&(axis.datamax=null)})}()}function axisNumber(obj,coord){var a=obj[coord+"axis"];return"object"==typeof a&&(a=a.n),"number"!=typeof a&&(a=1),a}function allAxes(){return $.grep(xaxes.concat(yaxes),function(a){return a})}function canvasToAxisCoords(pos){var i,axis,res={};for(i=0;i<xaxes.length;++i)(axis=xaxes[i])&&axis.used&&(res["x"+axis.n]=axis.c2p(pos.left));for(i=0;i<yaxes.length;++i)(axis=yaxes[i])&&axis.used&&(res["y"+axis.n]=axis.c2p(pos.top));return void 0!==res.x1&&(res.x=res.x1),void 0!==res.y1&&(res.y=res.y1),res}function getOrCreateAxis(axes,number){return axes[number-1]||(axes[number-1]={n:number,direction:axes==xaxes?"x":"y",options:$.extend(!0,{},axes==xaxes?options.xaxis:options.yaxis)}),axes[number-1]}function shutdown(){redrawTimeout&&clearTimeout(redrawTimeout),eventHolder.unbind("mousemove",onMouseMove),eventHolder.unbind("mouseleave",onMouseLeave),eventHolder.unbind("click",onClick),executeHooks(hooks.shutdown,[eventHolder])}function allocateAxisBoxFirstPhase(axis){var lw=axis.labelWidth,lh=axis.labelHeight,pos=axis.options.position,isXAxis="x"===axis.direction,tickLength=axis.options.tickLength,axisMargin=options.grid.axisMargin,padding=options.grid.labelMargin,innermost=!0,outermost=!0,first=!0,found=!1;$.each(isXAxis?xaxes:yaxes,function(i,a){a&&(a.show||a.reserveSpace)&&(a===axis?found=!0:a.options.position===pos&&(found?outermost=!1:innermost=!1),found||(first=!1))}),outermost&&(axisMargin=0),null==tickLength&&(tickLength=first?"full":5),isNaN(+tickLength)||(padding+=+tickLength),isXAxis?(lh+=padding,"bottom"==pos?(plotOffset.bottom+=lh+axisMargin,axis.box={top:surface.height-plotOffset.bottom,height:lh}):(axis.box={top:plotOffset.top+axisMargin,height:lh},plotOffset.top+=lh+axisMargin)):(lw+=padding,"left"==pos?(axis.box={left:plotOffset.left+axisMargin,width:lw},plotOffset.left+=lw+axisMargin):(plotOffset.right+=lw+axisMargin,axis.box={left:surface.width-plotOffset.right,width:lw})),axis.position=pos,axis.tickLength=tickLength,axis.box.padding=padding,axis.innermost=innermost}function setupGrid(){var i,axes=allAxes(),showGrid=options.grid.show;for(var a in plotOffset){var margin=options.grid.margin||0;plotOffset[a]="number"==typeof margin?margin:margin[a]||0}for(var a in executeHooks(hooks.processOffset,[plotOffset]),plotOffset)"object"==typeof options.grid.borderWidth?plotOffset[a]+=showGrid?options.grid.borderWidth[a]:0:plotOffset[a]+=showGrid?options.grid.borderWidth:0;if($.each(axes,function(_,axis){var axisOpts=axis.options;axis.show=null==axisOpts.show?axis.used:axisOpts.show,axis.reserveSpace=null==axisOpts.reserveSpace?axis.show:axisOpts.reserveSpace,function(axis){var opts=axis.options,min=+(null!=opts.min?opts.min:axis.datamin),max=+(null!=opts.max?opts.max:axis.datamax),delta=max-min;if(0==delta){var widen=0==max?1:.01;null==opts.min&&(min-=widen),null!=opts.max&&null==opts.min||(max+=widen)}else{var margin=opts.autoscaleMargin;null!=margin&&(null==opts.min&&(min-=delta*margin)<0&&null!=axis.datamin&&axis.datamin>=0&&(min=0),null==opts.max&&(max+=delta*margin)>0&&null!=axis.datamax&&axis.datamax<=0&&(max=0))}axis.min=min,axis.max=max}(axis)}),showGrid){var allocatedAxes=$.grep(axes,function(axis){return axis.show||axis.reserveSpace});for($.each(allocatedAxes,function(_,axis){!function(axis){var noTicks,opts=axis.options;noTicks="number"==typeof opts.ticks&&opts.ticks>0?opts.ticks:.3*Math.sqrt("x"==axis.direction?surface.width:surface.height);var delta=(axis.max-axis.min)/noTicks,dec=-Math.floor(Math.log(delta)/Math.LN10),maxDec=opts.tickDecimals;null!=maxDec&&dec>maxDec&&(dec=maxDec);var size,magn=Math.pow(10,-dec),norm=delta/magn;norm<1.5?size=1:norm<3?(size=2,norm>2.25&&(null==maxDec||dec+1<=maxDec)&&(size=2.5,++dec)):size=norm<7.5?5:10;size*=magn,null!=opts.minTickSize&&size<opts.minTickSize&&(size=opts.minTickSize);if(axis.delta=delta,axis.tickDecimals=Math.max(0,null!=maxDec?maxDec:dec),axis.tickSize=opts.tickSize||size,"time"==opts.mode&&!axis.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");axis.tickGenerator||(axis.tickGenerator=function(axis){var prev,n,base,ticks=[],start=(n=axis.min,(base=axis.tickSize)*Math.floor(n/base)),i=0,v=Number.NaN;do{prev=v,v=start+i*axis.tickSize,ticks.push(v),++i}while(v<axis.max&&v!=prev);return ticks},axis.tickFormatter=function(value,axis){var factor=axis.tickDecimals?Math.pow(10,axis.tickDecimals):1,formatted=""+Math.round(value*factor)/factor;if(null!=axis.tickDecimals){var decimal=formatted.indexOf("."),precision=-1==decimal?0:formatted.length-decimal-1;if(precision<axis.tickDecimals)return(precision?formatted:formatted+".")+(""+factor).substr(1,axis.tickDecimals-precision)}return formatted});$.isFunction(opts.tickFormatter)&&(axis.tickFormatter=function(v,axis){return""+opts.tickFormatter(v,axis)});if(null!=opts.alignTicksWithAxis){var otherAxis=("x"==axis.direction?xaxes:yaxes)[opts.alignTicksWithAxis-1];if(otherAxis&&otherAxis.used&&otherAxis!=axis){var niceTicks=axis.tickGenerator(axis);if(niceTicks.length>0&&(null==opts.min&&(axis.min=Math.min(axis.min,niceTicks[0])),null==opts.max&&niceTicks.length>1&&(axis.max=Math.max(axis.max,niceTicks[niceTicks.length-1]))),axis.tickGenerator=function(axis){var v,i,ticks=[];for(i=0;i<otherAxis.ticks.length;++i)v=(otherAxis.ticks[i].v-otherAxis.min)/(otherAxis.max-otherAxis.min),v=axis.min+v*(axis.max-axis.min),ticks.push(v);return ticks},!axis.mode&&null==opts.tickDecimals){var extraDec=Math.max(0,1-Math.floor(Math.log(axis.delta)/Math.LN10)),ts=axis.tickGenerator(axis);ts.length>1&&/\..*0$/.test((ts[1]-ts[0]).toFixed(extraDec))||(axis.tickDecimals=extraDec)}}}}(axis),function(axis){var i,v,oticks=axis.options.ticks,ticks=[];null==oticks||"number"==typeof oticks&&oticks>0?ticks=axis.tickGenerator(axis):oticks&&(ticks=$.isFunction(oticks)?oticks(axis):oticks);for(axis.ticks=[],i=0;i<ticks.length;++i){var label=null,t=ticks[i];"object"==typeof t?(v=+t[0],t.length>1&&(label=t[1])):v=+t,null==label&&(label=axis.tickFormatter(v,axis)),isNaN(v)||axis.ticks.push({v:v,label:label})}}(axis),function(axis,ticks){axis.options.autoscaleMargin&&ticks.length>0&&(null==axis.options.min&&(axis.min=Math.min(axis.min,ticks[0].v)),null==axis.options.max&&ticks.length>1&&(axis.max=Math.max(axis.max,ticks[ticks.length-1].v)))}(axis,axis.ticks),function(axis){for(var opts=axis.options,ticks=axis.ticks||[],labelWidth=opts.labelWidth||0,labelHeight=opts.labelHeight||0,maxWidth=labelWidth||("x"==axis.direction?Math.floor(surface.width/(ticks.length||1)):null),legacyStyles=axis.direction+"Axis "+axis.direction+axis.n+"Axis",layer="flot-"+axis.direction+"-axis flot-"+axis.direction+axis.n+"-axis "+legacyStyles,font=opts.font||"flot-tick-label tickLabel",i=0;i<ticks.length;++i){var t=ticks[i];if(t.label){var info=surface.getTextInfo(layer,t.label,font,null,maxWidth);labelWidth=Math.max(labelWidth,info.width),labelHeight=Math.max(labelHeight,info.height)}}axis.labelWidth=opts.labelWidth||labelWidth,axis.labelHeight=opts.labelHeight||labelHeight}(axis)}),i=allocatedAxes.length-1;i>=0;--i)allocateAxisBoxFirstPhase(allocatedAxes[i]);!function(){var i,minMargin=options.grid.minBorderMargin;if(null==minMargin)for(minMargin=0,i=0;i<series.length;++i)minMargin=Math.max(minMargin,2*(series[i].points.radius+series[i].points.lineWidth/2));var margins={left:minMargin,right:minMargin,top:minMargin,bottom:minMargin};$.each(allAxes(),function(_,axis){axis.reserveSpace&&axis.ticks&&axis.ticks.length&&("x"===axis.direction?(margins.left=Math.max(margins.left,axis.labelWidth/2),margins.right=Math.max(margins.right,axis.labelWidth/2)):(margins.bottom=Math.max(margins.bottom,axis.labelHeight/2),margins.top=Math.max(margins.top,axis.labelHeight/2)))}),plotOffset.left=Math.ceil(Math.max(margins.left,plotOffset.left)),plotOffset.right=Math.ceil(Math.max(margins.right,plotOffset.right)),plotOffset.top=Math.ceil(Math.max(margins.top,plotOffset.top)),plotOffset.bottom=Math.ceil(Math.max(margins.bottom,plotOffset.bottom))}(),$.each(allocatedAxes,function(_,axis){!function(axis){"x"==axis.direction?(axis.box.left=plotOffset.left-axis.labelWidth/2,axis.box.width=surface.width-plotOffset.left-plotOffset.right+axis.labelWidth):(axis.box.top=plotOffset.top-axis.labelHeight/2,axis.box.height=surface.height-plotOffset.bottom-plotOffset.top+axis.labelHeight)}(axis)})}plotWidth=surface.width-plotOffset.left-plotOffset.right,plotHeight=surface.height-plotOffset.bottom-plotOffset.top,$.each(axes,function(_,axis){!function(axis){function identity(x){return x}var s,m,t=axis.options.transform||identity,it=axis.options.inverseTransform;"x"==axis.direction?(s=axis.scale=plotWidth/Math.abs(t(axis.max)-t(axis.min)),m=Math.min(t(axis.max),t(axis.min))):(s=-(s=axis.scale=plotHeight/Math.abs(t(axis.max)-t(axis.min))),m=Math.max(t(axis.max),t(axis.min))),axis.p2c=t==identity?function(p){return(p-m)*s}:function(p){return(t(p)-m)*s},axis.c2p=it?function(c){return it(m+c/s)}:function(c){return m+c/s}}(axis)}),showGrid&&$.each(allAxes(),function(_,axis){var tick,x,y,halign,valign,box=axis.box,legacyStyles=axis.direction+"Axis "+axis.direction+axis.n+"Axis",layer="flot-"+axis.direction+"-axis flot-"+axis.direction+axis.n+"-axis "+legacyStyles,font=axis.options.font||"flot-tick-label tickLabel";if(surface.removeText(layer),axis.show&&0!=axis.ticks.length)for(var i=0;i<axis.ticks.length;++i)!(tick=axis.ticks[i]).label||tick.v<axis.min||tick.v>axis.max||("x"==axis.direction?(halign="center",x=plotOffset.left+axis.p2c(tick.v),"bottom"==axis.position?y=box.top+box.padding:(y=box.top+box.height-box.padding,valign="bottom")):(valign="middle",y=plotOffset.top+axis.p2c(tick.v),"left"==axis.position?(x=box.left+box.width-box.padding,halign="right"):x=box.left+box.padding),surface.addText(layer,x,y,tick.label,font,null,null,halign,valign))}),function(){null!=options.legend.container?$(options.legend.container).html(""):placeholder.find(".legend").remove();if(!options.legend.show)return;for(var s,label,fragments=[],entries=[],rowStarted=!1,lf=options.legend.labelFormatter,i=0;i<series.length;++i)(s=series[i]).label&&(label=lf?lf(s.label,s):s.label)&&entries.push({label:label,color:s.color});if(options.legend.sorted)if($.isFunction(options.legend.sorted))entries.sort(options.legend.sorted);else if("reverse"==options.legend.sorted)entries.reverse();else{var ascending="descending"!=options.legend.sorted;entries.sort(function(a,b){return a.label==b.label?0:a.label<b.label!=ascending?1:-1})}for(var i=0;i<entries.length;++i){var entry=entries[i];i%options.legend.noColumns==0&&(rowStarted&&fragments.push("</tr>"),fragments.push("<tr>"),rowStarted=!0),fragments.push('<td class="legendColorBox"><div style="border:1px solid '+options.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+entry.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+entry.label+"</td>")}rowStarted&&fragments.push("</tr>");if(0==fragments.length)return;var table='<table style="font-size:smaller;color:'+options.grid.color+'">'+fragments.join("")+"</table>";if(null!=options.legend.container)$(options.legend.container).html(table);else{var pos="",p=options.legend.position,m=options.legend.margin;null==m[0]&&(m=[m,m]),"n"==p.charAt(0)?pos+="top:"+(m[1]+plotOffset.top)+"px;":"s"==p.charAt(0)&&(pos+="bottom:"+(m[1]+plotOffset.bottom)+"px;"),"e"==p.charAt(1)?pos+="right:"+(m[0]+plotOffset.right)+"px;":"w"==p.charAt(1)&&(pos+="left:"+(m[0]+plotOffset.left)+"px;");var legend=$('<div class="legend">'+table.replace('style="','style="position:absolute;'+pos+";")+"</div>").appendTo(placeholder);if(0!=options.legend.backgroundOpacity){var c=options.legend.backgroundColor;null==c&&((c=(c=options.grid.backgroundColor)&&"string"==typeof c?$.color.parse(c):$.color.extract(legend,"background-color")).a=1,c=c.toString());var div=legend.children();$('<div style="position:absolute;width:'+div.width()+"px;height:"+div.height()+"px;"+pos+"background-color:"+c+';"> </div>').prependTo(legend).css("opacity",options.legend.backgroundOpacity)}}}()}function draw(){surface.clear(),executeHooks(hooks.drawBackground,[ctx]);var grid=options.grid;grid.show&&grid.backgroundColor&&(ctx.save(),ctx.translate(plotOffset.left,plotOffset.top),ctx.fillStyle=getColorOrGradient(options.grid.backgroundColor,plotHeight,0,"rgba(255, 255, 255, 0)"),ctx.fillRect(0,0,plotWidth,plotHeight),ctx.restore()),grid.show&&!grid.aboveData&&drawGrid();for(var i=0;i<series.length;++i)executeHooks(hooks.drawSeries,[ctx,series[i]]),drawSeries(series[i]);executeHooks(hooks.draw,[ctx]),grid.show&&grid.aboveData&&drawGrid(),surface.render(),triggerRedrawOverlay()}function extractRange(ranges,coord){for(var axis,from,to,key,axes=allAxes(),i=0;i<axes.length;++i)if((axis=axes[i]).direction==coord&&(ranges[key=coord+axis.n+"axis"]||1!=axis.n||(key=coord+"axis"),ranges[key])){from=ranges[key].from,to=ranges[key].to;break}if(ranges[key]||(axis="x"==coord?xaxes[0]:yaxes[0],from=ranges[coord+"1"],to=ranges[coord+"2"]),null!=from&&null!=to&&from>to){var tmp=from;from=to,to=tmp}return{from:from,to:to,axis:axis}}function drawGrid(){var i,axes,bw,bc;ctx.save(),ctx.translate(plotOffset.left,plotOffset.top);var markings=options.grid.markings;if(markings)for($.isFunction(markings)&&((axes=plot.getAxes()).xmin=axes.xaxis.min,axes.xmax=axes.xaxis.max,axes.ymin=axes.yaxis.min,axes.ymax=axes.yaxis.max,markings=markings(axes)),i=0;i<markings.length;++i){var m=markings[i],xrange=extractRange(m,"x"),yrange=extractRange(m,"y");if(null==xrange.from&&(xrange.from=xrange.axis.min),null==xrange.to&&(xrange.to=xrange.axis.max),null==yrange.from&&(yrange.from=yrange.axis.min),null==yrange.to&&(yrange.to=yrange.axis.max),!(xrange.to<xrange.axis.min||xrange.from>xrange.axis.max||yrange.to<yrange.axis.min||yrange.from>yrange.axis.max)){xrange.from=Math.max(xrange.from,xrange.axis.min),xrange.to=Math.min(xrange.to,xrange.axis.max),yrange.from=Math.max(yrange.from,yrange.axis.min),yrange.to=Math.min(yrange.to,yrange.axis.max);var xequal=xrange.from===xrange.to,yequal=yrange.from===yrange.to;if(!xequal||!yequal)if(xrange.from=Math.floor(xrange.axis.p2c(xrange.from)),xrange.to=Math.floor(xrange.axis.p2c(xrange.to)),yrange.from=Math.floor(yrange.axis.p2c(yrange.from)),yrange.to=Math.floor(yrange.axis.p2c(yrange.to)),xequal||yequal){var lineWidth=m.lineWidth||options.grid.markingsLineWidth,subPixel=lineWidth%2?.5:0;ctx.beginPath(),ctx.strokeStyle=m.color||options.grid.markingsColor,ctx.lineWidth=lineWidth,xequal?(ctx.moveTo(xrange.to+subPixel,yrange.from),ctx.lineTo(xrange.to+subPixel,yrange.to)):(ctx.moveTo(xrange.from,yrange.to+subPixel),ctx.lineTo(xrange.to,yrange.to+subPixel)),ctx.stroke()}else ctx.fillStyle=m.color||options.grid.markingsColor,ctx.fillRect(xrange.from,yrange.to,xrange.to-xrange.from,yrange.from-yrange.to)}}axes=allAxes(),bw=options.grid.borderWidth;for(var j=0;j<axes.length;++j){var x,y,xoff,yoff,axis=axes[j],box=axis.box,t=axis.tickLength;if(axis.show&&0!=axis.ticks.length){for(ctx.lineWidth=1,"x"==axis.direction?(x=0,y="full"==t?"top"==axis.position?0:plotHeight:box.top-plotOffset.top+("top"==axis.position?box.height:0)):(y=0,x="full"==t?"left"==axis.position?0:plotWidth:box.left-plotOffset.left+("left"==axis.position?box.width:0)),axis.innermost||(ctx.strokeStyle=axis.options.color,ctx.beginPath(),xoff=yoff=0,"x"==axis.direction?xoff=plotWidth+1:yoff=plotHeight+1,1==ctx.lineWidth&&("x"==axis.direction?y=Math.floor(y)+.5:x=Math.floor(x)+.5),ctx.moveTo(x,y),ctx.lineTo(x+xoff,y+yoff),ctx.stroke()),ctx.strokeStyle=axis.options.tickColor,ctx.beginPath(),i=0;i<axis.ticks.length;++i){var v=axis.ticks[i].v;xoff=yoff=0,isNaN(v)||v<axis.min||v>axis.max||"full"==t&&("object"==typeof bw&&bw[axis.position]>0||bw>0)&&(v==axis.min||v==axis.max)||("x"==axis.direction?(x=axis.p2c(v),yoff="full"==t?-plotHeight:t,"top"==axis.position&&(yoff=-yoff)):(y=axis.p2c(v),xoff="full"==t?-plotWidth:t,"left"==axis.position&&(xoff=-xoff)),1==ctx.lineWidth&&("x"==axis.direction?x=Math.floor(x)+.5:y=Math.floor(y)+.5),ctx.moveTo(x,y),ctx.lineTo(x+xoff,y+yoff))}ctx.stroke()}}bw&&(bc=options.grid.borderColor,"object"==typeof bw||"object"==typeof bc?("object"!=typeof bw&&(bw={top:bw,right:bw,bottom:bw,left:bw}),"object"!=typeof bc&&(bc={top:bc,right:bc,bottom:bc,left:bc}),bw.top>0&&(ctx.strokeStyle=bc.top,ctx.lineWidth=bw.top,ctx.beginPath(),ctx.moveTo(0-bw.left,0-bw.top/2),ctx.lineTo(plotWidth,0-bw.top/2),ctx.stroke()),bw.right>0&&(ctx.strokeStyle=bc.right,ctx.lineWidth=bw.right,ctx.beginPath(),ctx.moveTo(plotWidth+bw.right/2,0-bw.top),ctx.lineTo(plotWidth+bw.right/2,plotHeight),ctx.stroke()),bw.bottom>0&&(ctx.strokeStyle=bc.bottom,ctx.lineWidth=bw.bottom,ctx.beginPath(),ctx.moveTo(plotWidth+bw.right,plotHeight+bw.bottom/2),ctx.lineTo(0,plotHeight+bw.bottom/2),ctx.stroke()),bw.left>0&&(ctx.strokeStyle=bc.left,ctx.lineWidth=bw.left,ctx.beginPath(),ctx.moveTo(0-bw.left/2,plotHeight+bw.bottom),ctx.lineTo(0-bw.left/2,0),ctx.stroke())):(ctx.lineWidth=bw,ctx.strokeStyle=options.grid.borderColor,ctx.strokeRect(-bw/2,-bw/2,plotWidth+bw,plotHeight+bw))),ctx.restore()}function drawSeries(series){series.lines.show&&function(series){function plotLine(datapoints,xoffset,yoffset,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize,prevx=null,prevy=null;ctx.beginPath();for(var i=ps;i<points.length;i+=ps){var x1=points[i-ps],y1=points[i-ps+1],x2=points[i],y2=points[i+1];if(null!=x1&&null!=x2){if(y1<=y2&&y1<axisy.min){if(y2<axisy.min)continue;x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1,y1=axisy.min}else if(y2<=y1&&y2<axisy.min){if(y1<axisy.min)continue;x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1,y2=axisy.min}if(y1>=y2&&y1>axisy.max){if(y2>axisy.max)continue;x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1,y1=axisy.max}else if(y2>=y1&&y2>axisy.max){if(y1>axisy.max)continue;x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1,y2=axisy.max}if(x1<=x2&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1,x1=axisx.min}else if(x2<=x1&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1,x2=axisx.min}if(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1,x1=axisx.max}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1,x2=axisx.max}x1==prevx&&y1==prevy||ctx.moveTo(axisx.p2c(x1)+xoffset,axisy.p2c(y1)+yoffset),prevx=x2,prevy=y2,ctx.lineTo(axisx.p2c(x2)+xoffset,axisy.p2c(y2)+yoffset)}}ctx.stroke()}ctx.save(),ctx.translate(plotOffset.left,plotOffset.top),ctx.lineJoin="round";var lw=series.lines.lineWidth,sw=series.shadowSize;if(lw>0&&sw>0){ctx.lineWidth=sw,ctx.strokeStyle="rgba(0,0,0,0.1)";var angle=Math.PI/18;plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/2),Math.cos(angle)*(lw/2+sw/2),series.xaxis,series.yaxis),ctx.lineWidth=sw/2,plotLine(series.datapoints,Math.sin(angle)*(lw/2+sw/4),Math.cos(angle)*(lw/2+sw/4),series.xaxis,series.yaxis)}ctx.lineWidth=lw,ctx.strokeStyle=series.color;var fillStyle=getFillStyle(series.lines,series.color,0,plotHeight);fillStyle&&(ctx.fillStyle=fillStyle,function(datapoints,axisx,axisy){var points=datapoints.points,ps=datapoints.pointsize,bottom=Math.min(Math.max(0,axisy.min),axisy.max),i=0,areaOpen=!1,ypos=1,segmentStart=0,segmentEnd=0;for(;!(ps>0&&i>points.length+ps);){var x1=points[(i+=ps)-ps],y1=points[i-ps+ypos],x2=points[i],y2=points[i+ypos];if(areaOpen){if(ps>0&&null!=x1&&null==x2){segmentEnd=i,ps=-ps,ypos=2;continue}if(ps<0&&i==segmentStart+ps){ctx.fill(),areaOpen=!1,ypos=1,i=segmentStart=segmentEnd+(ps=-ps);continue}}if(null!=x1&&null!=x2){if(x1<=x2&&x1<axisx.min){if(x2<axisx.min)continue;y1=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1,x1=axisx.min}else if(x2<=x1&&x2<axisx.min){if(x1<axisx.min)continue;y2=(axisx.min-x1)/(x2-x1)*(y2-y1)+y1,x2=axisx.min}if(x1>=x2&&x1>axisx.max){if(x2>axisx.max)continue;y1=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1,x1=axisx.max}else if(x2>=x1&&x2>axisx.max){if(x1>axisx.max)continue;y2=(axisx.max-x1)/(x2-x1)*(y2-y1)+y1,x2=axisx.max}if(areaOpen||(ctx.beginPath(),ctx.moveTo(axisx.p2c(x1),axisy.p2c(bottom)),areaOpen=!0),y1>=axisy.max&&y2>=axisy.max)ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.max)),ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.max));else if(y1<=axisy.min&&y2<=axisy.min)ctx.lineTo(axisx.p2c(x1),axisy.p2c(axisy.min)),ctx.lineTo(axisx.p2c(x2),axisy.p2c(axisy.min));else{var x1old=x1,x2old=x2;y1<=y2&&y1<axisy.min&&y2>=axisy.min?(x1=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1,y1=axisy.min):y2<=y1&&y2<axisy.min&&y1>=axisy.min&&(x2=(axisy.min-y1)/(y2-y1)*(x2-x1)+x1,y2=axisy.min),y1>=y2&&y1>axisy.max&&y2<=axisy.max?(x1=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1,y1=axisy.max):y2>=y1&&y2>axisy.max&&y1<=axisy.max&&(x2=(axisy.max-y1)/(y2-y1)*(x2-x1)+x1,y2=axisy.max),x1!=x1old&&ctx.lineTo(axisx.p2c(x1old),axisy.p2c(y1)),ctx.lineTo(axisx.p2c(x1),axisy.p2c(y1)),ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2)),x2!=x2old&&(ctx.lineTo(axisx.p2c(x2),axisy.p2c(y2)),ctx.lineTo(axisx.p2c(x2old),axisy.p2c(y2)))}}}}(series.datapoints,series.xaxis,series.yaxis));lw>0&&plotLine(series.datapoints,0,0,series.xaxis,series.yaxis);ctx.restore()}(series),series.bars.show&&function(series){var barLeft;switch(ctx.save(),ctx.translate(plotOffset.left,plotOffset.top),ctx.lineWidth=series.bars.lineWidth,ctx.strokeStyle=series.color,series.bars.align){case"left":barLeft=0;break;case"right":barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2}var fillStyleCallback=series.bars.fill?function(bottom,top){return getFillStyle(series.bars,series.color,bottom,top)}:null;(function(datapoints,barLeft,barRight,fillStyleCallback,axisx,axisy){for(var points=datapoints.points,ps=datapoints.pointsize,i=0;i<points.length;i+=ps)null!=points[i]&&drawBar(points[i],points[i+1],points[i+2],barLeft,barRight,fillStyleCallback,axisx,axisy,ctx,series.bars.horizontal,series.bars.lineWidth)})(series.datapoints,barLeft,barLeft+series.bars.barWidth,fillStyleCallback,series.xaxis,series.yaxis),ctx.restore()}(series),series.points.show&&function(series){function plotPoints(datapoints,radius,fillStyle,offset,shadow,axisx,axisy,symbol){for(var points=datapoints.points,ps=datapoints.pointsize,i=0;i<points.length;i+=ps){var x=points[i],y=points[i+1];null==x||x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max||(ctx.beginPath(),x=axisx.p2c(x),y=axisy.p2c(y)+offset,"circle"==symbol?ctx.arc(x,y,radius,0,shadow?Math.PI:2*Math.PI,!1):symbol(ctx,x,y,radius,shadow),ctx.closePath(),fillStyle&&(ctx.fillStyle=fillStyle,ctx.fill()),ctx.stroke())}}ctx.save(),ctx.translate(plotOffset.left,plotOffset.top);var lw=series.points.lineWidth,sw=series.shadowSize,radius=series.points.radius,symbol=series.points.symbol;0==lw&&(lw=1e-4);if(lw>0&&sw>0){var w=sw/2;ctx.lineWidth=w,ctx.strokeStyle="rgba(0,0,0,0.1)",plotPoints(series.datapoints,radius,null,w+w/2,!0,series.xaxis,series.yaxis,symbol),ctx.strokeStyle="rgba(0,0,0,0.2)",plotPoints(series.datapoints,radius,null,w/2,!0,series.xaxis,series.yaxis,symbol)}ctx.lineWidth=lw,ctx.strokeStyle=series.color,plotPoints(series.datapoints,radius,getFillStyle(series.points,series.color),0,!1,series.xaxis,series.yaxis,symbol),ctx.restore()}(series)}function drawBar(x,y,b,barLeft,barRight,fillStyleCallback,axisx,axisy,c,horizontal,lineWidth){var left,right,bottom,top,drawLeft,drawRight,drawTop,drawBottom,tmp;horizontal?(drawBottom=drawRight=drawTop=!0,drawLeft=!1,top=y+barLeft,bottom=y+barRight,(right=x)<(left=b)&&(tmp=right,right=left,left=tmp,drawLeft=!0,drawRight=!1)):(drawLeft=drawRight=drawTop=!0,drawBottom=!1,left=x+barLeft,right=x+barRight,(top=y)<(bottom=b)&&(tmp=top,top=bottom,bottom=tmp,drawBottom=!0,drawTop=!1)),right<axisx.min||left>axisx.max||top<axisy.min||bottom>axisy.max||(left<axisx.min&&(left=axisx.min,drawLeft=!1),right>axisx.max&&(right=axisx.max,drawRight=!1),bottom<axisy.min&&(bottom=axisy.min,drawBottom=!1),top>axisy.max&&(top=axisy.max,drawTop=!1),left=axisx.p2c(left),bottom=axisy.p2c(bottom),right=axisx.p2c(right),top=axisy.p2c(top),fillStyleCallback&&(c.fillStyle=fillStyleCallback(bottom,top),c.fillRect(left,top,right-left,bottom-top)),lineWidth>0&&(drawLeft||drawRight||drawTop||drawBottom)&&(c.beginPath(),c.moveTo(left,bottom),drawLeft?c.lineTo(left,top):c.moveTo(left,top),drawTop?c.lineTo(right,top):c.moveTo(right,top),drawRight?c.lineTo(right,bottom):c.moveTo(right,bottom),drawBottom?c.lineTo(left,bottom):c.moveTo(left,bottom),c.stroke()))}function getFillStyle(filloptions,seriesColor,bottom,top){var fill=filloptions.fill;if(!fill)return null;if(filloptions.fillColor)return getColorOrGradient(filloptions.fillColor,bottom,top,seriesColor);var c=$.color.parse(seriesColor);return c.a="number"==typeof fill?fill:.4,c.normalize(),c.toString()}plot.setData=setData,plot.setupGrid=setupGrid,plot.draw=draw,plot.getPlaceholder=function(){return placeholder},plot.getCanvas=function(){return surface.element},plot.getPlotOffset=function(){return plotOffset},plot.width=function(){return plotWidth},plot.height=function(){return plotHeight},plot.offset=function(){var o=eventHolder.offset();return o.left+=plotOffset.left,o.top+=plotOffset.top,o},plot.getData=function(){return series},plot.getAxes=function(){var res={};return $.each(xaxes.concat(yaxes),function(_,axis){axis&&(res[axis.direction+(1!=axis.n?axis.n:"")+"axis"]=axis)}),res},plot.getXAxes=function(){return xaxes},plot.getYAxes=function(){return yaxes},plot.c2p=canvasToAxisCoords,plot.p2c=function(pos){var i,axis,key,res={};for(i=0;i<xaxes.length;++i)if((axis=xaxes[i])&&axis.used&&(key="x"+axis.n,null==pos[key]&&1==axis.n&&(key="x"),null!=pos[key])){res.left=axis.p2c(pos[key]);break}for(i=0;i<yaxes.length;++i)if((axis=yaxes[i])&&axis.used&&(key="y"+axis.n,null==pos[key]&&1==axis.n&&(key="y"),null!=pos[key])){res.top=axis.p2c(pos[key]);break}return res},plot.getOptions=function(){return options},plot.highlight=highlight,plot.unhighlight=unhighlight,plot.triggerRedrawOverlay=triggerRedrawOverlay,plot.pointOffset=function(point){return{left:parseInt(xaxes[axisNumber(point,"x")-1].p2c(+point.x)+plotOffset.left,10),top:parseInt(yaxes[axisNumber(point,"y")-1].p2c(+point.y)+plotOffset.top,10)}},plot.shutdown=shutdown,plot.destroy=function(){shutdown(),placeholder.removeData("plot").empty(),series=[],options=null,surface=null,overlay=null,eventHolder=null,ctx=null,octx=null,xaxes=[],yaxes=[],hooks=null,highlights=[],plot=null},plot.resize=function(){var width=placeholder.width(),height=placeholder.height();surface.resize(width,height),overlay.resize(width,height)},plot.hooks=hooks,function(){for(var classes={Canvas:Canvas},i=0;i<plugins.length;++i){var p=plugins[i];p.init(plot,classes),p.options&&$.extend(!0,options,p.options)}}(),function(opts){$.extend(!0,options,opts),opts&&opts.colors&&(options.colors=opts.colors);null==options.xaxis.color&&(options.xaxis.color=$.color.parse(options.grid.color).scale("a",.22).toString());null==options.yaxis.color&&(options.yaxis.color=$.color.parse(options.grid.color).scale("a",.22).toString());null==options.xaxis.tickColor&&(options.xaxis.tickColor=options.grid.tickColor||options.xaxis.color);null==options.yaxis.tickColor&&(options.yaxis.tickColor=options.grid.tickColor||options.yaxis.color);null==options.grid.borderColor&&(options.grid.borderColor=options.grid.color);null==options.grid.tickColor&&(options.grid.tickColor=$.color.parse(options.grid.color).scale("a",.22).toString());var i,axisOptions,axisCount,fontSize=placeholder.css("font-size"),fontSizeDefault=fontSize?+fontSize.replace("px",""):13,fontDefaults={style:placeholder.css("font-style"),size:Math.round(.8*fontSizeDefault),variant:placeholder.css("font-variant"),weight:placeholder.css("font-weight"),family:placeholder.css("font-family")};for(axisCount=options.xaxes.length||1,i=0;i<axisCount;++i)(axisOptions=options.xaxes[i])&&!axisOptions.tickColor&&(axisOptions.tickColor=axisOptions.color),axisOptions=$.extend(!0,{},options.xaxis,axisOptions),options.xaxes[i]=axisOptions,axisOptions.font&&(axisOptions.font=$.extend({},fontDefaults,axisOptions.font),axisOptions.font.color||(axisOptions.font.color=axisOptions.color),axisOptions.font.lineHeight||(axisOptions.font.lineHeight=Math.round(1.15*axisOptions.font.size)));for(axisCount=options.yaxes.length||1,i=0;i<axisCount;++i)(axisOptions=options.yaxes[i])&&!axisOptions.tickColor&&(axisOptions.tickColor=axisOptions.color),axisOptions=$.extend(!0,{},options.yaxis,axisOptions),options.yaxes[i]=axisOptions,axisOptions.font&&(axisOptions.font=$.extend({},fontDefaults,axisOptions.font),axisOptions.font.color||(axisOptions.font.color=axisOptions.color),axisOptions.font.lineHeight||(axisOptions.font.lineHeight=Math.round(1.15*axisOptions.font.size)));options.xaxis.noTicks&&null==options.xaxis.ticks&&(options.xaxis.ticks=options.xaxis.noTicks);options.yaxis.noTicks&&null==options.yaxis.ticks&&(options.yaxis.ticks=options.yaxis.noTicks);options.x2axis&&(options.xaxes[1]=$.extend(!0,{},options.xaxis,options.x2axis),options.xaxes[1].position="top",null==options.x2axis.min&&(options.xaxes[1].min=null),null==options.x2axis.max&&(options.xaxes[1].max=null));options.y2axis&&(options.yaxes[1]=$.extend(!0,{},options.yaxis,options.y2axis),options.yaxes[1].position="right",null==options.y2axis.min&&(options.yaxes[1].min=null),null==options.y2axis.max&&(options.yaxes[1].max=null));options.grid.coloredAreas&&(options.grid.markings=options.grid.coloredAreas);options.grid.coloredAreasColor&&(options.grid.markingsColor=options.grid.coloredAreasColor);options.lines&&$.extend(!0,options.series.lines,options.lines);options.points&&$.extend(!0,options.series.points,options.points);options.bars&&$.extend(!0,options.series.bars,options.bars);null!=options.shadowSize&&(options.series.shadowSize=options.shadowSize);null!=options.highlightColor&&(options.series.highlightColor=options.highlightColor);for(i=0;i<options.xaxes.length;++i)getOrCreateAxis(xaxes,i+1).options=options.xaxes[i];for(i=0;i<options.yaxes.length;++i)getOrCreateAxis(yaxes,i+1).options=options.yaxes[i];for(var n in hooks)options.hooks[n]&&options.hooks[n].length&&(hooks[n]=hooks[n].concat(options.hooks[n]));executeHooks(hooks.processOptions,[options])}(options_),function(){placeholder.css("padding",0).children().filter(function(){return!$(this).hasClass("flot-overlay")&&!$(this).hasClass("flot-base")}).remove(),"static"==placeholder.css("position")&&placeholder.css("position","relative");surface=new Canvas("flot-base",placeholder),overlay=new Canvas("flot-overlay",placeholder),ctx=surface.context,octx=overlay.context,eventHolder=$(overlay.element).unbind();var existing=placeholder.data("plot");existing&&(existing.shutdown(),overlay.clear());placeholder.data("plot",plot)}(),setData(data_),setupGrid(),draw(),function(){options.grid.hoverable&&(eventHolder.mousemove(onMouseMove),eventHolder.bind("mouseleave",onMouseLeave));options.grid.clickable&&eventHolder.click(onClick);executeHooks(hooks.bindEvents,[eventHolder])}();var highlights=[],redrawTimeout=null;function onMouseMove(e){options.grid.hoverable&&triggerClickHoverEvent("plothover",e,function(s){return 0!=s.hoverable})}function onMouseLeave(e){options.grid.hoverable&&triggerClickHoverEvent("plothover",e,function(s){return!1})}function onClick(e){triggerClickHoverEvent("plotclick",e,function(s){return 0!=s.clickable})}function triggerClickHoverEvent(eventname,event,seriesFilter){var offset=eventHolder.offset(),canvasX=event.pageX-offset.left-plotOffset.left,canvasY=event.pageY-offset.top-plotOffset.top,pos=canvasToAxisCoords({left:canvasX,top:canvasY});pos.pageX=event.pageX,pos.pageY=event.pageY;var item=function(mouseX,mouseY,seriesFilter){var i,j,ps,maxDistance=options.grid.mouseActiveRadius,smallestDistance=maxDistance*maxDistance+1,item=null;for(i=series.length-1;i>=0;--i)if(seriesFilter(series[i])){var s=series[i],axisx=s.xaxis,axisy=s.yaxis,points=s.datapoints.points,mx=axisx.c2p(mouseX),my=axisy.c2p(mouseY),maxx=maxDistance/axisx.scale,maxy=maxDistance/axisy.scale;if(ps=s.datapoints.pointsize,axisx.options.inverseTransform&&(maxx=Number.MAX_VALUE),axisy.options.inverseTransform&&(maxy=Number.MAX_VALUE),s.lines.show||s.points.show)for(j=0;j<points.length;j+=ps){var x=points[j],y=points[j+1];if(null!=x&&!(x-mx>maxx||x-mx<-maxx||y-my>maxy||y-my<-maxy)){var dx=Math.abs(axisx.p2c(x)-mouseX),dy=Math.abs(axisy.p2c(y)-mouseY),dist=dx*dx+dy*dy;dist<smallestDistance&&(smallestDistance=dist,item=[i,j/ps])}}if(s.bars.show&&!item){var barLeft,barRight;switch(s.bars.align){case"left":barLeft=0;break;case"right":barLeft=-s.bars.barWidth;break;default:barLeft=-s.bars.barWidth/2}for(barRight=barLeft+s.bars.barWidth,j=0;j<points.length;j+=ps){x=points[j],y=points[j+1];var b=points[j+2];null!=x&&(series[i].bars.horizontal?mx<=Math.max(b,x)&&mx>=Math.min(b,x)&&my>=y+barLeft&&my<=y+barRight:mx>=x+barLeft&&mx<=x+barRight&&my>=Math.min(b,y)&&my<=Math.max(b,y))&&(item=[i,j/ps])}}}return item?(i=item[0],j=item[1],ps=series[i].datapoints.pointsize,{datapoint:series[i].datapoints.points.slice(j*ps,(j+1)*ps),dataIndex:j,series:series[i],seriesIndex:i}):null}(canvasX,canvasY,seriesFilter);if(item&&(item.pageX=parseInt(item.series.xaxis.p2c(item.datapoint[0])+offset.left+plotOffset.left,10),item.pageY=parseInt(item.series.yaxis.p2c(item.datapoint[1])+offset.top+plotOffset.top,10)),options.grid.autoHighlight){for(var i=0;i<highlights.length;++i){var h=highlights[i];h.auto!=eventname||item&&h.series==item.series&&h.point[0]==item.datapoint[0]&&h.point[1]==item.datapoint[1]||unhighlight(h.series,h.point)}item&&highlight(item.series,item.datapoint,eventname)}placeholder.trigger(eventname,[pos,item])}function triggerRedrawOverlay(){var t=options.interaction.redrawOverlayInterval;-1!=t?redrawTimeout||(redrawTimeout=setTimeout(drawOverlay,t)):drawOverlay()}function drawOverlay(){var i,hi;for(redrawTimeout=null,octx.save(),overlay.clear(),octx.translate(plotOffset.left,plotOffset.top),i=0;i<highlights.length;++i)(hi=highlights[i]).series.bars.show?drawBarHighlight(hi.series,hi.point):drawPointHighlight(hi.series,hi.point);octx.restore(),executeHooks(hooks.drawOverlay,[octx])}function highlight(s,point,auto){if("number"==typeof s&&(s=series[s]),"number"==typeof point){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1))}var i=indexOfHighlight(s,point);-1==i?(highlights.push({series:s,point:point,auto:auto}),triggerRedrawOverlay()):auto||(highlights[i].auto=!1)}function unhighlight(s,point){if(null==s&&null==point)return highlights=[],void triggerRedrawOverlay();if("number"==typeof s&&(s=series[s]),"number"==typeof point){var ps=s.datapoints.pointsize;point=s.datapoints.points.slice(ps*point,ps*(point+1))}var i=indexOfHighlight(s,point);-1!=i&&(highlights.splice(i,1),triggerRedrawOverlay())}function indexOfHighlight(s,p){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.series==s&&h.point[0]==p[0]&&h.point[1]==p[1])return i}return-1}function drawPointHighlight(series,point){var x=point[0],y=point[1],axisx=series.xaxis,axisy=series.yaxis,highlightColor="string"==typeof series.highlightColor?series.highlightColor:$.color.parse(series.color).scale("a",.5).toString();if(!(x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max)){var pointRadius=series.points.radius+series.points.lineWidth/2;octx.lineWidth=pointRadius,octx.strokeStyle=highlightColor;var radius=1.5*pointRadius;x=axisx.p2c(x),y=axisy.p2c(y),octx.beginPath(),"circle"==series.points.symbol?octx.arc(x,y,radius,0,2*Math.PI,!1):series.points.symbol(octx,x,y,radius,!1),octx.closePath(),octx.stroke()}}function drawBarHighlight(series,point){var barLeft,highlightColor="string"==typeof series.highlightColor?series.highlightColor:$.color.parse(series.color).scale("a",.5).toString(),fillStyle=highlightColor;switch(series.bars.align){case"left":barLeft=0;break;case"right":barLeft=-series.bars.barWidth;break;default:barLeft=-series.bars.barWidth/2}octx.lineWidth=series.bars.lineWidth,octx.strokeStyle=highlightColor,drawBar(point[0],point[1],point[2]||0,barLeft,barLeft+series.bars.barWidth,function(){return fillStyle},series.xaxis,series.yaxis,octx,series.bars.horizontal,series.bars.lineWidth)}function getColorOrGradient(spec,bottom,top,defaultColor){if("string"==typeof spec)return spec;for(var gradient=ctx.createLinearGradient(0,top,0,bottom),i=0,l=spec.colors.length;i<l;++i){var c=spec.colors[i];if("string"!=typeof c){var co=$.color.parse(defaultColor);null!=c.brightness&&(co=co.scale("rgb",c.brightness)),null!=c.opacity&&(co.a*=c.opacity),c=co.toString()}gradient.addColorStop(i/(l-1),c)}return gradient}}$.fn.detach||($.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),Canvas.prototype.resize=function(width,height){if(width<=0||height<=0)throw new Error("Invalid dimensions for plot, width = "+width+", height = "+height);var element=this.element,context=this.context,pixelRatio=this.pixelRatio;this.width!=width&&(element.width=width*pixelRatio,element.style.width=width+"px",this.width=width),this.height!=height&&(element.height=height*pixelRatio,element.style.height=height+"px",this.height=height),context.restore(),context.save(),context.scale(pixelRatio,pixelRatio)},Canvas.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},Canvas.prototype.render=function(){var cache=this._textCache;for(var layerKey in cache)if(hasOwnProperty.call(cache,layerKey)){var layer=this.getTextLayer(layerKey),layerCache=cache[layerKey];for(var styleKey in layer.hide(),layerCache)if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache)if(hasOwnProperty.call(styleCache,key)){for(var position,positions=styleCache[key].positions,i=0;position=positions[i];i++)position.active?position.rendered||(layer.append(position.element),position.rendered=!0):(positions.splice(i--,1),position.rendered&&position.element.detach());0==positions.length&&delete styleCache[key]}}layer.show()}},Canvas.prototype.getTextLayer=function(classes){var layer=this.text[classes];return null==layer&&(null==this.textContainer&&(this.textContainer=$("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),layer=this.text[classes]=$("<div></div>").addClass(classes).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),layer},Canvas.prototype.getTextInfo=function(layer,text,font,angle,width){var textStyle,layerCache,styleCache,info;if(text=""+text,textStyle="object"==typeof font?font.style+" "+font.variant+" "+font.weight+" "+font.size+"px/"+font.lineHeight+"px "+font.family:font,null==(layerCache=this._textCache[layer])&&(layerCache=this._textCache[layer]={}),null==(styleCache=layerCache[textStyle])&&(styleCache=layerCache[textStyle]={}),null==(info=styleCache[text])){var element=$("<div></div>").html(text).css({position:"absolute","max-width":width,top:-9999}).appendTo(this.getTextLayer(layer));"object"==typeof font?element.css({font:textStyle,color:font.color}):"string"==typeof font&&element.addClass(font),info=styleCache[text]={width:element.outerWidth(!0),height:element.outerHeight(!0),element:element,positions:[]},element.detach()}return info},Canvas.prototype.addText=function(layer,x,y,text,font,angle,width,halign,valign){var info=this.getTextInfo(layer,text,font,angle,width),positions=info.positions;"center"==halign?x-=info.width/2:"right"==halign&&(x-=info.width),"middle"==valign?y-=info.height/2:"bottom"==valign&&(y-=info.height);for(var position,i=0;position=positions[i];i++)if(position.x==x&&position.y==y)return void(position.active=!0);position={active:!0,rendered:!1,element:positions.length?info.element.clone():info.element,x:x,y:y},positions.push(position),position.element.css({top:Math.round(y),left:Math.round(x),"text-align":halign})},Canvas.prototype.removeText=function(layer,x,y,text,font,angle){if(null==text){var layerCache=this._textCache[layer];if(null!=layerCache)for(var styleKey in layerCache)if(hasOwnProperty.call(layerCache,styleKey)){var styleCache=layerCache[styleKey];for(var key in styleCache)if(hasOwnProperty.call(styleCache,key))for(var positions=styleCache[key].positions,i=0;position=positions[i];i++)position.active=!1}}else{var position;for(positions=this.getTextInfo(layer,text,font,angle).positions,i=0;position=positions[i];i++)position.x==x&&position.y==y&&(position.active=!1)}},$.plot=function(placeholder,data,options){return new Plot($(placeholder),data,options,$.plot.plugins)},$.plot.version="0.8.3",$.plot.plugins=[],$.fn.plot=function(data,options){return this.each(function(){$.plot(this,data,options)})}}(jQuery)},898:function(module,exports){!function($){jQuery.plot.plugins.push({init:function(plot){var crosshair={x:-1,y:-1,locked:!1};function onMouseOut(e){crosshair.locked||-1!=crosshair.x&&(crosshair.x=-1,plot.triggerRedrawOverlay())}function onMouseMove(e){if(!crosshair.locked)if(plot.getSelection&&plot.getSelection())crosshair.x=-1;else{var offset=plot.offset();crosshair.x=Math.max(0,Math.min(e.pageX-offset.left,plot.width())),crosshair.y=Math.max(0,Math.min(e.pageY-offset.top,plot.height())),plot.triggerRedrawOverlay()}}plot.setCrosshair=function(pos){if(pos){var o=plot.p2c(pos);crosshair.x=Math.max(0,Math.min(o.left,plot.width())),crosshair.y=Math.max(0,Math.min(o.top,plot.height()))}else crosshair.x=-1;plot.triggerRedrawOverlay()},plot.clearCrosshair=plot.setCrosshair,plot.lockCrosshair=function(pos){pos&&plot.setCrosshair(pos),crosshair.locked=!0},plot.unlockCrosshair=function(){crosshair.locked=!1},plot.hooks.bindEvents.push(function(plot,eventHolder){plot.getOptions().crosshair.mode&&(eventHolder.mouseout(onMouseOut),eventHolder.mousemove(onMouseMove))}),plot.hooks.drawOverlay.push(function(plot,ctx){var c=plot.getOptions().crosshair;if(c.mode){var plotOffset=plot.getPlotOffset();if(ctx.save(),ctx.translate(plotOffset.left,plotOffset.top),-1!=crosshair.x){var adj=plot.getOptions().crosshair.lineWidth%2?.5:0;if(ctx.strokeStyle=c.color,ctx.lineWidth=c.lineWidth,ctx.lineJoin="round",ctx.beginPath(),-1!=c.mode.indexOf("x")){var drawX=Math.floor(crosshair.x)+adj;ctx.moveTo(drawX,0),ctx.lineTo(drawX,plot.height())}if(-1!=c.mode.indexOf("y")){var drawY=Math.floor(crosshair.y)+adj;ctx.moveTo(0,drawY),ctx.lineTo(plot.width(),drawY)}ctx.stroke()}ctx.restore()}}),plot.hooks.shutdown.push(function(plot,eventHolder){eventHolder.unbind("mouseout",onMouseOut),eventHolder.unbind("mousemove",onMouseMove)})},options:{crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}},name:"crosshair",version:"1.0"})}()},899:function(module,exports){!function($){function floorInBase(n,base){return base*Math.floor(n/base)}function formatDate(d,fmt,monthNames,dayNames){if("function"==typeof d.strftime)return d.strftime(fmt);var hours12,leftPad=function(n,pad){return pad=""+(null==pad?"0":pad),1==(n=""+n).length?pad+n:n},r=[],escape=!1,hours=d.getHours(),isAM=hours<12;null==monthNames&&(monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==dayNames&&(dayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),hours12=hours>12?hours-12:0==hours?12:hours;for(var i=0;i<fmt.length;++i){var c=fmt.charAt(i);if(escape){switch(c){case"a":c=""+dayNames[d.getDay()];break;case"b":c=""+monthNames[d.getMonth()];break;case"d":c=leftPad(d.getDate());break;case"e":c=leftPad(d.getDate()," ");break;case"h":case"H":c=leftPad(hours);break;case"I":c=leftPad(hours12);break;case"l":c=leftPad(hours12," ");break;case"m":c=leftPad(d.getMonth()+1);break;case"M":c=leftPad(d.getMinutes());break;case"q":c=""+(Math.floor(d.getMonth()/3)+1);break;case"S":c=leftPad(d.getSeconds());break;case"y":c=leftPad(d.getFullYear()%100);break;case"Y":c=""+d.getFullYear();break;case"p":c=isAM?"am":"pm";break;case"P":c=isAM?"AM":"PM";break;case"w":c=""+d.getDay()}r.push(c),escape=!1}else"%"==c?escape=!0:r.push(c)}return r.join("")}function makeUtcWrapper(d){function addProxyMethod(sourceObj,sourceMethod,targetObj,targetMethod){sourceObj[sourceMethod]=function(){return targetObj[targetMethod].apply(targetObj,arguments)}}var utc={date:d};null!=d.strftime&&addProxyMethod(utc,"strftime",d,"strftime"),addProxyMethod(utc,"getTime",d,"getTime"),addProxyMethod(utc,"setTime",d,"setTime");for(var props=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],p=0;p<props.length;p++)addProxyMethod(utc,"get"+props[p],d,"getUTC"+props[p]),addProxyMethod(utc,"set"+props[p],d,"setUTC"+props[p]);return utc}function dateGenerator(ts,opts){if("browser"==opts.timezone)return new Date(ts);if(opts.timezone&&"utc"!=opts.timezone){if("undefined"!=typeof timezoneJS&&void 0!==timezoneJS.Date){var d=new timezoneJS.Date;return d.setTimezone(opts.timezone),d.setTime(ts),d}return makeUtcWrapper(new Date(ts))}return makeUtcWrapper(new Date(ts))}var timeUnitSize={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},baseSpec=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],specMonths=baseSpec.concat([[3,"month"],[6,"month"],[1,"year"]]),specQuarters=baseSpec.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);$.plot.plugins.push({init:function(plot){plot.hooks.processOptions.push(function(plot,options){$.each(plot.getAxes(),function(axisName,axis){var opts=axis.options;"time"==opts.mode&&(axis.tickGenerator=function(axis){var ticks=[],d=dateGenerator(axis.min,opts),minSize=0,spec=opts.tickSize&&"quarter"===opts.tickSize[1]||opts.minTickSize&&"quarter"===opts.minTickSize[1]?specQuarters:specMonths;null!=opts.minTickSize&&(minSize="number"==typeof opts.tickSize?opts.tickSize:opts.minTickSize[0]*timeUnitSize[opts.minTickSize[1]]);for(var i=0;i<spec.length-1&&!(axis.delta<(spec[i][0]*timeUnitSize[spec[i][1]]+spec[i+1][0]*timeUnitSize[spec[i+1][1]])/2&&spec[i][0]*timeUnitSize[spec[i][1]]>=minSize);++i);var size=spec[i][0],unit=spec[i][1];if("year"==unit){if(null!=opts.minTickSize&&"year"==opts.minTickSize[1])size=Math.floor(opts.minTickSize[0]);else{var magn=Math.pow(10,Math.floor(Math.log(axis.delta/timeUnitSize.year)/Math.LN10)),norm=axis.delta/timeUnitSize.year/magn;size=norm<1.5?1:norm<3?2:norm<7.5?5:10,size*=magn}size<1&&(size=1)}axis.tickSize=opts.tickSize||[size,unit];var tickSize=axis.tickSize[0];unit=axis.tickSize[1];var step=tickSize*timeUnitSize[unit];"second"==unit?d.setSeconds(floorInBase(d.getSeconds(),tickSize)):"minute"==unit?d.setMinutes(floorInBase(d.getMinutes(),tickSize)):"hour"==unit?d.setHours(floorInBase(d.getHours(),tickSize)):"month"==unit?d.setMonth(floorInBase(d.getMonth(),tickSize)):"quarter"==unit?d.setMonth(3*floorInBase(d.getMonth()/3,tickSize)):"year"==unit&&d.setFullYear(floorInBase(d.getFullYear(),tickSize)),d.setMilliseconds(0),step>=timeUnitSize.minute&&d.setSeconds(0),step>=timeUnitSize.hour&&d.setMinutes(0),step>=timeUnitSize.day&&d.setHours(0),step>=4*timeUnitSize.day&&d.setDate(1),step>=2*timeUnitSize.month&&d.setMonth(floorInBase(d.getMonth(),3)),step>=2*timeUnitSize.quarter&&d.setMonth(floorInBase(d.getMonth(),6)),step>=timeUnitSize.year&&d.setMonth(0);var prev,carry=0,v=Number.NaN;do{if(prev=v,v=d.getTime(),ticks.push(v),"month"==unit||"quarter"==unit)if(tickSize<1){d.setDate(1);var start=d.getTime();d.setMonth(d.getMonth()+("quarter"==unit?3:1));var end=d.getTime();d.setTime(v+carry*timeUnitSize.hour+(end-start)*tickSize),carry=d.getHours(),d.setHours(0)}else d.setMonth(d.getMonth()+tickSize*("quarter"==unit?3:1));else"year"==unit?d.setFullYear(d.getFullYear()+tickSize):d.setTime(v+step)}while(v<axis.max&&v!=prev);return ticks},axis.tickFormatter=function(v,axis){var d=dateGenerator(v,axis.options);if(null!=opts.timeformat)return formatDate(d,opts.timeformat,opts.monthNames,opts.dayNames);var useQuarters=axis.options.tickSize&&"quarter"==axis.options.tickSize[1]||axis.options.minTickSize&&"quarter"==axis.options.minTickSize[1],t=axis.tickSize[0]*timeUnitSize[axis.tickSize[1]],span=axis.max-axis.min,suffix=opts.twelveHourClock?" %p":"",hourCode=opts.twelveHourClock?"%I":"%H";return formatDate(d,t<timeUnitSize.minute?hourCode+":%M:%S"+suffix:t<timeUnitSize.day?span<2*timeUnitSize.day?hourCode+":%M"+suffix:"%b %d "+hourCode+":%M"+suffix:t<timeUnitSize.month?"%b %d":useQuarters&&t<timeUnitSize.quarter||!useQuarters&&t<timeUnitSize.year?span<timeUnitSize.year?"%b":"%b %Y":useQuarters&&t<timeUnitSize.year?span<timeUnitSize.year?"Q%q":"Q%q %Y":"%Y",opts.monthNames,opts.dayNames)})})})},options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"}),$.plot.formatDate=formatDate,$.plot.dateGenerator=dateGenerator}(jQuery)},9:function(module,exports,__webpack_require__){__webpack_require__(640),module.exports=angular},900:function(module,exports){!function($){jQuery.plot.plugins.push({init:function(plot){plot.hooks.processDatapoints.push(function(plot,s,datapoints){if(null!=s.stack&&!1!==s.stack){var other=function(s,allseries){for(var res=null,i=0;i<allseries.length&&s!=allseries[i];++i)allseries[i].stack==s.stack&&(res=allseries[i]);return res}(s,plot.getData());if(other){for(var px,py,intery,qx,qy,bottom,l,m,ps=datapoints.pointsize,points=datapoints.points,otherps=other.datapoints.pointsize,otherpoints=other.datapoints.points,newpoints=[],withlines=s.lines.show,horizontal=s.bars.horizontal,withbottom=ps>2&&(horizontal?datapoints.format[2].x:datapoints.format[2].y),withsteps=withlines&&s.lines.steps,fromgap=!0,keyOffset=horizontal?1:0,accumulateOffset=horizontal?0:1,i=0,j=0;!(i>=points.length);){if(l=newpoints.length,null==points[i]){for(m=0;m<ps;++m)newpoints.push(points[i+m]);i+=ps}else if(j>=otherpoints.length){if(!withlines)for(m=0;m<ps;++m)newpoints.push(points[i+m]);i+=ps}else if(null==otherpoints[j]){for(m=0;m<ps;++m)newpoints.push(null);fromgap=!0,j+=otherps}else{if(px=points[i+keyOffset],py=points[i+accumulateOffset],qx=otherpoints[j+keyOffset],qy=otherpoints[j+accumulateOffset],bottom=0,px==qx){for(m=0;m<ps;++m)newpoints.push(points[i+m]);newpoints[l+accumulateOffset]+=qy,bottom=qy,i+=ps,j+=otherps}else if(px>qx){if(withlines&&i>0&&null!=points[i-ps]){for(intery=py+(points[i-ps+accumulateOffset]-py)*(qx-px)/(points[i-ps+keyOffset]-px),newpoints.push(qx),newpoints.push(intery+qy),m=2;m<ps;++m)newpoints.push(points[i+m]);bottom=qy}j+=otherps}else{if(fromgap&&withlines){i+=ps;continue}for(m=0;m<ps;++m)newpoints.push(points[i+m]);withlines&&j>0&&null!=otherpoints[j-otherps]&&(bottom=qy+(otherpoints[j-otherps+accumulateOffset]-qy)*(px-qx)/(otherpoints[j-otherps+keyOffset]-qx)),newpoints[l+accumulateOffset]+=bottom,i+=ps}fromgap=!1,l!=newpoints.length&&withbottom&&(newpoints[l+2]+=bottom)}if(withsteps&&l!=newpoints.length&&l>0&&null!=newpoints[l]&&newpoints[l]!=newpoints[l-ps]&&newpoints[l+1]!=newpoints[l-ps+1]){for(m=0;m<ps;++m)newpoints[l+ps+m]=newpoints[l+m];newpoints[l+1]=newpoints[l-ps+1]}}datapoints.points=newpoints}}})},options:{series:{stack:null}},name:"stack",version:"1.2"})}()},901:function(module,exports){!function($){$.plot.plugins.push({init:function(plot){var selection={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},savedhandlers={},mouseUpHandler=null;function onMouseMove(e){selection.active&&(updateSelection(e),plot.getPlaceholder().trigger("plotselecting",[getSelection()]))}function onMouseDown(e){1==e.which&&(document.body.focus(),void 0!==document.onselectstart&&null==savedhandlers.onselectstart&&(savedhandlers.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),void 0!==document.ondrag&&null==savedhandlers.ondrag&&(savedhandlers.ondrag=document.ondrag,document.ondrag=function(){return!1}),setSelectionPos(selection.first,e),selection.active=!0,mouseUpHandler=function(e){!function(e){mouseUpHandler=null,void 0!==document.onselectstart&&(document.onselectstart=savedhandlers.onselectstart),void 0!==document.ondrag&&(document.ondrag=savedhandlers.ondrag),selection.active=!1,updateSelection(e),selectionIsSane()?triggerSelectedEvent():(plot.getPlaceholder().trigger("plotunselected",[]),plot.getPlaceholder().trigger("plotselecting",[null]))}(e)},$(document).one("mouseup",mouseUpHandler))}function getSelection(){if(!selectionIsSane())return null;if(!selection.show)return null;var r={},c1=selection.first,c2=selection.second;return $.each(plot.getAxes(),function(name,axis){if(axis.used){var p1=axis.c2p(c1[axis.direction]),p2=axis.c2p(c2[axis.direction]);r[name]={from:Math.min(p1,p2),to:Math.max(p1,p2)}}}),r}function triggerSelectedEvent(){var r=getSelection();plot.getPlaceholder().trigger("plotselected",[r]),r.xaxis&&r.yaxis&&plot.getPlaceholder().trigger("selected",[{x1:r.xaxis.from,y1:r.yaxis.from,x2:r.xaxis.to,y2:r.yaxis.to}])}function clamp(min,value,max){return value<min?min:value>max?max:value}function setSelectionPos(pos,e){var o=plot.getOptions(),offset=plot.getPlaceholder().offset(),plotOffset=plot.getPlotOffset();pos.x=clamp(0,e.pageX-offset.left-plotOffset.left,plot.width()),pos.y=clamp(0,e.pageY-offset.top-plotOffset.top,plot.height()),"y"==o.selection.mode&&(pos.x=pos==selection.first?0:plot.width()),"x"==o.selection.mode&&(pos.y=pos==selection.first?0:plot.height())}function updateSelection(pos){null!=pos.pageX&&(setSelectionPos(selection.second,pos),selectionIsSane()?(selection.show=!0,plot.triggerRedrawOverlay()):clearSelection(!0))}function clearSelection(preventEvent){selection.show&&(selection.show=!1,plot.triggerRedrawOverlay(),preventEvent||plot.getPlaceholder().trigger("plotunselected",[]))}function extractRange(ranges,coord){var axis,from,to,key,axes=plot.getAxes();for(var k in axes)if((axis=axes[k]).direction==coord&&(ranges[key=coord+axis.n+"axis"]||1!=axis.n||(key=coord+"axis"),ranges[key])){from=ranges[key].from,to=ranges[key].to;break}if(ranges[key]||(axis="x"==coord?plot.getXAxes()[0]:plot.getYAxes()[0],from=ranges[coord+"1"],to=ranges[coord+"2"]),null!=from&&null!=to&&from>to){var tmp=from;from=to,to=tmp}return{from:from,to:to,axis:axis}}function selectionIsSane(){var minSize=plot.getOptions().selection.minSize;return Math.abs(selection.second.x-selection.first.x)>=minSize&&Math.abs(selection.second.y-selection.first.y)>=minSize}plot.clearSelection=clearSelection,plot.setSelection=function(ranges,preventEvent){var range,o=plot.getOptions();"y"==o.selection.mode?(selection.first.x=0,selection.second.x=plot.width()):(range=extractRange(ranges,"x"),selection.first.x=range.axis.p2c(range.from),selection.second.x=range.axis.p2c(range.to)),"x"==o.selection.mode?(selection.first.y=0,selection.second.y=plot.height()):(range=extractRange(ranges,"y"),selection.first.y=range.axis.p2c(range.from),selection.second.y=range.axis.p2c(range.to)),selection.show=!0,plot.triggerRedrawOverlay(),!preventEvent&&selectionIsSane()&&triggerSelectedEvent()},plot.getSelection=getSelection,plot.hooks.bindEvents.push(function(plot,eventHolder){null!=plot.getOptions().selection.mode&&(eventHolder.mousemove(onMouseMove),eventHolder.mousedown(onMouseDown))}),plot.hooks.drawOverlay.push(function(plot,ctx){if(selection.show&&selectionIsSane()){var plotOffset=plot.getPlotOffset(),o=plot.getOptions();ctx.save(),ctx.translate(plotOffset.left,plotOffset.top);var c=$.color.parse(o.selection.color);ctx.strokeStyle=c.scale("a",.8).toString(),ctx.lineWidth=1,ctx.lineJoin=o.selection.shape,ctx.fillStyle=c.scale("a",.4).toString();var x=Math.min(selection.first.x,selection.second.x)+.5,y=Math.min(selection.first.y,selection.second.y)+.5,w=Math.abs(selection.second.x-selection.first.x)-1,h=Math.abs(selection.second.y-selection.first.y)-1;ctx.fillRect(x,y,w,h),ctx.strokeRect(x,y,w,h),ctx.restore()}}),plot.hooks.shutdown.push(function(plot,eventHolder){eventHolder.unbind("mousemove",onMouseMove),eventHolder.unbind("mousedown",onMouseDown),mouseUpHandler&&$(document).unbind("mouseup",mouseUpHandler)})},options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})}(jQuery)},902:function(module,exports){!function($){var REDRAW_ATTEMPTS=10,REDRAW_SHRINK=.95;var options={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(label,slice){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+slice.color+";'>"+label+"<br/>"+Math.round(slice.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};$.plot.plugins.push({init:function(plot){var canvas=null,target=null,options=null,maxRadius=null,centerLeft=null,centerTop=null,processed=!1,ctx=null,highlights=[];function processDatapoints(plot,series,datapoints){processed||(processed=!0,canvas=plot.getCanvas(),target=$(canvas).parent(),options=plot.getOptions(),plot.setData(function(data){for(var total=0,combined=0,numCombined=0,color=options.series.pie.combine.color,newdata=[],i=0;i<data.length;++i){var value=data[i].data;$.isArray(value)&&1==value.length&&(value=value[0]),$.isArray(value)?!isNaN(parseFloat(value[1]))&&isFinite(value[1])?value[1]=+value[1]:value[1]=0:value=!isNaN(parseFloat(value))&&isFinite(value)?[1,+value]:[1,0],data[i].data=[value]}for(var i=0;i<data.length;++i)total+=data[i].data[0][1];for(var i=0;i<data.length;++i){var value=data[i].data[0][1];value/total<=options.series.pie.combine.threshold&&(combined+=value,numCombined++,color||(color=data[i].color))}for(var i=0;i<data.length;++i){var value=data[i].data[0][1];(numCombined<2||value/total>options.series.pie.combine.threshold)&&newdata.push($.extend(data[i],{data:[[1,value]],color:data[i].color,label:data[i].label,angle:value*Math.PI*2/total,percent:value/(total/100)}))}return numCombined>1&&newdata.push({data:[[1,combined]],color:color,label:options.series.pie.combine.label,angle:combined*Math.PI*2/total,percent:combined/(total/100)}),newdata}(plot.getData())))}function draw(plot,newCtx){if(target){var canvasWidth=plot.getPlaceholder().width(),canvasHeight=plot.getPlaceholder().height(),legendWidth=target.children().filter(".legend").children().width()||0;ctx=newCtx,processed=!1,maxRadius=Math.min(canvasWidth,canvasHeight/options.series.pie.tilt)/2,centerTop=canvasHeight/2+options.series.pie.offset.top,centerLeft=canvasWidth/2,"auto"==options.series.pie.offset.left?(options.legend.position.match("w")?centerLeft+=legendWidth/2:centerLeft-=legendWidth/2,centerLeft<maxRadius?centerLeft=maxRadius:centerLeft>canvasWidth-maxRadius&&(centerLeft=canvasWidth-maxRadius)):centerLeft+=options.series.pie.offset.left;var slices=plot.getData(),attempts=0;do{attempts>0&&(maxRadius*=REDRAW_SHRINK),attempts+=1,clear(),options.series.pie.tilt<=.8&&drawShadow()}while(!drawPie()&&attempts<REDRAW_ATTEMPTS);attempts>=REDRAW_ATTEMPTS&&(clear(),target.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>")),plot.setSeries&&plot.insertLegend&&(plot.setSeries(slices),plot.insertLegend())}function clear(){ctx.clearRect(0,0,canvasWidth,canvasHeight),target.children().filter(".pieLabel, .pieLabelBackground").remove()}function drawShadow(){var shadowLeft=options.series.pie.shadow.left,shadowTop=options.series.pie.shadow.top,alpha=options.series.pie.shadow.alpha,radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;if(!(radius>=canvasWidth/2-shadowLeft||radius*options.series.pie.tilt>=canvasHeight/2-shadowTop||radius<=10)){ctx.save(),ctx.translate(shadowLeft,shadowTop),ctx.globalAlpha=alpha,ctx.fillStyle="#000",ctx.translate(centerLeft,centerTop),ctx.scale(1,options.series.pie.tilt);for(var i=1;i<=10;i++)ctx.beginPath(),ctx.arc(0,0,radius,0,2*Math.PI,!1),ctx.fill(),radius-=i;ctx.restore()}}function drawPie(){var startAngle=Math.PI*options.series.pie.startAngle,radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;ctx.save(),ctx.translate(centerLeft,centerTop),ctx.scale(1,options.series.pie.tilt),ctx.save();for(var currentAngle=startAngle,i=0;i<slices.length;++i)slices[i].startAngle=currentAngle,drawSlice(slices[i].angle,slices[i].color,!0);if(ctx.restore(),options.series.pie.stroke.width>0){for(ctx.save(),ctx.lineWidth=options.series.pie.stroke.width,currentAngle=startAngle,i=0;i<slices.length;++i)drawSlice(slices[i].angle,options.series.pie.stroke.color,!1);ctx.restore()}return drawDonutHole(ctx),ctx.restore(),!options.series.pie.label.show||function(){for(var currentAngle=startAngle,radius=options.series.pie.label.radius>1?options.series.pie.label.radius:maxRadius*options.series.pie.label.radius,i=0;i<slices.length;++i){if(slices[i].percent>=100*options.series.pie.label.threshold&&!drawLabel(slices[i],currentAngle,i))return!1;currentAngle+=slices[i].angle}return!0;function drawLabel(slice,startAngle,index){if(0==slice.data[0][1])return!0;var text,lf=options.legend.labelFormatter,plf=options.series.pie.label.formatter;text=lf?lf(slice.label,slice):slice.label,plf&&(text=plf(text,slice));var halfAngle=(startAngle+slice.angle+startAngle)/2,x=centerLeft+Math.round(Math.cos(halfAngle)*radius),y=centerTop+Math.round(Math.sin(halfAngle)*radius)*options.series.pie.tilt,html="<span class='pieLabel' id='pieLabel"+index+"' style='position:absolute;top:"+y+"px;left:"+x+"px;'>"+text+"</span>";target.append(html);var label=target.children("#pieLabel"+index),labelTop=y-label.height()/2,labelLeft=x-label.width()/2;if(label.css("top",labelTop),label.css("left",labelLeft),0-labelTop>0||0-labelLeft>0||canvasHeight-(labelTop+label.height())<0||canvasWidth-(labelLeft+label.width())<0)return!1;if(0!=options.series.pie.label.background.opacity){var c=options.series.pie.label.background.color;null==c&&(c=slice.color);var pos="top:"+labelTop+"px;left:"+labelLeft+"px;";$("<div class='pieLabelBackground' style='position:absolute;width:"+label.width()+"px;height:"+label.height()+"px;"+pos+"background-color:"+c+";'></div>").css("opacity",options.series.pie.label.background.opacity).insertBefore(label)}return!0}}();function drawSlice(angle,color,fill){angle<=0||isNaN(angle)||(fill?ctx.fillStyle=color:(ctx.strokeStyle=color,ctx.lineJoin="round"),ctx.beginPath(),Math.abs(angle-2*Math.PI)>1e-9&&ctx.moveTo(0,0),ctx.arc(0,0,radius,currentAngle,currentAngle+angle/2,!1),ctx.arc(0,0,radius,currentAngle+angle/2,currentAngle+angle,!1),ctx.closePath(),currentAngle+=angle,fill?ctx.fill():ctx.stroke())}}}function drawDonutHole(layer){if(options.series.pie.innerRadius>0){layer.save();var innerRadius=options.series.pie.innerRadius>1?options.series.pie.innerRadius:maxRadius*options.series.pie.innerRadius;layer.globalCompositeOperation="destination-out",layer.beginPath(),layer.fillStyle=options.series.pie.stroke.color,layer.arc(0,0,innerRadius,0,2*Math.PI,!1),layer.fill(),layer.closePath(),layer.restore(),layer.save(),layer.beginPath(),layer.strokeStyle=options.series.pie.stroke.color,layer.arc(0,0,innerRadius,0,2*Math.PI,!1),layer.stroke(),layer.closePath(),layer.restore()}}function isPointInPoly(poly,pt){for(var c=!1,i=-1,l=poly.length,j=l-1;++i<l;j=i)(poly[i][1]<=pt[1]&&pt[1]<poly[j][1]||poly[j][1]<=pt[1]&&pt[1]<poly[i][1])&&pt[0]<(poly[j][0]-poly[i][0])*(pt[1]-poly[i][1])/(poly[j][1]-poly[i][1])+poly[i][0]&&(c=!c);return c}function onMouseMove(e){triggerClickHoverEvent("plothover",e)}function onClick(e){triggerClickHoverEvent("plotclick",e)}function triggerClickHoverEvent(eventname,e){var offset=plot.offset(),item=function(mouseX,mouseY){for(var x,y,slices=plot.getData(),options=plot.getOptions(),radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius,i=0;i<slices.length;++i){var s=slices[i];if(s.pie.show){if(ctx.save(),ctx.beginPath(),ctx.moveTo(0,0),ctx.arc(0,0,radius,s.startAngle,s.startAngle+s.angle/2,!1),ctx.arc(0,0,radius,s.startAngle+s.angle/2,s.startAngle+s.angle,!1),ctx.closePath(),x=mouseX-centerLeft,y=mouseY-centerTop,ctx.isPointInPath){if(ctx.isPointInPath(mouseX-centerLeft,mouseY-centerTop))return ctx.restore(),{datapoint:[s.percent,s.data],dataIndex:0,series:s,seriesIndex:i}}else if(isPointInPoly([[0,0],[radius*Math.cos(s.startAngle),radius*Math.sin(s.startAngle)],[radius*Math.cos(s.startAngle+s.angle/4),radius*Math.sin(s.startAngle+s.angle/4)],[radius*Math.cos(s.startAngle+s.angle/2),radius*Math.sin(s.startAngle+s.angle/2)],[radius*Math.cos(s.startAngle+s.angle/1.5),radius*Math.sin(s.startAngle+s.angle/1.5)],[radius*Math.cos(s.startAngle+s.angle),radius*Math.sin(s.startAngle+s.angle)]],[x,y]))return ctx.restore(),{datapoint:[s.percent,s.data],dataIndex:0,series:s,seriesIndex:i};ctx.restore()}}return null}(parseInt(e.pageX-offset.left),parseInt(e.pageY-offset.top));if(options.grid.autoHighlight)for(var i=0;i<highlights.length;++i){var h=highlights[i];h.auto!=eventname||item&&h.series==item.series||unhighlight(h.series)}item&&function(s,auto){var i=indexOfHighlight(s);-1==i?(highlights.push({series:s,auto:auto}),plot.triggerRedrawOverlay()):auto||(highlights[i].auto=!1)}(item.series,eventname);var pos={pageX:e.pageX,pageY:e.pageY};target.trigger(eventname,[pos,item])}function unhighlight(s){null==s&&(highlights=[],plot.triggerRedrawOverlay());var i=indexOfHighlight(s);-1!=i&&(highlights.splice(i,1),plot.triggerRedrawOverlay())}function indexOfHighlight(s){for(var i=0;i<highlights.length;++i)if(highlights[i].series==s)return i;return-1}plot.hooks.processOptions.push(function(plot,options){options.series.pie.show&&(options.grid.show=!1,"auto"==options.series.pie.label.show&&(options.legend.show?options.series.pie.label.show=!1:options.series.pie.label.show=!0),"auto"==options.series.pie.radius&&(options.series.pie.label.show?options.series.pie.radius=.75:options.series.pie.radius=1),options.series.pie.tilt>1?options.series.pie.tilt=1:options.series.pie.tilt<0&&(options.series.pie.tilt=0))}),plot.hooks.bindEvents.push(function(plot,eventHolder){var options=plot.getOptions();options.series.pie.show&&(options.grid.hoverable&&eventHolder.unbind("mousemove").mousemove(onMouseMove),options.grid.clickable&&eventHolder.unbind("click").click(onClick))}),plot.hooks.processDatapoints.push(function(plot,series,data,datapoints){plot.getOptions().series.pie.show&&processDatapoints(plot)}),plot.hooks.drawOverlay.push(function(plot,octx){plot.getOptions().series.pie.show&&function(plot,octx){var options=plot.getOptions(),radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;octx.save(),octx.translate(centerLeft,centerTop),octx.scale(1,options.series.pie.tilt);for(var i=0;i<highlights.length;++i)drawHighlight(highlights[i].series);function drawHighlight(series){series.angle<=0||isNaN(series.angle)||(octx.fillStyle="rgba(255, 255, 255, "+options.series.pie.highlight.opacity+")",octx.beginPath(),Math.abs(series.angle-2*Math.PI)>1e-9&&octx.moveTo(0,0),octx.arc(0,0,radius,series.startAngle,series.startAngle+series.angle/2,!1),octx.arc(0,0,radius,series.startAngle+series.angle/2,series.startAngle+series.angle,!1),octx.closePath(),octx.fill())}drawDonutHole(octx),octx.restore()}(plot,octx)}),plot.hooks.draw.push(function(plot,newCtx){plot.getOptions().series.pie.show&&draw(plot,newCtx)})},options:options,name:"pie",version:"1.1"})}(jQuery)},904:function(module,exports){var path="/migadmin/ng/wifi/monitor/details/f-wifi-client-details.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<f-dialog form="$ctrl.form" full-height="::true" loading="$ctrl.loading" footer-type="\'close\'">\n    <div class="flex-column absolute-fill" ng-if="!$ctrl.loading">\n        <div class="client-summary" ng-if="!$ctrl.expanded">\n            <div class="summary">\n                <table class="table striped bordered key-value with-header summary-table full-width">\n                    <thead>\n                        <tr>\n                            <th colspan="2">\n                                {{$ctrl.client.hostname || $ctrl.client.sta_mac.toUpperCase()}}\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td>\n                                {{::\'field_dev\' | lang}}\n                            </td>\n                            <td>\n                                <f-omniselect-entry entry="::{\n                                    q_origin_key: $ctrl.client.sta_mac,\n                                    datasource: $ctrl.getOmniselectDatasource(\'devices\')\n                                }"\n                                    fallback-formatter=$ctrl.fallbackFormatter($ctrl.client.sta_mac)>\n                                </f-omniselect-entry>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                {{::\'ssid\' | lang}}\n                            </td>\n                            <td>\n                                <f-omniselect-entry entry="::{\n                                    q_origin_key: $ctrl.client.vap_name,\n                                    datasource: $ctrl.getAllVdomDatasource(\'wireless-controller.vap\')\n                                }"\n                                    fallback-formatter=$ctrl.fallbackFormatter($ctrl.client.ssid)>\n                                </f-omniselect-entry>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                {{::\'FortiAP\' | lang}}\n                            </td>\n                            <td>\n                                <f-omniselect-entry entry="{\n                                    q_origin_key: $ctrl.getApId($ctrl.client.wtp_id),\n                                    datasource: $ctrl.getOmniselectDatasource(\'wireless-controller.wtp\')\n                                }">\n                                </f-omniselect-entry>\n                            </td>\n                        </tr>\n                        <tr ng-if="$ctrl.client.user">\n                            <td>\n                                {{::\'user\' | lang}}\n                            </td>\n                            <td>\n                                <f-omniselect-entry entry="::{\n                                    q_origin_key: $ctrl.client.user,\n                                    datasource: $ctrl.getOmniselectDatasource(\'user.local\')\n                                }"\n                                    fallback-formatter=$ctrl.fallbackFormatter($ctrl.client.user)>\n                                </f-omniselect-entry>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                {{::\'channel\' | lang}}\n                            </td>\n                            <td>\n                                {{$ctrl.client.channel}}\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                {{::\'field_sta_assoc_time\' | lang}}\n                            </td>\n                            <td>\n                                {{$ctrl.client.sta_assoc_time}}\n                            </td>\n                        </tr>\n                        <tr ng-if="$ctrl.ipAddresses.length > 0">\n                            <td>\n                                {{::\'field_ipaddr\' | lang}}\n                            </td>\n                            <td>\n                                <span class="tooltip-hint" f-tip-target>\n                                    {{$ctrl.ipAddresses[0].value}}\n                                    <div f-tip display-options="::{padContent: false}">\n                                        <table class="table slightly-condensed key-value select-tooltip-table">\n                                            <tr ng-repeat="entry in $ctrl.ipAddresses">\n                                                <td>{{entry.langKey | lang}}</td>\n                                                <td>{{entry.value}}</td>\n                                            </tr>\n                                        </table>\n                                    </div>\n                                </span>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                {{::\'mimo\' | lang}}\n                            </td>\n                            <td>\n                                {{::$ctrl.client.mimo}}\n                            </td>\n                        </tr>\n                    </tbody>\n                    <tfoot>\n                        <td colspan="2">\n                            <button ng-click="$ctrl.quarantineClient()" ng-disabled="$ctrl.readOnly || $ctrl.disassociated">\n                                <f-icon ng-class="{\'ftnt-quarantine\': !$ctrl.isQuarantined, \'fa-trash-o\': $ctrl.isQuarantined}"></f-icon>\n                                <span ng-if="!$ctrl.isQuarantined">\n                                    {{::\'Quarantine\' | lang}}\n                                </span>\n                                <span ng-if="$ctrl.isQuarantined">\n                                    {{::\'Unquarantine\' | lang}}\n                                </span>\n                            </button>\n                            <button ng-click="$ctrl.disassociateClient()" ng-disabled="$ctrl.readOnly || $ctrl.disassociated">\n                                <f-icon class="fa-chain-broken"></f-icon>\n                                <span>\n                                    {{::\'Disassociate\' | lang}}\n                                </span>\n                            </button>\n                        </td>\n                    </tfoot>\n                </table>\n            </div>\n            <div class="health">\n                <div>\n                    <label class="section-title title">\n                        <h3>{{::\'Health\' | lang}}</h3>\n                        <f-icon class="fa-severity-{{$ctrl.health.overall.severity}}">\n                        </f-icon>\n                        <span>\n                            {{$ctrl.health.overall.langKey | lang}}\n                        </span>\n                    </label>\n                    <table class="details">\n                        <tr>\n                            <td>\n                                <span\n                                    class="severity-label health-metric small wide severity-{{$ctrl.health.signalStrength.severity}}"\n                                    ng-if="$ctrl.health.signalStrength.value">\n                                    {{$ctrl.health.signalStrength.label}}\n                                </span>\n                                <div class="offline-metric" ng-if="!$ctrl.health.signalStrength.value">\n                                    <f-icon class="fa-unknown"></f-icon>\n                                </div>\n                            </td>\n                            <td>\n                                {{::\'signal_strength\' | lang}}\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <span\n                                    class="severity-label health-metric small wide severity-{{$ctrl.health.snr.severity}}"\n                                    ng-if="$ctrl.health.snr.value">\n                                    {{$ctrl.health.snr.label}}\n                                </span>\n                                <div class="offline-metric" ng-if="!$ctrl.health.snr.value">\n                                    <f-icon class="fa-unknown"></f-icon>\n                                </div>\n                            </td>\n                            <td>\n                                {{::\'field_sta_snr\' | lang}}\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <span\n                                    class="severity-label health-metric small wide severity-{{$ctrl.health.band.severity}}"\n                                    ng-if="$ctrl.health.band.value">\n                                    {{$ctrl.health.band.label}}\n                                </span>\n                                <div class="offline-metric" ng-if="!$ctrl.health.band.value">\n                                    <f-icon class="fa-unknown"></f-icon>\n                                </div>\n                            </td>\n                            <td>\n                                {{::\'radio_type\' | lang}}\n                            </td>\n                        </tr>\n                        <tr>\n                            <td>\n                                <span\n                                    class="severity-label health-metric small wide severity-{{$ctrl.health.transmission.severity}}"\n                                    ng-if="$ctrl.health.transmission.value >= 0">\n                                    {{$ctrl.health.transmission.label}}\n                                </span>\n                                <div class="offline-metric" ng-if="!($ctrl.health.transmission.value >= 0)">\n                                    <f-icon class="fa-unknown"></f-icon>\n                                </div>\n                            </td>\n                            <td>\n                                <span class="tooltip-hint" f-tip-target>\n                                    {{::\'Transmission Discard/Retry\' | lang}}\n                                    <div f-tip display-options="::{padContent: false}">\n                                        <table class="table slightly-condensed key-value select-tooltip-table">\n                                            <tr ng-repeat="entry in $ctrl.txTooltipFields">\n                                                <td>{{entry.fieldLangKey | lang}}</td>\n                                                <td>{{entry.label}}</td>\n                                                <td>\n                                                    <f-icon class="fa-severity-{{entry.severity}}">\n                                                    </f-icon>\n                                                    <span>\n                                                        {{entry.langKey | lang}}\n                                                    </span>\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </div>\n                                </span>\n                            </td>\n                        </tr>\n                    </table>\n                </div>\n                <div>\n                    <label class="section-title title">\n                        <button class="bare no-margin-padding" f-pop-up-menu-toggle="$ctrl.graphOptionsMenu">\n                            <h3>{{$ctrl.currentGraph | lang}}</h3>\n                        </button>\n                        <div f-pop-up-menu=$ctrl.graphOptionsMenu>\n                            <div f-menu-item-button ng-repeat="graph in ::[\'Bandwidth\', \'field_sta_snr\']"\n                                selected="$ctrl.currentGraph === graph"\n                                ng-click="$ctrl.setGraphOption(graph)">\n                                <span>{{::graph | lang}}</span>\n                            </div>\n                        </div>\n                    </label>\n                </div>\n                <div ng-if="$ctrl.currentGraph === \'Bandwidth\'">\n                    <div f-chart="$ctrl.bandwidthLineChartConfigs" class="with-current-stat line-chart">\n                    </div>\n                    <div class="wifi-client-stat" ng-if="$ctrl.bandwidthValues[0]">\n                        <div class="current-stat-item">\n                            <div class="chart-legend-item">\n                                <div class="chart-legend-color" ng-style="::{\'background-color\': $ctrl.bandwidthTxColor}"></div>\n                            </div>\n                            <span class="light-text">{{::\'Bandwidth Tx\' | lang}}</span>\n                            <span class="current-stat-value">{{$ctrl.bandwidthValues[0]}}</span>\n                        </div>\n                        <div class="current-stat-item">\n                            <div class="chart-legend-item">\n                                <div class="chart-legend-color" ng-style="::{\'background-color\': $ctrl.bandwidthRxColor}"></div>\n                            </div>\n                            <span class="light-text">{{::\'Bandwidth Rx\' | lang}}</span>\n                            <span class="current-stat-value">{{$ctrl.bandwidthValues[1]}}</span>\n                        </div>\n                    </div>\n                </div>\n                <div ng-if="$ctrl.currentGraph === \'field_sta_snr\'">\n                    <div f-chart="$ctrl.snrLineChartConfigs" class="with-current-stat line-chart">\n                    </div>\n                    <div class="wifi-client-stat" ng-if="$ctrl.snrValue">\n                        <div>\n                            <span class="light-text">{{::\'field_sta_snr\' | lang}}</span>\n                            <span class="current-stat-value">{{$ctrl.snrValue}}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="controls-container">\n            <div class="control tabs small-hide">\n                <div f-tip-target ng-repeat="(key, view) in ::$ctrl.VIEWS" class="button-container">\n                    <button type="button" class="button" ng-click="$ctrl.changeView(view)" ng-class="{\n                            selected: view === $ctrl.selectedView,\n                        }">\n                        <span f-lang="{{::view.lang}}"></span>\n                    </button>\n                </div>\n            </div>\n            <div class="control">\n                <button class="button expand" ng-click="$ctrl.expand()">\n                    <f-icon ng-class="{\'fa-chevron-up\': !$ctrl.expanded, \'fa-chevron-down\': $ctrl.expanded}"></f-icon>\n                </button>\n            </div>\n        </div>\n        <div class="flex-grow containing-block tabs-wrapper small-hide">\n            <div ng-show="!$ctrl.loading" ng-repeat="viewType in $ctrl.fortiViewTypes">\n                <f-fortiview ng-show="$ctrl.selectedView === $ctrl.VIEWS[viewType]"\n                    embedded="::true"\n                    ng-init="fortiViewConfig = $ctrl.VIEWS[viewType]"\n                    type="fortiViewConfig.viewType"\n                    timeframe="fortiViewConfig.timeframe"\n                    visualization="fortiViewConfig.visualization"\n                    compare-by="fortiViewConfig.sortBy"\n                    filters="$ctrl.tableFilters">\n                </f-fortiview>\n            </div>\n            <f-log-view ng-show="!$ctrl.loading && $ctrl.selectedView === $ctrl.VIEWS.LOGS" filters="$ctrl.logFilters"\n                filter-model="$ctrl.logFilterModel" log-type="\'event/wireless\'">\n            </f-log-view>\n        </div>\n    </div>\n</f-dialog>\n\n<link rel="stylesheet" type="text/css" ng-href="{{ \'/ng/wifi/monitor/details/f-wifi-client-details.css\' | cache_path }}">\n<link rel="stylesheet" type="text/css" ng-href="{{ \'/ng/directives/faceted_search/faceted_search.css\' | cache_path }}">\n<link rel="stylesheet" type="text/css" ng-href="{{ \'/ng/log/view/f-log-view.css\' | cache_path }}">\n<link rel="stylesheet" type="text/css" href="/css/app_icons.css">\n')}]),module.exports=path},925:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26),__webpack_require__(30)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(inject,fwebLog){const POLLING_MS=1e3,KEEP_ALIVE_PERIOD=120,MAX_ATTEMPTS_FOR_DATA=60,BAND_24_GHZ="24ghz",BAND_5_GHZ="5ghz",INTERFERENCE_LABELS={dsss:"WiFi, DSSS cordless phone",microwave:"Microwave",continuous_wave:"Video Bridge",fhss:"Bluetooth, FHSS cordless phone",unknown:"unknown"},GRAPHS={SIGNAL:"signal",SIGNAL_SPEC:"signal_spec",DUTY:"duty",DUTY_SPEC:"duty_spec"};class WifiSpectralAnalysis extends inject.Collectable{constructor(state){super(),this.loading=!0,this.running=!1,this.duration=1,this.interferenceLabels=INTERFERENCE_LABELS,this.graphs=GRAPHS,this.showChannels=!1,this.wifiWriteAccess=state.adminHasWritePermission(state.ACCESS_GROUP.WIFI)}$onInit($INJECTABLE$,$http,$scope){return async()=>{try{this.loading=!0,await this.checkAllowedChannels();const res=await $http.get("/api/v2/monitor/wifi/spectrum",{params:{wtp_id:this.ap.wtpID}});let bands=new Map;res.data.results.bands.forEach((b,i)=>{let label="2.4 GHz";b.name.includes("5")&&(label="5 GHz");let band=bands.get(label);return band?band.channels.push({index:i,label:`${b.chan_min}-${b.chan_max}`,start:b.chan_min,end:b.chan_max,allowed:this.channelSet.has(b.chan_min)&&this.channelSet.has(b.chan_max)}):(Object.assign(b,{label:label,channels:[{index:i,label:`${b.chan_min}-${b.chan_max}`,start:b.chan_min,end:b.chan_max,allowed:this.channelSet.has(b.chan_min)&&this.channelSet.has(b.chan_max)}]}),band=b),bands.set(label,band),b}),this.bands=[...bands.values()],this.setDefaultBand()}catch(e){fwebLog.error("Failed to load spectrum data")}finally{this.loading=!1}this.noCompatibleRadios=!this.bands.some(b=>this.hasMonitorRadioForBand(b)),$scope.$watch("$ctrl.selectedBand",async(newVal,oldVal)=>{this.channelWatch&&this.channelWatch(),oldVal&&newVal!==oldVal&&(await this.stop(),this.selectedChannel=this.selectedBand.channels[0]),this.wifiWriteAccess&&(await this.start(),this.channelWatch=$scope.$watch("$ctrl.selectedChannel",async(n,o)=>{o&&n!==o&&(await this.stop(),await this.start())}))})}}checkAllowedChannels($INJECTABLE$,$http){return async()=>{const channels=(await $http.get("/api/v2/monitor/wifi/ap_channels",{params:{country:this.ap.configuredCountry.name,platform_type:this.ap.platformData.platform_type}})).data.results.channel_lists;this.channelSet=new Set;for(const key in channels){const twentyMhz=channels[key]["20MHz"];if(twentyMhz)for(const e of twentyMhz){const chans=e.channels;if(chans)for(const c in chans)this.channelSet.add(parseInt(c))}}}}focus(graph){this.focused===graph?this.focused=null:this.focused=graph}hasMonitorRadioForBand(band){return this.ap.radios.find(r=>{try{if(r.isMonitor&&band.label.includes("2.4"))return r.platformRadioFrequency===BAND_24_GHZ||r.radioFrequency===BAND_24_GHZ;if(r.isMonitor&&band.label.includes("5"))return r.platformRadioFrequency===BAND_5_GHZ||r.radioFrequency===BAND_5_GHZ}catch(e){return!1}})}start($INJECTABLE$,$timeout,$http){return async()=>{let noDataResponses=0;const refresh=async()=>{const start=window.performance.now(),res=await $http.get("/api/v2/monitor/wifi/spectrum",{params:{wtp_id:this.ap.wtpID}}),elapsed=window.performance.now()-start,data=res.data.results.bands[this.selectedChannel.index];if(data.bins.length){let rssi=0,duty=0;const fullData=[],downSampledData=[],sampleRate=this.selectedBandTwoFour()?1:4,newResolution=data.freq_resolution/sampleRate;let i=0;for(let bin of data.bins)0===i&&(rssi=bin.rssi,duty=bin.duty_cycle),(i+1)%sampleRate==0&&(downSampledData.push(Object.assign({},bin,{rssi:Math.round(rssi/sampleRate),duty_cycle:Math.round(duty/sampleRate)})),rssi=0,duty=0),fullData.push(bin),rssi+=bin.rssi,duty+=bin.duty_cycle,i++;this.downSampledData=Object.assign({},data,{freq_resolution:newResolution,bins:downSampledData}),this.data=Object.assign({},data,{bins:fullData}),this.loading=!1}else noDataResponses++;noDataResponses>=MAX_ATTEMPTS_FOR_DATA?this.stop():this.running&&(this.timeout&&($timeout.cancel(this.timeout),this.timeout=null),this.timeout=$timeout(()=>{refresh()},Math.round(POLLING_MS-elapsed)))},start=this.selectedChannel.start,end=this.selectedChannel.end,radio=this.hasMonitorRadioForBand(this.selectedBand),channels=this.selectedBandTwoFour()?[0]:Array(end-start+1).fill().map((_,i)=>start+i);radio&&(this.running=!0,this.loading=!0,await $http.post("/api/v2/monitor/wifi/spectrum/start",{wtp_id:this.ap.wtpID,radio_id:radio.id,duration:KEEP_ALIVE_PERIOD+30,channels:channels}),this.killTimeouts(),this.keepAliveInterval||this.keepAlive(),refresh())}}selectedBandTwoFour(){return this.selectedBand&&this.selectedBand.label.includes("2.4")}keepAlive($INJECTABLE$,$http,$interval){return async()=>{const keepAlive=()=>Promise.all(this.ap.radios.map(r=>$http.post("/api/v2/monitor/wifi/spectrum/keep-alive",{wtp_id:this.ap.wtpID,radio_id:r.id,duration:KEEP_ALIVE_PERIOD+30})));await keepAlive(),this.keepAliveInterval=$interval(keepAlive,1e3*KEEP_ALIVE_PERIOD)}}killTimeouts($INJECTABLE$,$timeout,$interval){return()=>{this.timeout&&($timeout.cancel(this.timeout),this.timeout=null),this.keepAliveInterval&&($interval.cancel(this.keepAliveInterval),this.keepAliveInterval=null)}}stop($INJECTABLE$,$http){return async()=>{this.running=!1,this.loading=!1,this.killTimeouts(),await(()=>this.ap.radios.map(r=>{$http.post("/api/v2/monitor/wifi/spectrum/stop",{wtp_id:this.ap.wtpID,radio_id:r.id})}))()}}ageToDate(seconds){return Date.now()-1e3*seconds}setDefaultBand(){this.selectedBand=this.bands.find(b=>this.hasMonitorRadioForBand(b))||this.bands[0],this.selectedChannel=this.selectedBand.channels[0]}$onDestroy(){this.stop()}}return function(providers,providerLoader){return providers.$compile.component("fWifiSpectralAnalysis",{controller:WifiSpectralAnalysis,templateUrl:__webpack_require__(926),bindings:{ap:"<"}}),providerLoader.initModules([__webpack_require__(927),__webpack_require__(931),__webpack_require__(935),__webpack_require__(938),__webpack_require__(187)])}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},926:function(module,exports){var path="/migadmin/ng/wifi/spectral/f-wifi-spectral-analysis.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<div class="container">\n    <f-dialog dialog-title="\'Spectrum Analysis\' | lang" hide-footer="::true" relative="::true" full-height="::true">\n        <section ng-show="$ctrl.hasMonitorRadioForBand($ctrl.selectedBand) && $ctrl.wifiWriteAccess">\n            <div class="warning-message">\n                <f-icon class="fa-warning"></f-icon>\n                <div class="message-content">\n                    {{::\'AP capabilities will be limited during spectrum analysis.\' | lang}}\n                </div>\n            </div>\n            <div class="warning-message" ng-show="$ctrl.noCompatibleRadios">\n                <f-icon class="fa-warning"></f-icon>\n                <div class="message-content">\n                    {{::\'To use spectrum analysis the AP must have a radio in monitor mode for each band to be analyzed.\' | lang}}\n                </div>\n            </div>\n        </section>\n        <section>\n            <f-field>\n                <field-label>\n                    {{::\'band\' | lang}}\n                </field-label>\n                <field-value>\n                    <f-radio-group>\n                        <input type="radio" ng-repeat-start="band in $ctrl.bands" id="band-{{$index}}" ng-value="::band"\n                            ng-disabled="::!$ctrl.hasMonitorRadioForBand(band) || !$ctrl.wifiWriteAccess"\n                            ng-model="$ctrl.selectedBand">\n                        <label for="band-{{$index}}" ng-repeat-end f-tip-target>\n                            <span ng-class="::{\'tooltip-hint\': !$ctrl.hasMonitorRadioForBand(band)}">\n                                {{::band.label}}\n                                <span f-tip ng-if="::!$ctrl.hasMonitorRadioForBand(band)">\n                                    {{::\'A {0} radio must be in monitor mode to perform spectrum analysis.\' | lang: [band.label]}}\n                                </span>\n                            </span>\n                        </label>\n                    </f-radio-group>\n                </field-value>\n            </f-field>\n            <f-field>\n                <field-label>\n                    {{::\'channels\' | lang}}\n                </field-label>\n                <field-value>\n                    <f-radio-group>\n                        <input type="radio" ng-repeat-start="channel in $ctrl.selectedBand.channels"\n                            id="channels-{{$index}}" ng-value="::channel"\n                            ng-disabled="!$ctrl.hasMonitorRadioForBand($ctrl.selectedBand) || !$ctrl.wifiWriteAccess"\n                            ng-model="$ctrl.selectedChannel">\n                        <label for="channels-{{$index}}" ng-repeat-end f-tip-target>\n                            <span ng-class="::{\'tooltip-hint\': !channel.allowed}">\n                                <span>\n                                    {{::channel.label}}\n                                </span>\n                                <span f-tip ng-if="::!channel.allowed">\n                                    {{::\'Some or all of the channels in this range will not be scanned due to AP region.\' | lang}}\n                                </span>\n                                <f-icon class="fa-warning" ng-if="!channel.allowed"></f-icon>\n                            </span>\n                        </label>\n                    </f-radio-group>\n                </field-value>\n            </f-field>\n            <f-field>\n                <field-label>\n                    {{::\'X-Axis\' | lang}}\n                </field-label>\n                <field-value>\n                    <f-radio-group>\n                        <input type="radio" name="graph-unit" radio-label="{{:: \'MHz\' | lang }}" ng-value="::false"\n                            ng-model="$ctrl.showChannels"\n                            ng-disabled="!$ctrl.hasMonitorRadioForBand($ctrl.selectedBand) || !$ctrl.wifiWriteAccess"\n                            required>\n                        <input type="radio" name="graph-unit" radio-label="{{:: \'Channels\' | lang }}" ng-value="::true"\n                            ng-model="$ctrl.showChannels"\n                            ng-disabled="!$ctrl.hasMonitorRadioForBand($ctrl.selectedBand) || !$ctrl.wifiWriteAccess"\n                            required>\n                    </f-radio-group>\n                </field-value>\n            </f-field>\n            <hr>\n            <f-field>\n                <field-label>\n                </field-label>\n                <field-value>\n                    <button class="button"\n                        ng-disabled="!$ctrl.running || $ctrl.loading || !$ctrl.hasMonitorRadioForBand($ctrl.selectedBand)"\n                        ng-click="$ctrl.stop()">\n                        <f-icon class="fa-stop"></f-icon>\n                        <span>\n                            {{::\'Stop\' | lang}}\n                        </span>\n                    </button>\n                    <button class="button"\n                        ng-disabled="!$ctrl.hasMonitorRadioForBand($ctrl.selectedBand) || $ctrl.loading"\n                        ng-click="$ctrl.start()">\n                        <f-icon class="fa-reset"></f-icon>\n                        <span>\n                            {{::\'Restart\' | lang}}\n                        </span>\n                    </button>\n                </field-value>\n            </f-field>\n        </section>\n    </f-dialog>\n    <div ng-if="!$ctrl.noCompatibleRadios && $ctrl.wifiWriteAccess">\n        <label class="section-title graph-title">\n            <h2>{{::\'Analysis\' | lang}}</h2>\n        </label>\n        <section ng-if="!$ctrl.loading">\n            <div class="graph-container">\n                <div class="graph" ng-show="$ctrl.focused == null || $ctrl.focused === $ctrl.graphs.SIGNAL">\n                    <f-wifi-fft-graph class="plot" channels="$ctrl.showChannels" band="$ctrl.data"\n                        ng-class="{\'focused\': $ctrl.focused === $ctrl.graphs.SIGNAL}"></f-wifi-fft-graph>\n                </div>\n            </div>\n            <div class="graph-container">\n                <div class="graph" ng-show="$ctrl.focused == null || $ctrl.focused === $ctrl.graphs.SIGNAL_SPEC">\n                    <f-wifi-swept-fft-graph class="plot" channels="$ctrl.showChannels" band="$ctrl.downSampledData"\n                        ng-class="{\'focused\': $ctrl.focused === $ctrl.graphs.SIGNAL_SPEC}"></f-wifi-swept-fft-graph>\n                </div>\n            </div>\n            <div class="graph-container">\n                <div class="graph" ng-show="$ctrl.focused == null || $ctrl.focused === $ctrl.graphs.DUTY">\n                    <f-wifi-fft-duty-graph class="plot" channels="$ctrl.showChannels" band="$ctrl.data"\n                        ng-class="{\'focused\': $ctrl.focused === $ctrl.graphs.DUTY}"></f-wifi-fft-duty-graph>\n                </div>\n            </div>\n            <div class="graph-container">\n                <div class="graph" ng-show="$ctrl.focused == null || $ctrl.focused === $ctrl.graphs.DUTY_SPEC">\n\n                    <f-wifi-swept-fft-duty-graph class="plot" channels="$ctrl.showChannels" band="$ctrl.downSampledData"\n                        ng-class="{\'focused\': $ctrl.focused === $ctrl.graphs.DUTY_SPEC}"></f-wifi-swept-fft-duty-graph>\n                </div>\n            </div>\n        </section>\n        <section ng-if="$ctrl.loading" class="flex-centered">\n            <f-icon class="fa-loading"></f-icon>\n        </section>\n        <label class="section-title interference-title">\n            <h2>{{::\'Detected Interference\' | lang}}</h2>\n        </label>\n        <section>\n            <table class="interference-table table bordered full-width full-width-field">\n                <thead>\n                    <tr>\n                        <th>{{::\'Type\' | lang}}</th>\n                        <th>{{::\'Frequency\' | lang}}</th>\n                        <th>{{::\'Last Detected\' | lang}}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr ng-repeat="interference in $ctrl.data.interferences" ng-if="!$ctrl.loading">\n                        <td class="h-align-center">{{::$ctrl.interferenceLabels[interference.type] | lang}}</td>\n                        <td class="h-align-center">{{::interference.frequency}} MHz</td>\n                        <td class="h-align-center">{{::$ctrl.ageToDate(interference.age) | fDateTime}}</td>\n                    </tr>\n                    <tr class="loading" ng-if="$ctrl.loading || !$ctrl.data.interferences.length">\n                        <td class="h-align-center" colspan="3">\n                            <span>\n                                <f-icon class="fa-loading"></f-icon>\n                                <span class="scanning" ng-if="!$ctrl.data.interferences.length">\n                                    {{::\'Scanning\' | lang}}\n                                </span>\n                            </span>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </section>\n    </div>\n</div>')}]),module.exports=path},927:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(inject){class WifiFftGraph extends inject.Collectable{constructor(lang){super(),this.chartID=Math.round(1e3*Math.random()),this.data=[],this.freqMin=0,this.freqMax=0,this.chanMin=0,this.chanMax=0,this.freqResolution=0,this.title=lang("Signal Interference"),this.x={domain:()=>{const range=this.freqMax-this.freqMin;return Array(range/5*this.freqResolution).fill().map((_,idx)=>idx)},tickFilter:(d,i,n)=>{const res=this.freqResolution;let scale=2,shift=0,excluded=[];return this.channels&&(this.isTwoFour?(excluded=[0,res,n.length-res,n.length-1],scale=1,shift=0):(scale=4,shift=-2)),!((i+res*shift)%(res*scale)||excluded.includes(i))},tickFormat:(d,i)=>this.channels?this.isTwoFour?this.chanMin+i:this.chanMin+4*i:5*Math.floor(d/this.freqResolution)+this.freqMin},this.y={label:lang("dBm"),domain:()=>[-100,-20]},this.z={domain:()=>[0,25,50,75,100]}}$onInit($INJECTABLE$,$scope){return()=>{$scope.$watch("$ctrl.band",(newVal,oldVal)=>{newVal!==oldVal&&this.parse(newVal)}),$scope.$watch("$ctrl.channels",()=>{this.refresh&&this.refresh()})}}parse(d){try{this.freqMin=d.freq_min,this.freqMax=d.freq_max,this.chanMin=d.chan_min,this.chanMax=d.chan_max,this.freqResolution=d.freq_resolution,this.isTwoFour=d.name.includes("2.4"),this.data=d.bins.map((e,i)=>({x:i,y:e.rssi,z:e.age,generation:e.generation,age:e.age}))}catch(e){}}}return function(providers,providerLoader){return providers.$compile.component("fWifiFftGraph",{controller:WifiFftGraph,templateUrl:__webpack_require__(928),bindings:{band:"<",channels:"<"}}),providerLoader.initModules([__webpack_require__(929)])}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},928:function(module,exports){var path="/migadmin/ng/wifi/spectral/f-wifi-fft-graph/f-wifi-fft-graph.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<f-wifi-scatter-heat-map\n    x="$ctrl.x"\n    y="$ctrl.y"\n    z="$ctrl.z"\n    label="$ctrl.title"\n    data="$ctrl.data"\n    refresh="$ctrl.refresh"\n></f-wifi-scatter-heat-map>')}]),module.exports=path},929:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26),__webpack_require__(48)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(inject,d3){const RADIUS=3,MAX_SAMPLES=30;class WifiScatterHeatMap extends inject.Collectable{constructor($element){super(),this.chartID=Math.round(1e3*Math.random()),this.element=$element[0],this.data=[],this.loading=!0,this.numDraws=0,this.hitMap=new Map}$onInit($INJECTABLE$,$scope){return()=>{this.refresh=(()=>{this.draw(),this.redraw()}),this.draw(),$scope.$watch("$ctrl.data",(newVal,oldVal)=>{newVal&&Array.isArray(newVal)&&newVal!==oldVal&&(this.data=newVal,this.loading&&this.draw(),this.redraw())})}}draw($INJECTABLE$,lang){return()=>{const target=`#chart-${this.chartID}`;if(!this.element.querySelector(target))return;this.loading=!1;const margin=this.margin={top:50,right:80,bottom:40,left:40};this.x.label&&(margin.bottom+=10),this.y.label&&(margin.left+=10);const rect=this.element.getBoundingClientRect();if(rect.width<=0||rect.height<=0)return;const width=this.width=Math.round(rect.width-margin.left-margin.right),height=this.height=Math.round(rect.height-margin.top-margin.bottom);d3.select(target).selectAll("svg").remove(),d3.select(target).selectAll("canvas").remove();const svg=this.svg=d3.select(target).append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform",`translate(${margin.left}, ${margin.top})`);svg.append("rect").attr("x",0).attr("y",0).attr("width",width).attr("height",height).attr("fill","black");const canvas=this.canvas=d3.select(target).node().appendChild(document.createElement("canvas"));this.context=canvas.getContext("2d"),canvas.style.position="absolute",canvas.style.top=`${margin.top}px`,canvas.style.left=`${margin.left}px`,canvas.width=width,canvas.height=height;const lineCanvas=this.lineCanvas=d3.select(target).node().appendChild(document.createElement("canvas"));this.lineContext=lineCanvas.getContext("2d"),lineCanvas.style.position="absolute",lineCanvas.style.top=`${margin.top}px`,lineCanvas.style.left=`${margin.left}px`,lineCanvas.width=width,lineCanvas.height=height,lineCanvas.style.zIndex=10,this.label&&svg.append("text").attr("transform",`translate(${width/2}, -20)`).style("font-size","1em").style("text-anchor","middle").text(this.label);const x=this.xScale=d3.scaleBand().domain(this.x.domain()).range([0,width]),y=this.yScale=d3.scaleLinear().domain(this.y.domain()).range([height,0]),xAxis=d3.axisBottom(x).tickSize(-height).tickValues(x.domain().filter((d,i,n)=>{let included=!0;return this.x.tickFilter&&(included=this.x.tickFilter(d,i,n)),0!==i&&i!==n.length-1||(included=!1),included})).tickFormat(this.x.tickFormat||(d=>d));svg.append("g").attr("class","x").attr("transform",`translate(0, ${height})`).call(xAxis),this.x.label&&svg.append("text").attr("transform",`translate(${width/2}, ${height+margin.top})`).style("font-size","0.9em").style("text-anchor","middle").text(this.x.label);const yAxis=d3.axisLeft(y).ticks(5).tickSize(-width).tickFormat(this.y.tickFormat||(d=>d));svg.append("g").attr("class","y").call(yAxis),this.y.label&&svg.append("text").attr("transform","rotate(-90)").attr("y",0-margin.left+5).attr("x",0-height/2).attr("dy","1em").style("font-size","0.9em").style("text-anchor","middle").text(this.y.label);const z=this.zScale=d3.scaleLinear().domain(this.z.domain()).range(["black","blue","green","yellow","red"]);svg.append("defs").append("linearGradient").attr("id","linear-gradient2").attr("gradientTransform","rotate(90)").selectAll("stop").data(Array(100).fill().map((t,i,n)=>(t=n.length-i,{offset:`${100*i/n.length}%`,color:z(t)}))).enter().append("stop").attr("offset",d=>d.offset).attr("stop-color",d=>d.color),svg.append("rect").attr("transform",`translate(${width+25}, 15)`).attr("width",20).attr("height",height-30).style("fill","url(#linear-gradient2)"),svg.append("text").attr("transform",`translate(${width+37}, ${height})`).style("font-size","0.9em").style("text-anchor","middle").text(lang("Transient").toString()),svg.append("text").attr("transform",`translate(${width+37}, 10)`).style("font-size","0.9em").style("text-anchor","middle").text(lang("Persistent").toString()),svg.selectAll("g.tick line").attr("stroke-width","1px").attr("stroke","#c0c0c0").style("opacity",.5),svg.selectAll(".domain").attr("stroke","#545454").attr("stroke-width","2px"),svg.selectAll("g.x g.tick text").attr("dy","1.25em"),svg.select("g.y g.tick:last-child > line").remove()}}redraw(){if(!this.canvas||!this.svg)return;if(!this.offScreenDensity||!this.offScreenCanvas){const offScreenDensity=this.offScreenDensity=document.createElement("canvas");offScreenDensity.style.display="none",offScreenDensity.width=this.width,offScreenDensity.height=this.height,offScreenDensity.filter="blur(1px)";const c2=this.offScreenCanvas=document.createElement("canvas");c2.style.display="none",c2.width=this.width,c2.height=this.height}const lineContext=this.lineContext,densityContext=this.offScreenDensity.getContext("2d"),offScreenContext=this.offScreenCanvas.getContext("2d");lineContext.clearRect(0,0,this.width,this.height),lineContext.globalAlpha=.75,densityContext.globalAlpha=Math.round(255/MAX_SAMPLES)/255;let lastPoint=null;for(const d of this.data){const key=`${d.x}`,lastHit=this.hitMap.get(key),stale=lastHit&&lastHit.generation===d.generation,noData=-1===d.age,x=Math.round(this.xScale(d.x)),y=Math.round(this.yScale(d.y));lineContext.beginPath(),lastPoint?lineContext.moveTo(lastPoint.x,lastPoint.y):lineContext.moveTo(x,y),lineContext.lineTo(x,y),lineContext.strokeStyle="white",lineContext.lineWidth=1,lineContext.stroke(),lastPoint={x:x,y:y},stale||noData||(densityContext.beginPath(),densityContext.arc(x,y,RADIUS,0,2*Math.PI,!0),densityContext.fill(),offScreenContext.beginPath(),offScreenContext.arc(x,y,1,0,2*Math.PI,!0),offScreenContext.fillStyle="white",offScreenContext.fill(),this.hitMap.set(key,d))}this.numDraws++;let densityImage=densityContext.getImageData(0,0,this.width,this.height);const densityPixels=densityImage.data;let offScreenImage=offScreenContext.getImageData(0,0,this.width,this.height);const offScreenPixels=offScreenImage.data,cycleOpacityDrop=Math.floor(255/MAX_SAMPLES),scalingDivisor=Math.log(1e4),opacityColorScale=d3.scaleLinear().domain([0,.01,.4,.6,.9]).range(["black","blue","green","yellow","red"]);for(let i=0;i<densityPixels.length;i+=4){const r=offScreenPixels[i],g=offScreenPixels[i+1],b=offScreenPixels[i+2],brightnessScaling=1+Math.log(1-Math.min(densityPixels[i+3]/255,.99))/scalingDivisor,reduceOpacityPer=Math.floor(1/(cycleOpacityDrop/MAX_SAMPLES)*brightnessScaling),opacityReduce=this.numDraws%reduceOpacityPer?0:1;if(densityPixels[i+3]=Math.min(Math.max(0,densityPixels[i+3]-opacityReduce),255),0!==r&&0!==g&&0!==b){const opacity=Math.min(Math.max(densityPixels[i+3],0),255)/255,color=d3.rgb(opacityColorScale(opacity));offScreenPixels[i]=color.r,offScreenPixels[i+1]=color.g,offScreenPixels[i+2]=color.b}else densityPixels[i+3]=0,offScreenPixels[i+3]=0}densityContext.putImageData(densityImage,0,0),this.context.putImageData(offScreenImage,0,0)}}return function(providers){providers.$compile.component("fWifiScatterHeatMap",{controller:WifiScatterHeatMap,templateUrl:__webpack_require__(930),bindings:{x:"<",y:"<",z:"<",data:"<",label:"<",refresh:"="}})}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},930:function(module,exports){var path="/migadmin/ng/wifi/spectral/scatter-heat-map/f-wifi-scatter-heat-map.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<div id="chart-{{$ctrl.chartID}}"></div>\n')}]),module.exports=path},931:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(inject){class WifiFftDutyGraph extends inject.Collectable{constructor(lang){super(),this.chartID=Math.round(1e3*Math.random()),this.data=[],this.freqMin=0,this.freqMax=0,this.chanMin=0,this.chanMax=0,this.freqResolution=0,this.title=lang("Duty Cycle"),this.x={domain:()=>{const range=this.freqMax-this.freqMin;return Array(range/5*this.freqResolution).fill().map((_,idx)=>idx)},tickFilter:(d,i,n)=>{const res=this.freqResolution;let scale=2,shift=0,excluded=[];return this.channels&&(this.isTwoFour?(excluded=[0,res,n.length-res,n.length-1],scale=1,shift=0):(scale=4,shift=-2)),!((i+res*shift)%(res*scale)||excluded.includes(i))},tickFormat:(d,i)=>this.channels?this.isTwoFour?this.chanMin+i:this.chanMin+4*i:5*Math.floor(d/this.freqResolution)+this.freqMin},this.y={domain:()=>[0,100],tickFormat:d=>`${d}%`}}$onInit($INJECTABLE$,$scope){return()=>{$scope.$watch("$ctrl.band",newVal=>{newVal&&this.parse(newVal)}),$scope.$watch("$ctrl.channels",()=>{this.refresh&&this.refresh()})}}parse(d){try{this.freqMin=d.freq_min,this.freqMax=d.freq_max,this.chanMin=d.chan_min,this.chanMax=d.chan_max,this.freqResolution=d.freq_resolution,this.isTwoFour=d.name.includes("2.4"),this.data=d.bins.map((e,i)=>({x:i,y:e.duty_cycle}))}catch(e){}}}return function(providers,providerLoader){return providers.$compile.component("fWifiFftDutyGraph",{controller:WifiFftDutyGraph,templateUrl:__webpack_require__(932),bindings:{band:"<",channels:"<"}}),providerLoader.initModules([__webpack_require__(933)])}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},932:function(module,exports){var path="/migadmin/ng/wifi/spectral/f-wifi-fft-duty-graph/f-wifi-fft-duty-graph.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<f-wifi-line-graph\n    x="$ctrl.x"\n    y="$ctrl.y"\n    label="$ctrl.title"\n    data="$ctrl.data"\n    refresh="$ctrl.refresh"\n></f-wifi-line-graph>')}]),module.exports=path},933:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26),__webpack_require__(48)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(inject,d3){class WifiLineGraph extends inject.Collectable{constructor($element){super(),this.chartID=Math.round(1e3*Math.random()),this.element=$element[0],this.cache=[],this.loading=!0,this.hits={}}$onInit($INJECTABLE$,$scope){return()=>{this.refresh=(()=>{this.draw(),this.redraw()}),this.draw(),$scope.$watch("$ctrl.data",newVal=>{newVal&&Array.isArray(newVal)&&(this.cache=newVal,this.loading&&this.draw(),this.redraw())})}}draw(){const target=`#chart-${this.chartID}`;if(!this.element.querySelector(target))return;this.loading=!1;const margin=this.margin={top:50,right:80,bottom:40,left:50};this.x.label&&(margin.bottom+=10);const rect=this.element.getBoundingClientRect();if(rect.width<=0||rect.height<=0)return;const width=this.width=rect.width-margin.left-margin.right,height=this.height=rect.height-margin.top-margin.bottom;d3.select(target).selectAll("svg").remove();const svg=this.svg=d3.select(target).append("svg").attr("class","svg-graph").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform",`translate(${margin.left}, ${margin.top})`);this.label&&svg.append("text").attr("transform",`translate(${width/2}, -20)`).style("font-size","1em").style("text-anchor","middle").text(this.label);const x=this.xScale=d3.scaleBand().domain(this.x.domain()).range([0,width]),y=this.yScale=d3.scaleLinear().domain(this.y.domain()).range([height,0]),xAxis=d3.axisBottom(x).tickSize(-height).tickValues(x.domain().filter((d,i,n)=>{let included=!0;return this.x.tickFilter&&(included=this.x.tickFilter(d,i,n)),0===i&&(included=!1),included})).tickFormat(this.x.tickFormat||(d=>d));svg.append("g").attr("class","x").attr("transform",`translate(0, ${height})`).call(xAxis),this.x.label&&svg.append("text").attr("transform",`translate(${width/2}, ${height+margin.top})`).style("font-size","0.9em").style("text-anchor","middle").text(this.x.label);const yAxis=d3.axisLeft(y).ticks(5).tickSize(-width).tickFormat(this.y.tickFormat||(d=>d));svg.append("g").attr("class","y").call(yAxis),this.y.label&&svg.append("text").attr("transform","rotate(-90)").attr("y",0-margin.left+5).attr("x",0-height/2).attr("dy","1em").style("font-size","0.9em").style("text-anchor","middle").text(this.y.label),svg.selectAll("g.tick line").attr("stroke-width","1px").attr("stroke","#D9D9D9"),svg.selectAll(".domain").attr("stroke","#545454").attr("stroke-width","2px"),svg.selectAll("g.x g.tick text").attr("dy","1.25em"),svg.select("g.y g.tick:last-child > line").remove()}redraw(){this.cache&&this.svg&&(this.svg.selectAll(".graph-line").remove(),this.svg.append("path").datum(this.cache).attr("class","graph-line").attr("fill","none").attr("stroke","steelblue").attr("stroke-width",1.5).attr("d",d3.line().x(d=>this.xScale(d.x)).y(d=>this.yScale(d.y))))}}return function(providers){providers.$compile.component("fWifiLineGraph",{controller:WifiLineGraph,templateUrl:__webpack_require__(934),bindings:{x:"<",y:"<",data:"<",label:"<",refresh:"="}})}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},934:function(module,exports){var path="/migadmin/ng/wifi/spectral/line-graph/f-wifi-line-graph.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<div id="chart-{{$ctrl.chartID}}"></div>\n')}]),module.exports=path},935:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(inject){const NUM_SWEEPS=60;class WifiSweptFftGraph extends inject.Collectable{constructor(lang){super(),this.chartID=Math.round(1e3*Math.random()),this.cachedData=[],this.data=[],this.freqMin=0,this.freqMax=0,this.chanMin=0,this.chanMax=0,this.freqResolution=0,this.title=lang("Signal Interference Spectrogram"),this.x={domain:()=>{const range=this.freqMax-this.freqMin;return Array(range/5*this.freqResolution).fill().map((_,idx)=>idx)},tickFilter:(d,i,n)=>{const res=this.freqResolution;let scale=2,shift=0,excluded=[];return this.channels&&(this.isTwoFour?(excluded=[0,res,n.length-res,n.length-1],scale=1,shift=0):(scale=4,shift=-2)),!((i+res*shift)%(res*scale)||excluded.includes(i))},tickFormat:(d,i)=>this.channels?this.isTwoFour?this.chanMin+i:this.chanMin+4*i:5*Math.floor(d/this.freqResolution)+this.freqMin},this.y={label:lang("time"),domain:()=>[...Array(NUM_SWEEPS).keys()],tickFilter:(d,i)=>0===i||!((i+1)%10),tickFormat:d=>d>0?`-${d+1}s`:d},this.z={label:"dBm",domain:()=>[-100,-80,-60,-40,-20]}}$onInit($INJECTABLE$,$scope){return()=>{$scope.$watch("$ctrl.band",newVal=>{newVal&&this.parse(newVal)}),$scope.$watch("$ctrl.channels",()=>{this.refresh&&this.refresh()})}}parse(data){try{this.freqMin=data.freq_min,this.freqMax=data.freq_max,this.chanMin=data.chan_min,this.chanMax=data.chan_max,this.freqResolution=data.freq_resolution,this.isTwoFour=data.name.includes("2.4"),this.data=data.bins.map((b,i)=>({x:i,z:b.rssi}))}catch(e){}}}return function(providers,providerLoader){return providers.$compile.component("fWifiSweptFftGraph",{controller:WifiSweptFftGraph,templateUrl:__webpack_require__(936),bindings:{band:"<",channels:"<"}}),providerLoader.initModules([__webpack_require__(460)])}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},936:function(module,exports){var path="/migadmin/ng/wifi/spectral/f-wifi-swept-fft-graph/f-wifi-swept-fft-graph.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<f-wifi-heat-map\n    x="$ctrl.x"\n    y="$ctrl.y"\n    z="$ctrl.z"\n    label="$ctrl.title"\n    data="$ctrl.data"\n    refresh="$ctrl.refresh"\n></f-wifi-heat-map>')}]),module.exports=path},937:function(module,exports){var path="/migadmin/ng/wifi/spectral/heat-map/f-wifi-heat-map.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<div id="chart-{{$ctrl.chartID}}"></div>\n')}]),module.exports=path},938:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(inject){const NUM_SWEEPS=60;class WifiSweptFftDutyGraph extends inject.Collectable{constructor(lang){super(),this.chartID=Math.round(1e3*Math.random()),this.cachedData=[],this.data=[],this.freqMin=0,this.freqMax=0,this.chanMin=0,this.chanMax=0,this.freqResolution=0,this.title=lang("Duty Cycle Spectrogram"),this.x={domain:()=>{const range=this.freqMax-this.freqMin;return Array(range/5*this.freqResolution).fill().map((_,idx)=>idx)},tickFilter:(d,i,n)=>{const res=this.freqResolution;let scale=2,shift=0,excluded=[];return this.channels&&(this.isTwoFour?(excluded=[0,res,n.length-res,n.length-1],scale=1,shift=0):(scale=4,shift=-2)),!((i+res*shift)%(res*scale)||excluded.includes(i))},tickFormat:(d,i)=>this.channels?this.isTwoFour?this.chanMin+i:this.chanMin+4*i:5*Math.floor(d/this.freqResolution)+this.freqMin},this.y={label:lang("time"),domain:()=>[...Array(NUM_SWEEPS).keys()],tickFilter:(d,i)=>0===i||!((i+1)%10),tickFormat:d=>d>0?`-${d+1}s`:d},this.z={label:"%",domain:()=>[0,25,50,75,100]}}$onInit($INJECTABLE$,$scope){return()=>{$scope.$watch("$ctrl.band",newVal=>{newVal&&this.parse(newVal)}),$scope.$watch("$ctrl.channels",()=>{this.refresh&&this.refresh()})}}parse(data){try{this.freqMin=data.freq_min,this.freqMax=data.freq_max,this.chanMin=data.chan_min,this.chanMax=data.chan_max,this.freqResolution=data.freq_resolution,this.isTwoFour=data.name.includes("2.4"),this.data=data.bins.map((b,i)=>({x:i,z:b.duty_cycle}))}catch(e){}}}return function(providers,providerLoader){return providers.$compile.component("fWifiSweptFftDutyGraph",{controller:WifiSweptFftDutyGraph,templateUrl:__webpack_require__(939),bindings:{band:"<",channels:"<"}}),providerLoader.initModules([__webpack_require__(460)])}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},939:function(module,exports){var path="/migadmin/ng/wifi/spectral/f-wifi-swept-fft-duty-graph/f-wifi-swept-fft-duty-graph.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<f-wifi-heat-map\n    x="$ctrl.x"\n    y="$ctrl.y"\n    z="$ctrl.z"\n    label="$ctrl.title"\n    data="$ctrl.data"\n    refresh="$ctrl.refresh"\n></f-wifi-heat-map>')}]),module.exports=path},943:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26),__webpack_require__(49),__webpack_require__(27),__webpack_require__(31)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(inject,fPersist,notify,fDom){const PROBE_VLAN_URL="/api/v2/monitor/wifi/vlan-probe",INTERFACE_URL="/api/v2/cmdb/system/interface",VIEW_ALL_STORAGE_KEY="vlan_view_all",SOURCE_ID={INTERFACE:"firewallInterfaces"};const component={controller:class extends inject.Collectable{$onInit($INJECTABLE$,$http,lang,csfTopology){return()=>{this.fortigate=this.fortigate||csfTopology.thisFortigate,this.viewAll=!0,this.newVlanProbe=!0,this.probe_in_progress=!0,this.ap_interface=0,this.vlanProbeParams={timeout:5,retries:10,start_vlan_id:1,end_vlan_id:10},this.setupmuTable(),this.initSource()}}$onDestroy($INJECTABLE$,$timeout){return()=>{$timeout.cancel(this.fetchTimeoutPromise)}}initSource(){const start=this.vlanProbeParams.start_vlan_id,end=this.vlanProbeParams.end_vlan_id,length=Math.abs(end-start)+1;this.allSource=Array.from(Array(length),(value,index)=>({vlan_id:start+index,interface:"",available:!1,subnet:"",ap_interface:""})),this.availableSource=[],this.source=this.allSource}pollForUpdates($INJECTABLE$,$timeout){return async()=>{await this.getVlanProbeResult(),this.probe_in_progress?this.fetchTimeoutPromise=$timeout(async()=>await this.pollForUpdates(),3e3):await this.getVlanProbleResult()}}async getVlanProbeResult(){const result=await this.vlanProbeFetch();result.forEach(entry=>{const vlan=Object.assign(entry,{available:!0});this.updateEntry(vlan)}),this.availableSource=result.map(entry=>Object.assign(entry,{available:!0}))}updateEntry(newEntry){const row=this.instance.getCurrentRows().find(value=>value.entry.vlan_id===newEntry.vlan_id);row&&!row.entry.available&&row.updateEntry(newEntry)}vlanProbeFetch($INJECTABLE$,$http){return async()=>{const params={wtp:this.ap,ap_interface:this.ap_interface},vlanRes=await $http.get(PROBE_VLAN_URL,{csfProxy:this.fortigate,params:params}),interfaceRes=await $http.get(INTERFACE_URL,{csfProxy:this.fortigate});return this.success(vlanRes,interfaceRes)}}showAvailable(availableOnly){this.source=availableOnly?this.availableSource:this.allSource}success(vlanRes,interfaceRes){const vlanArray=vlanRes.data.results.results;this.probe_in_progress=vlanRes.data.results.probe_in_progress;const interfaceArray=interfaceRes.data.results;return vlanArray.map(vlanInfo=>{const vlanInterface=interfaceArray.find(entry=>entry.vlanid===vlanInfo.vlan_id)||{};return vlanInfo.interface=vlanInterface.q_origin_key,vlanInfo})}set viewAll(viewAll){fPersist.put(VIEW_ALL_STORAGE_KEY,viewAll),this.showAvailable(!viewAll)}get viewAll(){return!!fPersist.get(VIEW_ALL_STORAGE_KEY)}startProbe($INJECTABLE$,$http,lang){return async()=>{try{this.initSource();const params=Object.assign(this.vlanProbeParams,{wtp:this.ap,ap_interface:this.ap_interface});await $http.post(`${PROBE_VLAN_URL}/start`,params,{csfProxy:this.fortigate}),this.newVlanProbe=!1,this.probe_in_progress=!0,this.pollForUpdates()}catch(e){const msg="Failed to start VLAN probe.";notify.post(lang(msg),notify.LEVEL.ERROR)}}}stopProbe($INJECTABLE$,$http,lang){return async()=>{try{const params={wtp:this.ap,ap_interface:this.ap_interface};await $http.post(`${PROBE_VLAN_URL}/stop`,params,{csfProxy:this.fortigate}),await this.getVlanProbeResult()}catch(e){const msg="Failed to stop VLAN probe.";notify.post(lang(msg),notify.LEVEL.ERROR)}}}retry($INJECTABLE$,lang){return async()=>{try{await this.getVlanProbeResult();const msg=lang("Reloaded VLAN Data");notify.post(msg,notify.LEVEL.SUCCESS)}catch(e){const msg=lang("Failed to reload VLAN data.");notify.post(msg,notify.LEVEL.ERROR)}}}newProbe(){this.newVlanProbe=!0}getOmniselectProxySourceID(sourceID){return this.fortigate.getOmniselectProxySourceID(sourceID)}setupmuTable($INJECTABLE$,lang){const settings={defaultSortColumn:"vlan_id",columns:[{id:"vlan_id",langKey:"VLAN ID",type:"number"},{id:"interface",langKey:"Interface",type:"omniselect",cellValueFunction:entry=>{if(entry.interface)return{q_origin_key:entry.interface,datasource:this.getOmniselectProxySourceID(SOURCE_ID.INTERFACE)}}},{id:"available",langKey:"Available",cellValueFunction:entry=>entry.available?lang("Available"):lang("Not Available"),cellFormatter:(entry,column,value)=>{const iconClass=entry.available?"fa-enabled":"fa-disabled";return fDom.elem("div",null,{children:[fDom.elem("f-icon",{className:iconClass}),fDom.elem("span",{textContent:value})]})}},{id:"subnet",langKey:"Subnet",type:"ip-collection"},{id:"ap_interface",langKey:"AP Interface"}]};return()=>{this.settings=settings}}},bindings:{ap:"<",fortigate:"<"},templateUrl:__webpack_require__(944)},modules=[__webpack_require__(945)];return(providers,loader)=>(providers.$compile.component("fProbeVlan",component),loader.initModules(modules))}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},944:function(module,exports){var path="/migadmin/ng/wifi/vlan-probe/f-probe-vlan.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<section ng-show="$ctrl.newVlanProbe">\n    <f-field>\n        <field-label f-lang="Probe Retries"></field-label>\n        <field-value>\n            <input ng-model="$ctrl.vlanProbeParams.retries"\n                type="number"\n                min="1"\n                max="10"\n                required>\n        </field-value>\n    </f-field>\n    <f-field>\n        <field-label f-lang="Timeout"></field-label>\n        <field-value>\n            <input ng-model="$ctrl.vlanProbeParams.timeout"\n                type="number"\n                min="1"\n                max="60"\n                required>\n            <span>{{ ::\'seconds\' | lang }}</span>\n        </field-value>\n    </f-field>\n    <f-field>\n        <field-label f-lang="VLAN Range"></field-label>\n        <field-value>\n            <input ng-model="$ctrl.vlanProbeParams.start_vlan_id"\n                min="1"\n                max="4095"\n                type="number"\n                required>\n            <span>{{ ::\'to\' | lang }}</span>\n            <input ng-model="$ctrl.vlanProbeParams.end_vlan_id"\n                type="number"\n                min="1"\n                max="4095"\n                required>\n        </field-value>\n    </f-field>\n    <div>\n        <button class="primary start-probe-button" ng-click="$ctrl.startProbe()">\n            {{ ::\'start\' | lang }}\n        </button>\n    </div>\n</section>\n<f-mutable\n    ng-show = "!$ctrl.newVlanProbe"\n    source="$ctrl.source"\n    settings="$ctrl.settings"\n    instance="$ctrl.instance"\n    context-menu="::true">\n    <f-probe-vlan-menu\n        class="menu-bar-component"\n        probe-vlan="$ctrl"\n        view-all="$ctrl.viewAll">\n    </f-probe-vlan-menu>\n</f-mutable>\n\n<link rel="stylesheet" type="text/css" ng-href="{{ \'/ng/wifi/vlan-probe/f-probe-vlan.css\' | cache_path }}">')}]),module.exports=path},945:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=(inject=>{class ProbeVlanMenu extends inject.Collectable{$onInit($INJECTABLE$,state){return()=>{this.state=state}}stop(){this.probeVlan.stopProbe()}newProbe(){this.probeVlan.newProbe()}retry(){this.probeVlan.retry()}}return providers=>{providers.$compile.component("fProbeVlanMenu",{controller:ProbeVlanMenu,bindings:{probeVlan:"<",viewAll:"="},templateUrl:__webpack_require__(946)})}}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},946:function(module,exports){var path="/migadmin/ng/wifi/vlan-probe/f-probe-vlan-menu.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<div class="left-menu-items">\n    <div f-menu-item-button click="$ctrl.newProbe()">\n        <f-icon class="fa-arrow-left"></f-icon>\n        <span>{{ ::\'New Probe\' | lang }}</span>\n    </div>\n    <div ng-show="$ctrl.probeVlan.probe_in_progress" f-menu-item-button click="$ctrl.stop()">\n        <span>{{ ::\'Stop\' | lang }}</span>\n    </div>\n    <div f-menu-item-button click="$ctrl.retry()">\n        <f-icon class="fa-refresh"></f-icon>\n        <span>{{ ::\'Retry\' | lang }}</span>\n    </div>\n</div>\n<div class="center-menu-items">\n    <div ng-show="$ctrl.probeVlan.probe_in_progress">\n        <f-icon class="fa-loading"></f-icon>\n        <span>{{ ::\'Probe in Progress\' | lang }}</span>\n    </div>\n    <div ng-show="!$ctrl.probeVlan.probe_in_progress">\n        <f-icon class="fa-enabled"></f-icon>\n        <span>{{ ::\'completed\' | lang }}</span>\n    </div>\n</div>\n<div class="right-menu-items">\n    <f-radio-group>\n        <input type="radio"\n            ng-value="::true"\n            radio-label="{{:: \'View All\' | lang }}"\n            ng-model="$ctrl.viewAll"\n            ng-disabled="$ctrl.probeVlan.probe_in_progress">\n        <input type="radio"\n            ng-value="::false"\n            radio-label="{{:: \'View Available\' | lang }}"\n            ng-model="$ctrl.viewAll"\n            ng-disabled="$ctrl.probeVlan.probe_in_progress">\n    </f-radio-group>\n</div>')}]),module.exports=path},971:function(module,exports){var path="/migadmin/ng/user/sso/edit/f-collector-agent-adgrp-list.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<f-mutable\n    source="$ctrl.muTable.source"\n    settings="$ctrl.muTable.settings"\n    context-menu="::false">\n    <div class="left-menu-items">\n        <div f-menu-item-delete enabled="$ctrl.canDelete($entries)"></div>\n    </div>\n    <div class="center-menu-items">\n        <f-mutable-search></f-mutable-search>\n    </div>\n</f-mutable>\n')}]),module.exports=path},972:function(module,exports){var path="/migadmin/ng/utm/appctrl/signature/f-application-signatures.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<f-mutable\n    source="$ctrl.muTable.source"\n    settings="$ctrl.muTable.settings"\n    instance="$ctrl.muTable.instance"\n    context-menu="::true"\n    chart-colors="$ctrl.getChartColor(value, column)"\n    chart-columns="$ctrl.chartColumns">\n    <f-application-signatures-menu\n        class="menu-bar-component"\n        fortigate="$ctrl.fortigate"\n        menu="menu"\n        view-status="$ctrl.status"\n        view-types="$ctrl.viewTypes"\n        current-view-type="$ctrl.currentView"\n        single-view="$ctrl.singleView"\n        read-only-view="$ctrl.readOnly"\n        refresh="$ctrl.load()">\n    </f-application-signatures-menu>\n</f-mutable>\n')}]),module.exports=path},973:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(26)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(inject){function getEntryDatasource(entry){return`${entry.q_path}.${entry.q_name}`}const component={controller:class extends inject.Collectable{constructor(){super()}$onInit($INJECTABLE$,state){this.readOnly=state.readOnlyForPage}canEdit(entries){return Array.isArray(entries)&&1===entries.length&&["application.custom","application.group"].includes(getEntryDatasource(entries[0]))}changeViewType(name){name!==this.currentViewType&&(this.currentViewType=name)}createSignature($INJECTABLE$,state){return function(signatureType){const[q_path,q_name]=signatureType.split("."),url=state.getEditUrl(q_path,q_name);this._createOrEdit(url)}}editSignature($INJECTABLE$,state){return function(signature){const url=state.getEditUrl(signature.q_path,signature.q_name,"application.custom"===getEntryDatasource(entry=signature)?entry.tag:entry.q_origin_key);var entry;this._createOrEdit(url)}}transitionAfterDelete($INJECTABLE$,$route){return()=>{this.slideController?this.refresh():$route.reload()}}_createOrEdit($INJECTABLE$,$location,structure,$httpParamSerializer){return function(url,search={}){this.fortigate.isCurrent||(search.fortigate=this.fortigate.serial),this.slideController?structure.openRouteAsSlide(`${url}?${$httpParamSerializer(search)}`).then(()=>this.refresh()):$location.url(structure.ngURI(url)).search(search)}}},templateUrl:__webpack_require__(974),bindings:{menu:"<",currentViewType:"=",fortigate:"=",viewStatus:"<",viewTypes:"=",singleView:"=",readOnlyView:"=",refresh:"&"},require:{slideController:"?^fSlideContainer"}};return(providers,loader)=>(providers.$compile.component("fApplicationSignaturesMenu",component),loader.initModules([__webpack_require__(33)]))}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},974:function(module,exports){var path="/migadmin/ng/utm/appctrl/signature/f-application-signatures-menu.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<div class="left-menu-items"\n    ng-if="!$ctrl.singleView || $ctrl.singleView !== \'application.name\'">\n    <div f-menu-item-submenu="$ctrl.createMenu"\n        emphasized="::true"\n        ng-if="::$ctrl.menu.menuBar && !$ctrl.readOnly"\n        enabled="!$ctrl.viewStatus.loading">\n        <f-icon class="fa-plus"></f-icon>\n        <span f-lang="Create New"></span>\n    </div>\n    <div f-pop-up-menu="$ctrl.createMenu">\n        <div f-menu-item-button\n            ng-if="!$ctrl.singleView || $ctrl.singleView === \'application.group\'"\n            click="$ctrl.createSignature(\'application.group\')">\n            <span>{{:: \'Application Group\' | lang }}</span>\n        </div>\n        <div f-menu-item-button\n            ng-if="!$ctrl.singleView || $ctrl.singleView === \'application.signature\'"\n            click="$ctrl.createSignature(\'application.custom\')">\n            <span>{{:: \'Custom Application Signature\' | lang }}</span>\n        </div>\n    </div>\n    <div f-menu-item-edit\n        ng-if="!$ctrl.readOnlyView"\n        enabled="$ctrl.canEdit($entries)"\n        action="$ctrl.editSignature($entry)">\n    </div>\n    <div f-menu-item-delete\n        ng-if="!$ctrl.readOnlyView"\n        fortigate="$ctrl.fortigate"\n        transition-after-delete="$ctrl.refresh()">\n    </div>\n</div>\n<div class="center-menu-items"\n     ng-class="{ \'no-separator\': $ctrl.singleView }"\n     ng-if="::$ctrl.menu.menuBar">\n    <f-mutable-search></f-mutable-search>\n</div>\n<div class="right-menu-items"\n    ng-if="::$ctrl.menu.menuBar && !$ctrl.singleView">\n    <div class="radio-buttons">\n        <div f-menu-item-button\n            ng-repeat="viewType in ::$ctrl.viewTypes"\n            selected="viewType.name === $ctrl.currentViewType"\n            click="$ctrl.changeViewType(viewType.name)">\n            <span>{{ :: viewType.viewTypeLang | lang }}</span>\n        </div>\n    </div>\n    <f-csf-fortigate-chooser fortigate="$ctrl.fortigate"></f-csf-fortigate-chooser>\n</div>\n')}]),module.exports=path},975:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8),__webpack_require__(26),__webpack_require__(27)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(ftnt_shared,inject,notify){const Omniselect=ftnt_shared.Omniselect;class ApplicationSignatureView extends inject.Collectable{setParams({fortigate:fortigate,filters:filters,view:view="application.signature",hideChart:hideChart}){this.fortigate=fortigate,this.filters=filters,this.view=view,this.hideChart=hideChart,this.hasFilters=this.filters&&this.filters.length>0}get chartColumns(){return this.hideChart?[]:["category","technology","risk"]}getSettings($INJECTABLE$,$location,appSignatureUtils){return()=>{const settings=appSignatureUtils.getMuTableSettings({fortigate:this.fortigate,categoryNoTooltip:this.hasFilters,showParentChildRows:!this.hasFilters});return Object.assign({id:`${$location.path()}::ApplicationSignatureViewList`},settings)}}getSource($INJECTABLE$,lang,CMDB){return async function(){try{let promises=[Omniselect.getSourceData(this.fortigate.getOmniselectProxySourceID("application.name"))];"application.name"!==this.view&&(Omniselect.invalidateCacheForSource(this.fortigate.getOmniselectProxySourceID("application.custom")),promises.push(new CMDB("application","custom",{datesource:1,csfProxy:this.fortigate}).fetch().$promise));const[apps=[],customApps=[]]=await Promise.all(promises);if(!this.hasFilters)return[...apps,...customApps];const filters=this._parseFilters();return[...apps,...customApps].filter(entry=>this._filterEntry(filters,entry))}catch(e){return notify.post(lang("Failed to retrieve info"),notify.LEVEL.ERROR),[]}}}_filterEntry(filters,entry){return Object.keys(filters).every(key=>{const entryValue=entry[key];let valueArray;return(valueArray="string"==typeof entryValue?entry[key].split(/[,\s]+/):Array.isArray(entryValue)?entryValue:[entryValue]).some(value=>filters[key].includes(value))})}_parseFilters(){const filters={};if(this.hasFilters)for(const{type:type,id:id}of this.filters)filters[type]=Array.isArray(id)&&id||[id];return filters}}return(providers,loader)=>(providers.$provide.service("applicationSignatureView",ApplicationSignatureView),loader.initModules([__webpack_require__(248),__webpack_require__(249)]))}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},976:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(8),__webpack_require__(26)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(ftnt_shared,inject){const Omniselect=ftnt_shared.Omniselect,GROUP_TYPE_LANG={application:"Application Group",category:"Application Category Group"};class ApplicationGroupView extends inject.Collectable{setParams({fortigate:fortigate}){this.fortigate=fortigate}getProxySourceID(datasource){return this.fortigate.getOmniselectProxySourceID(datasource)}getSource($INJECTABLE$,CMDB){return async()=>{const[source,customApplication]=await Promise.all([new CMDB("application","group",{datesource:1,csfProxy:this.fortigate}).fetch().$promise,Omniselect.getSourceData(this.fortigate.getOmniselectProxySourceID("application.custom"))]);return this.customApplication=customApplication,source}}get chartColumns(){return[]}getSettings($INJECTABLE$,lang){return()=>{return{id:"ApplicationSignatureGroupView",defaultColumns:["name","type","member","comment"],defaultSectionColumn:"type",userDefinedSections:!1,informationMask:this.readOnly&&this.maskMessage,columns:[{id:"name",type:"omniselect",cellValueFunction:entry=>({q_origin_key:entry.q_origin_key,datasource:this.getProxySourceID("application.group")})},{id:"type",langKey:"Type",cellValueFunction:entry=>lang(GROUP_TYPE_LANG[entry.type])},{id:"member",type:"omniselect",cellValueFunction:entry=>"category"===entry.type?entry.category.map(({q_origin_key:q_origin_key})=>({q_origin_key:q_origin_key,datasource:this.getProxySourceID("application.category")})):entry.application.map(({q_origin_key:q_origin_key})=>({q_origin_key:q_origin_key,datasource:this.customApplication.mapping&&this.customApplication.mapping[q_origin_key]?this.getProxySourceID("application.custom"):this.getProxySourceID("application.name")})),omniselectAllowFallback:!0,collectionEntryValueFunction:entry=>entry},"comment","csfAwareCmdbReferences"]}}}}return providers=>{providers.$provide.service("applicationGroupView",ApplicationGroupView)}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},987:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(29),__webpack_require__(0),__webpack_require__(28),__webpack_require__(26)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=((ngModule,BUILD,patterns,inject)=>{const SERVER_ADDRESS_TOGGLE_SYMBOL=Symbol("isServerAddressSameAsMgmtIp"),ENABLE_SSO_SYMBOL=Symbol("enableSso");ngModule.component("fSamlFields",{controller:class extends inject.Collectable{constructor($scope,state){super(),this.patterns=patterns.commonRegExp,this.enableSsoInputId=`enable-sso-${$scope.$id}`,$scope.$on("submit",(e,posted)=>{posted.push(this.submit())}),this.canDownloadCertificate=state.adminHasReadPermission(state.ACCESS_GROUP.VPN)}$onInit($INJECTABLE$,state,$scope){return function(){this.loading=!0,this._resetEnableSso();const that=this;this.saml&&this.saml.$promise.then(()=>{let previousState1,previousState2;$scope.$watch("$ctrl.shouldSpecifyMgmtIp()",(newValue,oldValue)=>{newValue&&!oldValue?(previousState1=this.csf.managementIpType,this.csf.managementIpType=this.csf.MGMT_IP_TYPE_OPTIONS.SPECIFY):previousState1&&(this.csf.managementIpType=previousState1)}),$scope.$watch("$ctrl.shouldUnsetMgmtIp()",(newValue,oldValue)=>{newValue&&!oldValue?(previousState2=this.csf.managementIpType,this.csf.managementIpType=this.csf.MGMT_IP_TYPE_OPTIONS.DEFAULT):previousState2&&(this.csf.managementIpType=previousState2)}),this.selectSources={cert:{sources:"localCertificates",singleSelect:!0},adminProfile:{sources:this.fortigate?this.fortigate.getOmniselectProxySourceID("system.accprofile"):"system.accprofile",preProcessSelected:!0,singleSelect:!0,filterFunction:function(profile){return that.saml.$$original["default-profile"].name===profile.name||(profile.name===BUILD.SYMBOLS.SUPER_ADMIN_PROFILE?state.admin.super_admin:state.checkPermission(profile)&&profile.name!==BUILD.SYMBOLS.HA_ADMIN_ACC_PROFILE)}}},this.loading=!1})}}waitingForSync($INJECTABLE$,csfTopology){return function(){return this.csf.joinExisting&&csfTopology.isRootFortigate&&csfTopology.thisFortigate.samlRole===this.saml.ROLES.IDP&&this.syncedByCsf()&&this.saml.wasDisabled()&&!this.enableSso}}refresh(){this.fetchSaml&&this.fetchSaml(),this.$onInit()}showIdpServerAddress(){return this.saml.wasIdp()&&!this.wasServerAddressSameAsMgmtIp()&&this.enabledIdp()}wasServerAddressSameAsMgmtIp(){return this.saml.$$original["server-address"]===this.generateServerAddress(!0)}syncedByCsf(){return this.csf.$$original&&"enable"===this.csf.$$original.status&&"default"===this.csf.$$original["configuration-sync"]&&this.csf.$$original["management-ip"]}shouldSpecifyMgmtIp(){return this.enabledIdp()?!this.saml.wasIdp()||this.isServerAddressSameAsMgmtIp:this.enabledSp()?!this.saml.wasSp():void 0}shouldUnsetMgmtIp(){const enableSsoInputField=this.form[this.enableSsoInputId];return this.saml.wasSp()&&this.syncedByCsf()&&!this.enableSso&&enableSsoInputField&&enableSsoInputField.$dirty}shouldDisableSsoToggle(){return this.syncedByCsf()&&this.csf.managementIpType===this.csf.MGMT_IP_TYPE_OPTIONS.SPECIFY}enabledIdp(){return this.enableSso&&!this.csf.joinExisting}enabledSp(){return this.enableSso&&this.csf.joinExisting}_resetEnableSso(){this[ENABLE_SSO_SYMBOL]=void 0}get enableSso(){return!this.loading&&this.saml.$resolved&&void 0===this[ENABLE_SSO_SYMBOL]&&(this[ENABLE_SSO_SYMBOL]=this.saml.$mode()===(this.csf.joinExisting?this.saml.ROLES.SP:this.saml.ROLES.IDP)),this[ENABLE_SSO_SYMBOL]}set enableSso(value){this[ENABLE_SSO_SYMBOL]=value}get isServerAddressSameAsMgmtIp(){return null==this[SERVER_ADDRESS_TOGGLE_SYMBOL]&&(this[SERVER_ADDRESS_TOGGLE_SYMBOL]=this.saml["server-address"]===this.generateServerAddress()),this[SERVER_ADDRESS_TOGGLE_SYMBOL]}set isServerAddressSameAsMgmtIp(value){this[SERVER_ADDRESS_TOGGLE_SYMBOL]=value}downloadLocalCertUrl(cert){return`/api/v2/monitor/system/certificate/download/${encodeURIComponent(cert.name)}/?type=local&scope=vdom`}generateServerAddress(original){const data=original?this.csf.$$original:this.csf;let address=data["management-ip"];return data["management-port"]&&(address+=`:${data["management-port"]}`),address}submit($INJECTABLE$,CMDB){return function(){return this.enableSso?"enable"!==this.csf.status||this.csf.joinExisting||(this.saml.$mode(this.saml.ROLES.IDP),this.showIdpServerAddress()&&!this.isServerAddressSameAsMgmtIp||(this.saml["server-address"]=this.generateServerAddress())):this.saml.$mode("disable"),this.saml.$save().$promise.catch(()=>{CMDB.notifyFailureMessage("Failed to save some changes: {ERROR}")})}}gotoSamlPage($INJECTABLE$,structure,$route){return function(){structure.openRouteAsSlide("/ng/user/saml").then(()=>{$route.reload()})}}},bindings:{saml:"<",csf:"<",fortigate:"<",fetchSaml:"&",form:"<"},templateUrl:__webpack_require__(988)})}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},988:function(module,exports){var path="/migadmin/ng/user/saml/f-saml-fields.html";window.angular.module("ng").run(["$templateCache",function(c){c.put(path,'<f-field ng-if="!$ctrl.loading">\n    <field-label class="toggle-label">\n        <span>\n            <span>{{:: \'SAML::SAML Single Sign-On\' | lang}}</span>\n            <f-icon ng-if="!$ctrl.csf.joinExisting" class="fa-help-info" f-tip>\n                {{:: \'If this option is enabled, this FortiGate will become the identity provider for this Security Fabric.\' | lang}}\n            </f-icon>\n            <f-icon ng-if="$ctrl.csf.joinExisting && !$ctrl.syncedByCsf() && $ctrl.saml.$mode() === \'disable\'" class="fa-help-info" f-tip>\n                {{:: \'SAML::If this option is enabled, this FortiGate will become the service provider if root FortiGate is Single Sign-On identity provider.\' | lang}}\n            </f-icon>\n        </span>\n        <input type="checkbox" class="toggle-switch" id="{{$ctrl.enableSsoInputId}}"\n            name="{{$ctrl.enableSsoInputId}}"\n            ng-model="$ctrl.enableSso"\n            ng-disabled="$ctrl.waitingForSync()">\n        <label for="{{$ctrl.enableSsoInputId}}"></label>\n    </field-label>\n    <field-value class="with-message">\n        <div ng-if="$ctrl.syncedByCsf() && $ctrl.enabledSp()"\n            class="info-message">\n            <f-icon class="fa-help-info"></f-icon>\n            <div class="message-content">\n                <span f-lang="SAML::The root FortiGate in the Security Fabric has automatically set this device to be in Service Provider mode. The SP address is set to the management IP."></span>\n            </div>\n        </div>\n        <div ng-if="$ctrl.waitingForSync()"\n            class="info-message">\n            <f-icon class="fa-loading"></f-icon>\n            <div class="message-content">\n                <div>\n                    <span f-lang="SAML::Waiting for the root FortiGate in the Security Fabric to automatically set this device to be in Service Provider mode."></span>\n                </div>\n                <div>\n                    <button type="button" ng-click="$ctrl.refresh()">\n                        <f-icon class="fa-refresh"></f-icon>\n                        <span>{{:: \'Refresh\' | lang}}</span>\n                    </button>\n                </div>\n            </div>\n        </div>\n    </field-value>\n</f-field>\n<f-field class="child" ng-if="!$ctrl.loading && $ctrl.enableSso">\n    <field-label f-lang="Mode"></field-label>\n    <field-value>\n        {{:: $ctrl.saml.MODE_OPTIONS[$ctrl.enabledIdp() ? $ctrl.saml.ROLES.IDP : $ctrl.saml.ROLES.SP] | lang}}\n    </field-value>\n</f-field>\n<f-field ng-class="{child: $ctrl.enableSso}"\n         ng-if="!$ctrl.loading && $ctrl.csf.status === \'enable\'"\n         error-messages="{pattern: \'err_fqdn\'}"\n         f-highlight\n         id="csfMgmtIp">\n    <field-label>\n        <span f-lang="Management IP/FQDN"></span>\n        <f-icon class="fa-help-info" f-tip>\n            <span>{{:: \'csf_management_ip_description\' | lang}}</span>\n        </f-icon>\n    </field-label>\n    <field-value class="wrappable">\n        <f-radio-group>\n            <div f-tip-target>\n                <input type="radio"\n                       value="{{:: $ctrl.csf.MGMT_IP_TYPE_OPTIONS.DEFAULT }}"\n                       radio-label="{{:: \'Use WAN IP\' | lang }}"\n                       ng-model="$ctrl.csf.managementIpType"\n                       ng-disabled="$ctrl.shouldSpecifyMgmtIp()">\n                    <span f-tip\n                          ng-if="$ctrl.shouldSpecifyMgmtIp()">\n                        {{:: \'Specifying management IP is required because it will be used as SAML SSO address.\' | lang}}\n                    </span>\n            </div>\n            <div f-tip-target>\n                <input type="radio"\n                       value="{{:: $ctrl.csf.MGMT_IP_TYPE_OPTIONS.SPECIFY }}"\n                       radio-label="{{:: \'Specify\' | lang }}"\n                       ng-model="$ctrl.csf.managementIpType"\n                       ng-disabled="$ctrl.shouldUnsetMgmtIp()">\n                <div f-tip\n                     ng-if="$ctrl.shouldUnsetMgmtIp()">\n                    <div>\n                        {{:: \'SAML::The root FortiGate in the Security Fabric has automatically set this device to be in Service Provider mode. The SP address is set to the management IP.\' | lang }}\n                    </div>\n                    <div>\n                        {{:: \'SAML::To disable SAML SSO, management IP has been set to \\\'Use WAN IP\\\'.\' | lang }}\n                    </div>\n                </div>\n            </div>\n        </f-radio-group>\n        <input ng-if="$ctrl.csf.managementIpType == $ctrl.csf.MGMT_IP_TYPE_OPTIONS.SPECIFY"\n               ng-model="$ctrl.csf[\'management-ip\']"\n               f-max-length="::$ctrl.csf.$schema.children[\'management-ip\'].size"\n               ng-pattern="$ctrl.patterns.FQDN"\n               required>\n    </field-value>\n</f-field>\n<f-field ng-class="{child: $ctrl.enableSso}" ng-if="!$ctrl.loading && $ctrl.csf.status === \'enable\'">\n    <field-label f-lang="Management port"></field-label>\n    <field-value class="wrappable">\n        <f-radio-group>\n            <input type="radio"\n                   value="{{:: $ctrl.csf.MGMT_PORT_TYPE_OPTIONS.DEFAULT }}"\n                   radio-label="{{:: \'Use Admin Port\' | lang }}"\n                   ng-model="$ctrl.csf.managementPortType">\n            <input type="radio"\n                   value="{{:: $ctrl.csf.MGMT_PORT_TYPE_OPTIONS.SPECIFY }}"\n                   radio-label="{{:: \'Specify\' | lang }}"\n                   ng-model="$ctrl.csf.managementPortType">\n        </f-radio-group>\n        <input type="number"\n               id="management-port"\n               ng-if="$ctrl.csf.managementPortType == $ctrl.csf.MGMT_PORT_TYPE_OPTIONS.SPECIFY"\n               ng-model="$ctrl.csf[\'management-port\']"\n               min="{{::$ctrl.csf.$schema.children[\'management-port\'][\'min-value\']}}"\n               max="{{::$ctrl.csf.$schema.children[\'management-port\'][\'max-value\']}}">\n    </field-value>\n</f-field>\n<f-field class="child" ng-if="!$ctrl.loading && $ctrl.showIdpServerAddress()">\n    <field-label>\n        <span f-lang="SAML::IdP address"></span>\n        <f-icon f-tip class="fa-help-info">\n            <div>{{:: \'SAML::Address must be accessible by your browser.\' | lang}}</div>\n            <div>{{:: \'SAML::Port can be added after colon. Example: 192.168.1.1:443.\' | lang}}</div>\n        </f-icon>\n    </field-label>\n    <field-value class="wrappable">\n        <f-radio-group>\n            <input type="radio"\n                ng-value="true"\n                radio-label="{{:: \'Use Management IP/FQDN\' | lang }}"\n                ng-model="$ctrl.isServerAddressSameAsMgmtIp">\n            <input type="radio"\n                ng-value="false"\n                radio-label="{{:: \'Specify\' | lang }}"\n                ng-model="$ctrl.isServerAddressSameAsMgmtIp">\n        </f-radio-group>\n    </field-value>\n</f-field>\n<f-field class="child"\n         ng-if="!$ctrl.loading && $ctrl.showIdpServerAddress() && !$ctrl.isServerAddressSameAsMgmtIp"\n         error-messages="{invalidAddress: \'Invalid address\'}">\n    <field-label></field-label>\n    <field-value>\n        <input ng-model="$ctrl.saml[\'server-address\']" f-max-length="$ctrl.saml.$schema.children[\'server-address\'].size"\n            ng-disabled="$ctrl.syncedByCsf() && $ctrl.enabledSp()" required>\n        <button type="button"\n                ng-disabled="$ctrl.saml.getAddressBarHost() === $ctrl.saml[\'server-address\'] || ($ctrl.syncedByCsf() && $ctrl.enabledSp())"\n                ng-click="$ctrl.saml[\'server-address\'] = $ctrl.saml.getAddressBarHost()">\n            {{:: \'Use Current Browser Address\' | lang}}\n        </button>\n    </field-value>\n</f-field>\n<f-field class="child" ng-if="!$ctrl.loading && $ctrl.enabledIdp()">\n    <field-label f-lang="SAML::IdP certificate"></field-label>\n    <field-value class="wrappable">\n        <div f-omniselect="$ctrl.selectSources.cert" ng-model="$ctrl.saml.cert" required>\n        </div>\n        <a class="button-style"\n           ng-if="$ctrl.canDownloadCertificate"\n           ng-href="{{$ctrl.downloadLocalCertUrl($ctrl.saml.cert)}}"\n           ng-class="{\'disabled\': !$ctrl.saml.cert}">\n            <f-icon class="fa-download"></f-icon>\n            <span f-lang="download"></span>\n        </a>\n    </field-value>\n</f-field>\n<f-field class="child" ng-if="!$ctrl.loading && $ctrl.enabledSp()">\n    <field-label>\n        {{::\'SAML::Default login page\' | lang}}\n        <f-icon f-tip class="fa-help-info">\n            <table class="table key-value condensed">\n                <tbody>\n                    <tr>\n                        <td>{{::\'SAML::default-login-page.normal\' | lang}}</td>\n                        <td>{{::\'SAML::Normal login page with a SSO option.\' | lang}}</td>\n                    </tr>\n                    <tr>\n                        <td>{{::\'SAML::default-login-page.sso\' | lang}}</td>\n                        <td>{{::\'SAML::Automatically redirect to IdP\\\'s SSO login page.\' | lang}}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </f-icon>\n    </field-label>\n    <field-value>\n        <f-radio-group>\n            <input type="radio"\n                ng-model="$ctrl.saml[\'default-login-page\']"\n                ng-repeat="opt in ::$ctrl.saml.$schema.children[\'default-login-page\'].options"\n                radio-label="{{::\'SAML::default-login-page.\' + opt.name|lang}}"\n                value="{{::opt.name}}">\n        </f-radio-group>\n    </field-value>\n</f-field>\n<f-field class="child" ng-if="!$ctrl.loading && $ctrl.enabledSp()">\n    <field-label>\n        {{::\'SAML::Default admin profile\' | lang}}\n        <f-icon f-tip class="fa-help-info">\n            <span f-lang="SAML::An SSO administrator with selected profile will be created when logging in for first time."></span>\n        </f-icon>\n    </field-label>\n    <field-value>\n        <div f-omniselect="$ctrl.selectSources.adminProfile"\n            ng-model="$ctrl.saml[\'default-profile\']"></div>\n    </field-value>\n</f-field>\n<f-field class="child" ng-if="!$ctrl.loading && $ctrl.enableSso && !$ctrl.isDownstream">\n    <field-label>\n        <button type="button" ng-click="$ctrl.gotoSamlPage()">\n            <f-icon class="fa-external-link"></f-icon>\n            <span>{{:: \'Advanced Options\' | lang}}</span>\n        </button>\n    </field-label>\n    <field-value></field-value>\n</f-field>')}]),module.exports=path},989:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(29),__webpack_require__(8),__webpack_require__(0),__webpack_require__(28),__webpack_require__(9)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=((ngModule,ftnt_shared,BUILD,patterns,angular)=>{ngModule.factory("createSamlModel",function(CMDB,$window,csfTopology,$http,$q){const SP_MEMBER_DEFAULTS={"sp-entity-id":"http://{0}/metadata/","sp-single-sign-on-url":"https://{0}/saml/?acs","sp-single-logout-url":"https://{0}/saml/?sls","sp-portal-url":"https://{0}/saml/login/"},SP_ROLE_DEFAULTS={"entity-id":"http://{0}/metadata/","single-sign-on-url":"https://{0}/saml/?acs","single-logout-url":"https://{0}/saml/?sls","portal-url":"https://{0}/saml/login/"},IDP_DEFAULTS={"idp-entity-id":"http://{0}/saml-idp/{1}/metadata/","idp-single-sign-on-url":"https://{0}/saml-idp/{1}/login/","idp-single-logout-url":"https://{0}/saml-idp/{1}/logout/"},USER_NAME=BUILD.SYMBOLS.ASSERTION_STATEMENT_USER_NAME,USER_NAME_ATTR={q_origin_key:USER_NAME,name:USER_NAME,type:"username"},ROLES={IDP:"identity-provider",SP:"service-provider"},FGT_SYMBOL=Symbol("fortigate");class InterpolateValue{constructor(value,placeholder){patterns.commonRegExp.IP6_HOST.test(value)&&(value=`[${value}]`),this.value=value,this.placeholder=placeholder}}return function(fortigate){function Model(){this.$original["server-address"]||(this["server-address"]=this.getAddressBarHost());const csfSetting=new CMDB("system","csf",{csfProxy:fortigate}).fetch();this._parseSpRoleValue(),this.$original["service-providers"].forEach((originalSp,idx)=>{const sp=this["service-providers"][idx];sp.$original=originalSp,this._parseSpMember(sp),sp["assertion-attributes"]=sp["assertion-attributes"]||[],sp["assertion-attributes"].$factory=(()=>({q_origin_key:"",name:"",type:"username"}))}),this.csfFgtPromise=csfTopology.buildIfNecessary().then(()=>(this.$isDownstream=!csfTopology.isRootFortigate||fortigate&&fortigate!==csfTopology.thisFortigate,csfTopology.csfEnabled&&csfSetting.$promise.then(()=>{this.$csfManagmentIpSpecified=csfSetting["management-ip"],this.$isCsfSyncEnabled="enable"===csfSetting.status&&"default"===csfSetting["configuration-sync"]}),this.matchConfiguredFabricFgt()))}return Model.prototype=new CMDB.ResourceModel({ROLES:ROLES,MODE_OPTIONS:{disable:"disable",[ROLES.IDP]:"SAML::role.IdP",[ROLES.SP]:"SAML::role.SP"},PREFIX_PATTERN_CSF:/^(csf_)?[a-z0-9]*$/,PREFIX_PATTERN:/^[a-z0-9]*$/,$mode(value){if(void 0===value)return"enable"===this.status?this.role:this.status;"disable"===value?this.status=value:(this.role=value,this.status="enable")},isModeDisabled(value){const isInSync=this.$isDownstream&&this.$isCsfSyncEnabled&&this.$csfManagmentIpSpecified;if("disable"===value||value===ROLES.IDP)return isInSync&&this.wasSp();if(value===ROLES.SP){const spInSync=isInSync&&(this.wasDisabled()||this.wasIdp()),rootFGT=csfTopology.csfEnabled&&csfTopology.isRootFortigate&&!this.wasSp();return spInSync||rootFGT}return!1},wasDisabled(){return this.$$original&&"disable"===this.$$original.status},wasIdp(){return this.$$original&&"enable"===this.$$original.status&&this.$$original.role===ROLES.IDP},wasSp(){return this.$$original&&"enable"===this.$$original.status&&this.$$original.role===ROLES.SP},matchConfiguredFabricFgt(){if(!csfTopology.csfEnabled||!csfTopology.isRootFortigate)return $q.resolve();const fgtSamlSettingsMap=new Map;let promises=[];return promises.push(ftnt_shared.Omniselect.getSourceData("csfFortiGates")),promises=csfTopology.fortigates.reduce((acc,fgt)=>{if(fgt===csfTopology.thisFortigate)return acc;const url=fgt.createCSFURI("/api/v2/cmdb/system/saml"),promise=$http.get(url).then(response=>{const samlSettings=response.data.results;fgtSamlSettingsMap.set(fgt,samlSettings)},angular.noop);return acc.push(promise),acc},promises),$q.all(promises).then(responses=>{const fgtMapping=responses[0].mapping;this["service-providers"].forEach(sp=>{fgtSamlSettingsMap.forEach((settings,fgt)=>{"enable"===settings.status&&settings.role===ROLES.SP&&["idp-entity-id","idp-single-sign-on-url","idp-single-logout-url"].every(key=>settings[key]===sp[key])&&(sp[FGT_SYMBOL]=fgtMapping[fgt.id])})})})},getSpMatchingFgt:sp=>sp&&sp[FGT_SYMBOL],getAddressBarHost:()=>$window.location.host,createSP(){const cmdb=new CMDB("system","saml",{children:"service-providers"}),sp=cmdb.defaults();return cmdb.defaults().$promise.then(()=>(sp.$new=!0,sp.prefix=this.generateUniquePrefix(),sp.$isDefault=!0,sp["sp-binding-protocol"]="post",sp["assertion-attributes"].push(USER_NAME_ATTR),sp))},showBindingProtocol:sp=>sp&&!sp.$new&&sp.$original&&"post"!==sp.$original["sp-binding-protocol"],spCertEnabled(value){return this._toggleEnabled(this,"$spCertToggleState","cert",value)},spMemberCertEnabled(sp){return value=>this._toggleEnabled(sp,"$spMemberCertToggleState","sp-cert",value)},spMemberAttributesEnabled:sp=>value=>{if(!sp)return!1;const list=sp["assertion-attributes"];if(void 0===value)return!!list.length;value?sp.$backupAttributes&&sp.$backupAttributes.length?list.push.apply(list,sp.$backupAttributes):list.push({}):(sp.$backupAttributes=list.slice(),list.length=0)},_toggleEnabled:(obj,toggleName,key,value)=>!!obj&&(void 0===value?(void 0===obj[toggleName]&&(obj[toggleName]=!(!obj||!obj[key])),obj[toggleName]):void(obj[toggleName]=value)),isSpAttributeNameUnique:(sp,attr,value)=>!value||!sp["assertion-attributes"].some(a=>a.name===value&&a!==attr),isSpPropertyUnique(key,sp,value){return!value||!(this["service-providers"]||[]).some(s=>s[key]===value&&s!==sp)},_parse(entry,defaultPattern){let matches;const isDefault=Object.entries(defaultPattern).every(([key,template])=>{const value=entry[key];if(!value)return!0;const regex=new RegExp(`^${template.replace(/{\d}/g,"(.+)").replace("?","\\?")}$`),matchesTemp=value.match(regex);return matchesTemp?(matchesTemp.shift(),matches?matchesTemp.length===matches.length&&matchesTemp.every((match,i)=>matches[i]===match):(matches=matchesTemp,!0)):void 0});return{isDefault:isDefault,matches:isDefault&&matches||[]}},_parseSpMember(sp){const{isDefault:isDefault,matches:matches}=this._parse(sp,SP_MEMBER_DEFAULTS),isDefaultAttribute=this.isDefaultSpMemberAssertionAttributes(sp);sp.$isDefault=isDefault&&isDefaultAttribute,isDefault&&(sp.$address=matches[0])},_parseSpRoleValue(){const parse=target=>{const idpResult=this._parse(target,IDP_DEFAULTS);target.$isIdpDefault=idpResult.isDefault,target.$idpAddress=idpResult.matches[0],target.$idpPrefix=idpResult.matches[1]};parse(this),parse(this.$original)},_interpolateDefaults(defaults,entry,...data){Object.entries(defaults).forEach(([key,template])=>{entry[key]=ftnt_shared.lang.stringInterpolate(template,data.map(d=>d.value?d.value:d.placeholder))})},generateUniquePrefix(){const isDuplicate=prefix=>this["service-providers"].some(sp=>sp.prefix===prefix);let prefix=generate();for(;isDuplicate(prefix);)prefix=generate();return prefix;function generate(length=16){let result="";do{result+=Math.random().toString(36).slice(2)}while(result.length<length);return result.substr(-length)}},populateSpMemberDefaultValue(sp,addr){sp&&this._interpolateDefaults(SP_MEMBER_DEFAULTS,sp,new InterpolateValue(addr,"<address>"))},populateSpMemberIDPValue(sp,addr,prefix){sp&&this._interpolateDefaults(IDP_DEFAULTS,sp,new InterpolateValue(addr,"<address>"),new InterpolateValue(prefix,"<prefix>"))},populateSpRoleValue(addr){this._interpolateDefaults(SP_ROLE_DEFAULTS,this,new InterpolateValue(addr,"<address>"))},populateSpRoleIDPValue(addr,prefix){this._interpolateDefaults(IDP_DEFAULTS,this,new InterpolateValue(addr,"<address>"),new InterpolateValue(prefix,"<prefix>"))},isDefaultSpMemberAssertionAttributes(sp){return this.hasAssertionAttributes(sp,USER_NAME_ATTR)},hasAssertionAttributes:(sp,attr)=>sp["assertion-attributes"].some(existing=>["q_origin_key","type"].every(key=>attr[key]===existing[key])),setDefaultSpMemberAssertionAttributes(sp){sp.$isDefault&&(this.isDefaultSpMemberAssertionAttributes(sp)||sp["assertion-attributes"].push(USER_NAME_ATTR))},$save(...args){return this.role!==ROLES.SP||this.spCertEnabled()||(this.cert=null),this.role===ROLES.IDP&&this["service-providers"].forEach(sp=>{this.spMemberCertEnabled(sp)()||(sp["sp-cert"]=null),this.setDefaultSpMemberAssertionAttributes(sp)}),CMDB.ResourceModel.prototype.$save.apply(this,args)}}),Model}})}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}}]);